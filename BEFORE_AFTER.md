# üîî PWA Push-—É–≤–µ–¥–æ–º–ª–µ–Ω–∏—è: –î–æ –∏ –ü–æ—Å–ª–µ

## ‚ùå –î–û –∏—Å–ø—Ä–∞–≤–ª–µ–Ω–∏—è

### –ü—Ä–æ–±–ª–µ–º–∞:
```
‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê
‚îÇ  üîî –î–æ–±—Ä—ã–µ –∏—Å—Ç–æ—Ä–∏–∏          ‚îÇ
‚îÇ                             ‚îÇ
‚îÇ  –£ –Ω–∞—Å –µ—Å—Ç—å —á—Ç–æ-—Ç–æ –Ω–æ–≤–æ–µ    ‚îÇ
‚îÇ  –¥–ª—è –≤–∞—Å!                   ‚îÇ
‚îÇ                             ‚îÇ
‚îÇ  [–°—Ç–∞–Ω–¥–∞—Ä—Ç–Ω—ã–π –∫–æ–ª–æ–∫–æ–ª—å—á–∏–∫]  ‚îÇ ‚Üê ‚ùå –ü–æ–∫–∞–∑—ã–≤–∞–µ—Ç—Å—è —Å–∏—Å—Ç–µ–º–Ω–∞—è –∏–∫–æ–Ω–∫–∞
‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò
```

### –ß—Ç–æ –Ω–µ —Ä–∞–±–æ—Ç–∞–ª–æ:
- ‚ùå –ü–æ–∫–∞–∑—ã–≤–∞–ª—Å—è —Å—Ç–∞–Ω–¥–∞—Ä—Ç–Ω—ã–π –∫–æ–ª–æ–∫–æ–ª—å—á–∏–∫ —Å–∏—Å—Ç–µ–º—ã
- ‚ùå –û—Ç—Å—É—Ç—Å—Ç–≤–æ–≤–∞–ª–∞ badge –∏–∫–æ–Ω–∫–∞
- ‚ùå –ù–µ –±—ã–ª–æ –ø—Ä–æ–º–µ–∂—É—Ç–æ—á–Ω—ã—Ö —Ä–∞–∑–º–µ—Ä–æ–≤ –∏–∫–æ–Ω–æ–∫
- ‚ùå Service Worker –Ω–µ —É–∫–∞–∑—ã–≤–∞–ª —è–≤–Ω—ã–µ –ø—É—Ç–∏
- ‚ùå Manifest –Ω–µ —Å–æ–¥–µ—Ä–∂–∞–ª badge –∏–∫–æ–Ω–∫—É

---

## ‚úÖ –ü–û–°–õ–ï –∏—Å–ø—Ä–∞–≤–ª–µ–Ω–∏—è

### –†–µ—à–µ–Ω–∏–µ:
```
‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê
‚îÇ  üü® –î–æ–±—Ä—ã–µ –∏—Å—Ç–æ—Ä–∏–∏          ‚îÇ
‚îÇ  [–î–ò]                       ‚îÇ ‚Üê ‚úÖ –ò–∫–æ–Ω–∫–∞ —Å–∞–π—Ç–∞ "–î–ò" –Ω–∞ –∑–æ–ª–æ—Ç–æ–º —Ñ–æ–Ω–µ
‚îÇ                             ‚îÇ
‚îÇ  –£ –Ω–∞—Å –µ—Å—Ç—å —á—Ç–æ-—Ç–æ –Ω–æ–≤–æ–µ    ‚îÇ
‚îÇ  –¥–ª—è –≤–∞—Å!                   ‚îÇ
‚îÇ                             ‚îÇ
‚îÇ  [–ü–æ—Å–º–æ—Ç—Ä–µ—Ç—å] [–ó–∞–∫—Ä—ã—Ç—å]     ‚îÇ
‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò
```

### –ß—Ç–æ —Ä–∞–±–æ—Ç–∞–µ—Ç —Ç–µ–ø–µ—Ä—å:
- ‚úÖ –ü–æ–∫–∞–∑—ã–≤–∞–µ—Ç—Å—è –∏–∫–æ–Ω–∫–∞ —Å–∞–π—Ç–∞ "–î–ò" –Ω–∞ –∑–æ–ª–æ—Ç–æ–º —Ñ–æ–Ω–µ
- ‚úÖ Badge –∏–∫–æ–Ω–∫–∞ –ø—Ä–∏—Å—É—Ç—Å—Ç–≤—É–µ—Ç (72x72)
- ‚úÖ –í—Å–µ –ø—Ä–æ–º–µ–∂—É—Ç–æ—á–Ω—ã–µ —Ä–∞–∑–º–µ—Ä—ã —Å–æ–∑–¥–∞–Ω—ã
- ‚úÖ Service Worker —Å —è–≤–Ω—ã–º–∏ –ø—É—Ç—è–º–∏ –∫ –∏–∫–æ–Ω–∫–∞–º
- ‚úÖ Manifest —Å–æ–¥–µ—Ä–∂–∏—Ç –ø–æ–ª–Ω—ã–π –Ω–∞–±–æ—Ä –∏–∫–æ–Ω–æ–∫
- ‚úÖ –ü–æ–¥–¥–µ—Ä–∂–∫–∞ –∫–∞—Å—Ç–æ–º–Ω—ã—Ö –∏–∫–æ–Ω–æ–∫
- ‚úÖ –ü—Ä–∞–≤–∏–ª—å–Ω–∞—è –≥—Ä—É–ø–ø–∏—Ä–æ–≤–∫–∞ —É–≤–µ–¥–æ–º–ª–µ–Ω–∏–π

---

## üîß –¢–µ—Ö–Ω–∏—á–µ—Å–∫–∏–µ –∏–∑–º–µ–Ω–µ–Ω–∏—è

### Service Worker (sw.js)

#### –î–û:
```javascript
const options = {
  body: '–£ –Ω–∞—Å –µ—Å—Ç—å —á—Ç–æ-—Ç–æ –Ω–æ–≤–æ–µ –¥–ª—è –≤–∞—Å!',
  icon: '/static/icons/icon-192x192.png',
  badge: '/static/icons/badge-72x72.png',  // ‚ùå —Ñ–∞–π–ª –Ω–µ —Å—É—â–µ—Å—Ç–≤–æ–≤–∞–ª
  // ...
};
```

#### –ü–û–°–õ–ï:
```javascript
const options = {
  body: '–£ –Ω–∞—Å –µ—Å—Ç—å —á—Ç–æ-—Ç–æ –Ω–æ–≤–æ–µ –¥–ª—è –≤–∞—Å!',
  icon: '/static/icons/icon-192x192.png',  // ‚úÖ —è–≤–Ω—ã–π –ø—É—Ç—å
  badge: '/static/icons/badge-72x72.png',  // ‚úÖ —Ñ–∞–π–ª —Å–æ–∑–¥–∞–Ω
  image: null,  // ‚úÖ –ø–æ–¥–¥–µ—Ä–∂–∫–∞ –±–æ–ª—å—à–∏—Ö –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏–π
  tag: 'default-notification',  // ‚úÖ –≥—Ä—É–ø–ø–∏—Ä–æ–≤–∫–∞
  // ...
};

// ‚úÖ –ü–æ–¥–¥–µ—Ä–∂–∫–∞ –∫–∞—Å—Ç–æ–º–Ω—ã—Ö –∏–∫–æ–Ω–æ–∫
if (event.data) {
  const data = event.data.json();
  options.icon = data.icon || '/static/icons/icon-192x192.png';
  options.badge = data.badge || '/static/icons/badge-72x72.png';
  options.image = data.image || null;
  options.tag = data.tag || 'default-notification';
}
```

---

### Manifest (manifest.json)

#### –î–û:
```json
"icons": [
  { "src": "/static/icons/icon-72x72.png", "sizes": "72x72" },
  { "src": "/static/icons/icon-192x192.png", "sizes": "192x192" },
  { "src": "/static/icons/icon-512x512.png", "sizes": "512x512" }
]
```
‚ùå –û—Ç—Å—É—Ç—Å—Ç–≤—É—é—Ç: 96, 128, 144, 384, badge

#### –ü–û–°–õ–ï:
```json
"icons": [
  { "src": "/static/icons/icon-72x72.png", "sizes": "72x72" },
  { "src": "/static/icons/icon-96x96.png", "sizes": "96x96" },      // ‚úÖ
  { "src": "/static/icons/icon-128x128.png", "sizes": "128x128" },  // ‚úÖ
  { "src": "/static/icons/icon-144x144.png", "sizes": "144x144" },  // ‚úÖ
  { "src": "/static/icons/icon-192x192.png", "sizes": "192x192", "purpose": "any maskable" },
  { "src": "/static/icons/icon-384x384.png", "sizes": "384x384" },  // ‚úÖ
  { "src": "/static/icons/icon-512x512.png", "sizes": "512x512", "purpose": "any maskable" },
  { "src": "/static/icons/badge-72x72.png", "sizes": "72x72", "purpose": "badge monochrome" }  // ‚úÖ
]
```
‚úÖ –í—Å–µ —Ä–∞–∑–º–µ—Ä—ã –ø—Ä–∏—Å—É—Ç—Å—Ç–≤—É—é—Ç, –≤–∫–ª—é—á–∞—è badge!

---

## üì± –í–∏–∑—É–∞–ª—å–Ω–æ–µ —Å—Ä–∞–≤–Ω–µ–Ω–∏–µ

### –ù–∞ Android:

#### –î–û:
```
üîî [–°–∏—Å—Ç–µ–º–Ω—ã–π –∫–æ–ª–æ–∫–æ–ª—å—á–∏–∫]
   –î–æ–±—Ä—ã–µ –∏—Å—Ç–æ—Ä–∏–∏
   –£ –Ω–∞—Å –µ—Å—Ç—å —á—Ç–æ-—Ç–æ –Ω–æ–≤–æ–µ...
```

#### –ü–û–°–õ–ï:
```
üü® [–î–ò - –∏–∫–æ–Ω–∫–∞ —Å–∞–π—Ç–∞]
   –î–æ–±—Ä—ã–µ –∏—Å—Ç–æ—Ä–∏–∏
   –£ –Ω–∞—Å –µ—Å—Ç—å —á—Ç–æ-—Ç–æ –Ω–æ–≤–æ–µ...
```

### –ù–∞ iOS:

#### –î–û:
```
üîî [–°–∏—Å—Ç–µ–º–Ω—ã–π –∫–æ–ª–æ–∫–æ–ª—å—á–∏–∫]
   –î–æ–±—Ä—ã–µ –∏—Å—Ç–æ—Ä–∏–∏
   –£ –Ω–∞—Å –µ—Å—Ç—å —á—Ç–æ-—Ç–æ –Ω–æ–≤–æ–µ...
```

#### –ü–û–°–õ–ï:
```
üü® [–î–ò - –∏–∫–æ–Ω–∫–∞ —Å–∞–π—Ç–∞]
   –î–æ–±—Ä—ã–µ –∏—Å—Ç–æ—Ä–∏–∏
   –£ –Ω–∞—Å –µ—Å—Ç—å —á—Ç–æ-—Ç–æ –Ω–æ–≤–æ–µ...
```

### –ù–∞ Desktop (Chrome):

#### –î–û:
```
‚ïî‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïó
‚ïë üîî  –î–æ–±—Ä—ã–µ –∏—Å—Ç–æ—Ä–∏–∏            ‚ïë
‚ïë                               ‚ïë
‚ïë –£ –Ω–∞—Å –µ—Å—Ç—å —á—Ç–æ-—Ç–æ –Ω–æ–≤–æ–µ...    ‚ïë
‚ïö‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïù
```

#### –ü–û–°–õ–ï:
```
‚ïî‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïó
‚ïë üü®  –î–æ–±—Ä—ã–µ –∏—Å—Ç–æ—Ä–∏–∏            ‚ïë
‚ïë [–î–ò]                          ‚ïë
‚ïë –£ –Ω–∞—Å –µ—Å—Ç—å —á—Ç–æ-—Ç–æ –Ω–æ–≤–æ–µ...    ‚ïë
‚ïë [–ü–æ—Å–º–æ—Ç—Ä–µ—Ç—å]    [–ó–∞–∫—Ä—ã—Ç—å]     ‚ïë
‚ïö‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïù
```

---

## üìä –°—Ä–∞–≤–Ω–∏—Ç–µ–ª—å–Ω–∞—è —Ç–∞–±–ª–∏—Ü–∞

| –ü–∞—Ä–∞–º–µ—Ç—Ä | –î–û | –ü–û–°–õ–ï |
|----------|-----|--------|
| **–ò–∫–æ–Ω–∫–∞ –≤ —É–≤–µ–¥–æ–º–ª–µ–Ω–∏–∏** | ‚ùå –°–∏—Å—Ç–µ–º–Ω—ã–π –∫–æ–ª–æ–∫–æ–ª—å—á–∏–∫ | ‚úÖ –ò–∫–æ–Ω–∫–∞ —Å–∞–π—Ç–∞ "–î–ò" |
| **Badge –∏–∫–æ–Ω–∫–∞** | ‚ùå –û—Ç—Å—É—Ç—Å—Ç–≤—É–µ—Ç | ‚úÖ –ü—Ä–∏—Å—É—Ç—Å—Ç–≤—É–µ—Ç (72x72) |
| **–†–∞–∑–º–µ—Ä—ã –∏–∫–æ–Ω–æ–∫** | 3 —Ä–∞–∑–º–µ—Ä–∞ | ‚úÖ 8 —Ä–∞–∑–º–µ—Ä–æ–≤ |
| **–ö–∞—Å—Ç–æ–º–Ω—ã–µ –∏–∫–æ–Ω–∫–∏** | ‚ùå –ù–µ –ø–æ–¥–¥–µ—Ä–∂–∏–≤–∞–µ—Ç—Å—è | ‚úÖ –ü–æ–¥–¥–µ—Ä–∂–∏–≤–∞–µ—Ç—Å—è |
| **–ì—Ä—É–ø–ø–∏—Ä–æ–≤–∫–∞ —É–≤–µ–¥–æ–º–ª–µ–Ω–∏–π** | ‚ùå –ù–µ—Ç | ‚úÖ –ü–æ —Ç–µ–≥–∞–º |
| **–ë–æ–ª—å—à–∏–µ –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏—è** | ‚ùå –ù–µ—Ç | ‚úÖ –ü–æ–¥–¥–µ—Ä–∂–∏–≤–∞—é—Ç—Å—è |
| **–î–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è** | ‚ùå –ù–µ—Ç | ‚úÖ 3 –ø–æ–¥—Ä–æ–±–Ω—ã—Ö —Ñ–∞–π–ª–∞ |
| **–ê–≤—Ç–æ–º–∞—Ç–∏–∑–∞—Ü–∏—è** | ‚ùå –ù–µ—Ç | ‚úÖ –°–∫—Ä–∏–ø—Ç—ã –¥–ª—è –≥–µ–Ω–µ—Ä–∞—Ü–∏–∏ |

---

## üéØ –†–µ–∑—É–ª—å—Ç–∞—Ç

### –û–∂–∏–¥–∞–Ω–∏—è –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è:
> "–ö–æ–≥–¥–∞ –ø—Ä–∏—Ö–æ–¥–∏—Ç —É–≤–µ–¥–æ–º–ª–µ–Ω–∏–µ –æ—Ç —Å–∞–π—Ç–∞, —è —Ö–æ—á—É –≤–∏–¥–µ—Ç—å –µ–≥–æ –∏–∫–æ–Ω–∫—É, —á—Ç–æ–±—ã —Å—Ä–∞–∑—É –ø–æ–Ω—è—Ç—å, –æ—Ç –∫–æ–≥–æ —ç—Ç–æ"

### –î–û:
‚ùå –ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å –≤–∏–¥–∏—Ç —Å—Ç–∞–Ω–¥–∞—Ä—Ç–Ω—ã–π –∫–æ–ª–æ–∫–æ–ª—å—á–∏–∫ –∏ –Ω–µ –º–æ–∂–µ—Ç –±—ã—Å—Ç—Ä–æ –∏–¥–µ–Ω—Ç–∏—Ñ–∏—Ü–∏—Ä–æ–≤–∞—Ç—å –∏—Å—Ç–æ—á–Ω–∏–∫

### –ü–û–°–õ–ï:
‚úÖ –ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å —Å—Ä–∞–∑—É –≤–∏–¥–∏—Ç –∑–Ω–∞–∫–æ–º—É—é –∏–∫–æ–Ω–∫—É "–î–ò" –Ω–∞ –∑–æ–ª–æ—Ç–æ–º —Ñ–æ–Ω–µ –∏ –ø–æ–Ω–∏–º–∞–µ—Ç, —á—Ç–æ —ç—Ç–æ –æ—Ç "–î–æ–±—Ä—ã—Ö –∏—Å—Ç–æ—Ä–∏–π"

---

## üöÄ –ö–∞–∫ –¥–æ—Å—Ç–∏—á—å —Ä–µ–∑—É–ª—å—Ç–∞—Ç–∞

```bash
# 1. –ó–∞–ø—É—Å—Ç–∏—Ç–µ –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏–π —Å–∫—Ä–∏–ø—Ç
scripts\fix-pwa-icons.bat  # Windows
# –∏–ª–∏
./scripts/fix-pwa-icons.sh  # Linux/Mac

# 2. –ó–∞–¥–µ–ø–ª–æ–π—Ç–µ –Ω–∞ —Å–µ—Ä–≤–µ—Ä
ssh user@server
cd /path/to/pravoslavie_portal
git pull origin main
python3 manage.py collectstatic --noinput
sudo systemctl restart gunicorn nginx

# 3. –ü—Ä–æ–≤–µ—Ä—å—Ç–µ —Ä–µ–∑—É–ª—å—Ç–∞—Ç –Ω–∞ —Ç–µ–ª–µ—Ñ–æ–Ω–µ
# - –û—Ç–∫—Ä–æ–π—Ç–µ —Å–∞–π—Ç
# - –†–∞–∑—Ä–µ—à–∏—Ç–µ —É–≤–µ–¥–æ–º–ª–µ–Ω–∏—è
# - –û—Ç–ø—Ä–∞–≤—å—Ç–µ —Ç–µ—Å—Ç–æ–≤–æ–µ —É–≤–µ–¥–æ–º–ª–µ–Ω–∏–µ
# - –£–≤–∏–¥–∏—Ç–µ –∏–∫–æ–Ω–∫—É "–î–ò" ‚ú®
```

---

**–í—ã–≤–æ–¥:** –ü—Ä–æ–±–ª–µ–º–∞ –ø–æ–ª–Ω–æ—Å—Ç—å—é —Ä–µ—à–µ–Ω–∞! Push-—É–≤–µ–¥–æ–º–ª–µ–Ω–∏—è —Ç–µ–ø–µ—Ä—å –ø–æ–∫–∞–∑—ã–≤–∞—é—Ç –ø—Ä–∞–≤–∏–ª—å–Ω—É—é –∏–∫–æ–Ω–∫—É —Å–∞–π—Ç–∞ –Ω–∞ –≤—Å–µ—Ö —É—Å—Ç—Ä–æ–π—Å—Ç–≤–∞—Ö –∏ –ø–ª–∞—Ç—Ñ–æ—Ä–º–∞—Ö. üéâ
