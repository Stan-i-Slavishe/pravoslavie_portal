# üõ†Ô∏è –†–ï–®–ï–ù–ò–ï –ü–†–û–ë–õ–ï–ú–´ –° –ë–ï–°–ü–õ–ê–¢–ù–´–ú–ò –¢–û–í–ê–†–ê–ú–ò –í –ú–ê–ì–ê–ó–ò–ù–ï

## üéØ –ü—Ä–æ–±–ª–µ–º–∞
–ü–æ—Å–ª–µ –∏–∑–º–µ–Ω–µ–Ω–∏—è –∫–æ–¥–∞ –±–µ—Å–ø–ª–∞—Ç–Ω–∞—è –∫–Ω–∏–≥–∞ "–Ø–Ω–¥–µ–∫—Å –¥–∏—Ä–µ–∫—Ç" –≤—Å–µ –µ—â–µ –æ—Ç–æ–±—Ä–∞–∂–∞–µ—Ç—Å—è –≤ –º–∞–≥–∞–∑–∏–Ω–µ, –Ω–µ—Å–º–æ—Ç—Ä—è –Ω–∞ –¥–æ–±–∞–≤–ª–µ–Ω–Ω—ã–π —Ñ–∏–ª—å—Ç—Ä `price__gt=0`.

## üîç –ü—Ä–∏—á–∏–Ω–∞
–í –±–∞–∑–µ –¥–∞–Ω–Ω—ã—Ö —É–∂–µ —Å—É—â–µ—Å—Ç–≤—É—é—Ç —Ç–æ–≤–∞—Ä—ã —Å `price=0`, –∫–æ—Ç–æ—Ä—ã–µ –±—ã–ª–∏ —Å–æ–∑–¥–∞–Ω—ã —Ä–∞–Ω–µ–µ. –ò–∑–º–µ–Ω–µ–Ω–∏–µ —Ñ–∏–ª—å—Ç—Ä–∞ –≤ –∫–æ–¥–µ –Ω–µ —É–¥–∞–ª—è–µ—Ç —Å—É—â–µ—Å—Ç–≤—É—é—â–∏–µ –∑–∞–ø–∏—Å–∏ –∏–∑ –ë–î.

## ‚úÖ –†–µ—à–µ–Ω–∏—è

### –†–µ—à–µ–Ω–∏–µ 1: Django Management –∫–æ–º–∞–Ω–¥–∞ (—Ä–µ–∫–æ–º–µ–Ω–¥—É–µ—Ç—Å—è)
```bash
python manage.py clean_free_products
```

### –†–µ—à–µ–Ω–∏–µ 2: –ë–∞—Ç–Ω–∏–∫ –¥–ª—è Windows
```bash
clean_free_products.bat
```

### –†–µ—à–µ–Ω–∏–µ 3: Python —Å–∫—Ä–∏–ø—Ç
```bash
python clean_free_products.py
```

### –†–µ—à–µ–Ω–∏–µ 4: –†—É—á–Ω–∞—è –æ—á–∏—Å—Ç–∫–∞ —á–µ—Ä–µ–∑ Django shell
```bash
python manage.py shell
```

–ó–∞—Ç–µ–º –≤ shell:
```python
from shop.models import Product

# –ü–æ–∫–∞–∑–∞—Ç—å –≤—Å–µ –±–µ—Å–ø–ª–∞—Ç–Ω—ã–µ —Ç–æ–≤–∞—Ä—ã
free_products = Product.objects.filter(price=0)
print(f"–ù–∞–π–¥–µ–Ω–æ –±–µ—Å–ø–ª–∞—Ç–Ω—ã—Ö —Ç–æ–≤–∞—Ä–æ–≤: {free_products.count()}")
for p in free_products:
    print(f"- {p.title}: {p.price}‚ÇΩ")

# –î–µ–∞–∫—Ç–∏–≤–∏—Ä–æ–≤–∞—Ç—å –±–µ—Å–ø–ª–∞—Ç–Ω—ã–µ —Ç–æ–≤–∞—Ä—ã
free_products.update(is_active=False)

# –ò–ª–∏ –ø–æ–ª–Ω–æ—Å—Ç—å—é —É–¥–∞–ª–∏—Ç—å
# free_products.delete()

# –ü—Ä–æ–≤–µ—Ä–∏—Ç—å —Ä–µ–∑—É–ª—å—Ç–∞—Ç
remaining = Product.objects.filter(is_active=True, price=0)
print(f"–û—Å—Ç–∞–ª–æ—Å—å –∞–∫—Ç–∏–≤–Ω—ã—Ö –±–µ—Å–ø–ª–∞—Ç–Ω—ã—Ö —Ç–æ–≤–∞—Ä–æ–≤: {remaining.count()}")
```

### –†–µ—à–µ–Ω–∏–µ 5: SQL –∑–∞–ø—Ä–æ—Å (–¥–ª—è –ø—Ä–æ–¥–≤–∏–Ω—É—Ç—ã—Ö)
```sql
-- –î–µ–∞–∫—Ç–∏–≤–∏—Ä–æ–≤–∞—Ç—å –±–µ—Å–ø–ª–∞—Ç–Ω—ã–µ —Ç–æ–≤–∞—Ä—ã
UPDATE shop_product SET is_active = FALSE WHERE price = 0;

-- –ò–ª–∏ —É–¥–∞–ª–∏—Ç—å –ø–æ–ª–Ω–æ—Å—Ç—å—é
-- DELETE FROM shop_product WHERE price = 0;
```

## üöÄ –†–µ–∫–æ–º–µ–Ω–¥—É–µ–º—ã–µ —à–∞–≥–∏

### 1. –ó–∞–ø—É—Å—Ç–∏—Ç–µ –∫–æ–º–∞–Ω–¥—É –æ—á–∏—Å—Ç–∫–∏:
```bash
python manage.py clean_free_products
```

### 2. –ü–µ—Ä–µ–∑–∞–ø—É—Å—Ç–∏—Ç–µ —Å–µ—Ä–≤–µ—Ä:
```bash
python manage.py runserver
```

### 3. –ü—Ä–æ–≤–µ—Ä—å—Ç–µ –º–∞–≥–∞–∑–∏–Ω:
- –û—Ç–∫—Ä–æ–π—Ç–µ `http://127.0.0.1:8000/shop/`
- –£–±–µ–¥–∏—Ç–µ—Å—å, —á—Ç–æ –±–µ—Å–ø–ª–∞—Ç–Ω—ã—Ö —Ç–æ–≤–∞—Ä–æ–≤ –Ω–µ—Ç

### 4. –ü—Ä–æ–≤–µ—Ä—å—Ç–µ –±–∏–±–ª–∏–æ—Ç–µ–∫—É:
- –û—Ç–∫—Ä–æ–π—Ç–µ `http://127.0.0.1:8000/books/`  
- –£–±–µ–¥–∏—Ç–µ—Å—å, —á—Ç–æ –±–µ—Å–ø–ª–∞—Ç–Ω—ã–µ –∫–Ω–∏–≥–∏ –¥–æ—Å—Ç—É–ø–Ω—ã

## üìä –ß—Ç–æ –¥–µ–ª–∞—é—Ç –∫–æ–º–∞–Ω–¥—ã –æ—á–∏—Å—Ç–∫–∏

### üîç –ê–Ω–∞–ª–∏–∑:
- –ù–∞—Ö–æ–¥—è—Ç –≤—Å–µ —Ç–æ–≤–∞—Ä—ã —Å `price = 0`
- –ü–æ–∫–∞–∑—ã–≤–∞—é—Ç —Å–ø–∏—Å–æ–∫ –¥–ª—è –ø—Ä–æ–≤–µ—Ä–∫–∏
- –°—á–∏—Ç–∞—é—Ç –∫–æ–ª–∏—á–µ—Å—Ç–≤–æ

### üõ†Ô∏è –î–µ–π—Å—Ç–≤–∏—è:
- **–ü–æ —É–º–æ–ª—á–∞–Ω–∏—é:** –¥–µ–∞–∫—Ç–∏–≤–∏—Ä—É—é—Ç (`is_active = False`)
- **–° —Ñ–ª–∞–≥–æ–º --delete:** –ø–æ–ª–Ω–æ—Å—Ç—å—é —É–¥–∞–ª—è—é—Ç –∏–∑ –ë–î

### üìà –°—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞:
- –ü–æ–∫–∞–∑—ã–≤–∞—é—Ç –∏—Ç–æ–≥–æ–≤–æ–µ –∫–æ–ª–∏—á–µ—Å—Ç–≤–æ —Ç–æ–≤–∞—Ä–æ–≤
- –í—ã–≤–æ–¥—è—Ç —Å–ø–∏—Å–æ–∫ –∞–∫—Ç–∏–≤–Ω—ã—Ö –ø–ª–∞—Ç–Ω—ã—Ö —Ç–æ–≤–∞—Ä–æ–≤

## üîß –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∞—è —Å–∏–Ω—Ö—Ä–æ–Ω–∏–∑–∞—Ü–∏—è

### –°–∏–≥–Ω–∞–ª—ã —É–∂–µ –Ω–∞—Å—Ç—Ä–æ–µ–Ω—ã:
–í `shop/signals.py` –µ—Å—Ç—å –ª–æ–≥–∏–∫–∞, –∫–æ—Ç–æ—Ä–∞—è:
- ‚úÖ –°–æ–∑–¥–∞–µ—Ç —Ç–æ–≤–∞—Ä—ã —Ç–æ–ª—å–∫–æ –¥–ª—è –ø–ª–∞—Ç–Ω—ã—Ö –∫–Ω–∏–≥ (`price > 0`)
- ‚úÖ –î–µ–∞–∫—Ç–∏–≤–∏—Ä—É–µ—Ç —Ç–æ–≤–∞—Ä—ã, –µ—Å–ª–∏ –∫–Ω–∏–≥–∞ —Å—Ç–∞–Ω–æ–≤–∏—Ç—Å—è –±–µ—Å–ø–ª–∞—Ç–Ω–æ–π
- ‚úÖ –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ —Å–∏–Ω—Ö—Ä–æ–Ω–∏–∑–∏—Ä—É–µ—Ç –ø—Ä–∏ –∏–∑–º–µ–Ω–µ–Ω–∏—è—Ö

### –ë—É–¥—É—â–∏–µ –∫–Ω–∏–≥–∏:
–ù–æ–≤—ã–µ –±–µ—Å–ø–ª–∞—Ç–Ω—ã–µ –∫–Ω–∏–≥–∏ –ù–ï –±—É–¥—É—Ç –ø–æ–ø–∞–¥–∞—Ç—å –≤ –º–∞–≥–∞–∑–∏–Ω –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏.

## üéØ –ü—Ä–æ–≤–µ—Ä–æ—á–Ω—ã–π —á–µ–∫-–ª–∏—Å—Ç

### –ü–æ—Å–ª–µ –æ—á–∏—Å—Ç–∫–∏ —É–±–µ–¥–∏—Ç–µ—Å—å:
- [ ] –í –º–∞–≥–∞–∑–∏–Ω–µ –Ω–µ—Ç —Ç–æ–≤–∞—Ä–æ–≤ —Å —Ü–µ–Ω–æ–π 0‚ÇΩ
- [ ] –í—Å–µ —Ç–æ–≤–∞—Ä—ã –≤ –º–∞–≥–∞–∑–∏–Ω–µ –ø–ª–∞—Ç–Ω—ã–µ
- [ ] –ë–µ—Å–ø–ª–∞—Ç–Ω—ã–µ –∫–Ω–∏–≥–∏ –¥–æ—Å—Ç—É–ø–Ω—ã –≤ –±–∏–±–ª–∏–æ—Ç–µ–∫–µ
- [ ] –§–∏–ª—å—Ç—Ä—ã –≤ –º–∞–≥–∞–∑–∏–Ω–µ —Ä–∞–±–æ—Ç–∞—é—Ç –∫–æ—Ä—Ä–µ–∫—Ç–Ω–æ
- [ ] –ü–æ–∏—Å–∫ –Ω–∞—Ö–æ–¥–∏—Ç —Ç–æ–ª—å–∫–æ –ø–ª–∞—Ç–Ω—ã–µ —Ç–æ–≤–∞—Ä—ã

## üîÑ –ï—Å–ª–∏ –ø—Ä–æ–±–ª–µ–º–∞ –ø–æ–≤—Ç–æ—Ä–∏—Ç—Å—è

### –ü—Ä–∏—á–∏–Ω—ã:
1. **–ö–µ—à–∏—Ä–æ–≤–∞–Ω–∏–µ Django** - –ø–µ—Ä–µ–∑–∞–ø—É—Å—Ç–∏—Ç–µ —Å–µ—Ä–≤–µ—Ä
2. **–ö–µ—à–∏—Ä–æ–≤–∞–Ω–∏–µ –±—Ä–∞—É–∑–µ—Ä–∞** - –æ–±–Ω–æ–≤–∏—Ç–µ —Å—Ç—Ä–∞–Ω–∏—Ü—É (Ctrl+F5)  
3. **–ù–æ–≤—ã–µ –±–µ—Å–ø–ª–∞—Ç–Ω—ã–µ —Ç–æ–≤–∞—Ä—ã** - –∑–∞–ø—É—Å—Ç–∏—Ç–µ –æ—á–∏—Å—Ç–∫—É –ø–æ–≤—Ç–æ—Ä–Ω–æ

### –î–∏–∞–≥–Ω–æ—Å—Ç–∏–∫–∞:
```python
# –í Django shell
from shop.models import Product
Product.objects.filter(is_active=True).values('title', 'price')
```

## üìù –î–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω—ã–µ –∫–æ–º–∞–Ω–¥—ã

### –ü–æ–∫–∞–∑–∞—Ç—å –≤—Å–µ —Ç–æ–≤–∞—Ä—ã:
```bash
python manage.py shell -c "
from shop.models import Product
for p in Product.objects.all():
    print(f'{p.title}: {p.price}‚ÇΩ (–∞–∫—Ç–∏–≤–µ–Ω: {p.is_active})')
"
```

### –°—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞ —Ç–æ–≤–∞—Ä–æ–≤:
```bash
python manage.py shell -c "
from shop.models import Product
from django.db.models import Count
stats = Product.objects.aggregate(
    total=Count('id'),
    active=Count('id', filter=models.Q(is_active=True)),
    paid=Count('id', filter=models.Q(is_active=True, price__gt=0)),
    free=Count('id', filter=models.Q(is_active=True, price=0))
)
print('–°—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞ —Ç–æ–≤–∞—Ä–æ–≤:', stats)
"
```

---

## üéâ –ó–∞–∫–ª—é—á–µ–Ω–∏–µ

**–ü–æ—Å–ª–µ –≤—ã–ø–æ–ª–Ω–µ–Ω–∏—è –ª—é–±–æ–≥–æ –∏–∑ —Ä–µ—à–µ–Ω–∏–π –±–µ—Å–ø–ª–∞—Ç–Ω—ã–µ —Ç–æ–≤–∞—Ä—ã –∏—Å—á–µ–∑–Ω—É—Ç –∏–∑ –º–∞–≥–∞–∑–∏–Ω–∞, –Ω–æ –æ—Å—Ç–∞–Ω—É—Ç—Å—è –¥–æ—Å—Ç—É–ø–Ω—ã–º–∏ –≤ —Å–æ–æ—Ç–≤–µ—Ç—Å—Ç–≤—É—é—â–∏—Ö —Ä–∞–∑–¥–µ–ª–∞—Ö (–±–∏–±–ª–∏–æ—Ç–µ–∫–∞, —Å–∫–∞–∑–∫–∏, –∞—É–¥–∏–æ).**

**–í—ã–±–µ—Ä–∏—Ç–µ –Ω–∞–∏–±–æ–ª–µ–µ —É–¥–æ–±–Ω—ã–π —Å–ø–æ—Å–æ–± –∏ –≤—ã–ø–æ–ª–Ω–∏—Ç–µ –æ—á–∏—Å—Ç–∫—É!** üßπ‚ú®