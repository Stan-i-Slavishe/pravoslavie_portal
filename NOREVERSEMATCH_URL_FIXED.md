# üîó –ò–°–ü–†–ê–í–õ–ï–ù–ê –û–®–ò–ë–ö–ê NOREVERSEMATCH URL ‚úÖ

## üîç –î–∏–∞–≥–Ω–æ—Å—Ç–∏–∫–∞ –æ—à–∏–±–∫–∏:

### ‚ùå **–û–®–ò–ë–ö–ê:**
```
NoReverseMatch at /books/book/velikaya-kniga/
Reverse for 'products' not found. 'products' is not a valid view function or pattern name.
```

### üïµÔ∏è **–ü–†–ò–ß–ò–ù–ê:**
–í —à–∞–±–ª–æ–Ω–µ `book_detail.html` –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–ª–æ—Å—å –Ω–µ—Å—É—â–µ—Å—Ç–≤—É—é—â–µ–µ –∏–º—è URL `'shop:products'`, –Ω–æ –≤ —Ñ–∞–π–ª–µ `shop/urls.py` —ç—Ç–æ–≥–æ URL –Ω–µ—Ç.

## üîß –ò—Å–ø—Ä–∞–≤–ª–µ–Ω–∏–µ:

### **–ü—Ä–æ–±–ª–µ–º–Ω–∞—è —Å—Ç—Ä–æ–∫–∞ –≤ —à–∞–±–ª–æ–Ω–µ (—Å—Ç—Ä–æ–∫–∞ 270):**
```html
<!-- –î–û (–û–®–ò–ë–ö–ê): -->
<a href="{% url 'shop:products' %}?book={{ book.id }}" class="btn-purchase">
    <i class="bi bi-cart-plus"></i>
    –ö—É–ø–∏—Ç—å –∑–∞ {{ book.price }} ‚ÇΩ
</a>

<!-- –ü–û–°–õ–ï (–ò–°–ü–†–ê–í–õ–ï–ù–û): -->
<a href="{% url 'shop:catalog' %}?book={{ book.id }}" class="btn-purchase">
    <i class="bi bi-cart-plus"></i>
    –ö—É–ø–∏—Ç—å –∑–∞ {{ book.price }} ‚ÇΩ
</a>
```

## üìã **–ê–ù–ê–õ–ò–ó SHOP URLS:**

### **–§–∞–π–ª `shop/urls.py` —Å–æ–¥–µ—Ä–∂–∏—Ç:**
```python
urlpatterns = [
    # –ö–∞—Ç–∞–ª–æ–≥ –∏ —Ç–æ–≤–∞—Ä—ã
    path('', views.product_list_view, name='catalog'),          ‚úÖ –ü–†–ê–í–ò–õ–¨–ù–û–ï –ò–ú–Ø
    path('product/<int:product_id>/', views.product_detail_view, name='product_detail'),
    
    # –ö–æ—Ä–∑–∏–Ω–∞
    path('cart/', views.cart_view, name='cart'),
    path('add-to-cart/', views.add_to_cart, name='add_to_cart'),
    # ... –æ—Å—Ç–∞–ª—å–Ω—ã–µ URL
]
```

### **–ù–µ—Ç URL —Å –∏–º–µ–Ω–µ–º `'products'`!**
- ‚ùå `'products'` - –ù–ï –°–£–©–ï–°–¢–í–£–ï–¢
- ‚úÖ `'catalog'` - –ü–†–ê–í–ò–õ–¨–ù–û–ï –ò–ú–Ø –¥–ª—è –∫–∞—Ç–∞–ª–æ–≥–∞ —Ç–æ–≤–∞—Ä–æ–≤

## üéØ **–§–£–ù–ö–¶–ò–û–ù–ê–õ–¨–ù–û–°–¢–¨:**

### **–ö–Ω–æ–ø–∫–∞ "–ö—É–ø–∏—Ç—å –∑–∞ {—Ü–µ–Ω–∞} ‚ÇΩ":**
```html
<a href="{% url 'shop:catalog' %}?book={{ book.id }}" class="btn-purchase">
```

### **–õ–æ–≥–∏–∫–∞ —Ä–∞–±–æ—Ç—ã:**
1. **–ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å –Ω–µ –∞–≤—Ç–æ—Ä–∏–∑–æ–≤–∞–Ω** –ò–õ–ò **–∫–Ω–∏–≥–∞ –ø–ª–∞—Ç–Ω–∞—è –∏ –Ω–µ –∫—É–ø–ª–µ–Ω–∞**
2. **–ü–æ–∫–∞–∑—ã–≤–∞–µ—Ç—Å—è –∫–Ω–æ–ø–∫–∞ "–ö—É–ø–∏—Ç—å"**
3. **–ö–ª–∏–∫ –ø–æ –∫–Ω–æ–ø–∫–µ** ‚Üí –ü–µ—Ä–µ—Ö–æ–¥ –≤ –∫–∞—Ç–∞–ª–æ–≥ –º–∞–≥–∞–∑–∏–Ω–∞ —Å –ø–∞—Ä–∞–º–µ—Ç—Ä–æ–º `?book=ID`
4. **–í –∫–∞—Ç–∞–ª–æ–≥–µ** –º–æ–∂–Ω–æ –Ω–∞–π—Ç–∏ –∏ –∫—É–ø–∏—Ç—å –∫–Ω–∏–≥—É

## üìä **–ü–†–ê–í–ò–õ–¨–ù–´–ï URL SHOP –ü–†–ò–õ–û–ñ–ï–ù–ò–Ø:**

| –ò–º—è URL | –ü—É—Ç—å | –û–ø–∏—Å–∞–Ω–∏–µ |
|---------|------|----------|
| `shop:catalog` | `/shop/` | –ö–∞—Ç–∞–ª–æ–≥ —Ç–æ–≤–∞—Ä–æ–≤ ‚úÖ |
| `shop:cart` | `/shop/cart/` | –ö–æ—Ä–∑–∏–Ω–∞ |
| `shop:checkout` | `/shop/checkout/` | –û—Ñ–æ—Ä–º–ª–µ–Ω–∏–µ –∑–∞–∫–∞–∑–∞ |
| `shop:my_orders` | `/shop/my-orders/` | –ú–æ–∏ –∑–∞–∫–∞–∑—ã |
| `shop:my_purchases` | `/shop/my-purchases/` | –ú–æ–∏ –ø–æ–∫—É–ø–∫–∏ |
| `shop:product_detail` | `/shop/product/<id>/` | –î–µ—Ç–∞–ª–∏ —Ç–æ–≤–∞—Ä–∞ |

## üîÑ **–°–í–Ø–ó–¨ –ú–ï–ñ–î–£ –ö–ù–ò–ì–ê–ú–ò –ò –ú–ê–ì–ê–ó–ò–ù–û–ú:**

### **–õ–æ–≥–∏–∫–∞ –∏–Ω—Ç–µ–≥—Ä–∞—Ü–∏–∏:**
```
–ö–Ω–∏–≥–∞ (books app) ‚Üê‚Üí –¢–æ–≤–∞—Ä (shop app)
‚Üì
book.id –ø–µ—Ä–µ–¥–∞–µ—Ç—Å—è –∫–∞–∫ –ø–∞—Ä–∞–º–µ—Ç—Ä ?book={{ book.id }}
‚Üì 
–í –∫–∞—Ç–∞–ª–æ–≥–µ —Ñ–∏–ª—å—Ç—Ä—É–µ—Ç—Å—è —Ç–æ–≤–∞—Ä —Å–≤—è–∑–∞–Ω–Ω—ã–π —Å –∫–Ω–∏–≥–æ–π
```

### **–ü—Ä–æ–≤–µ—Ä–∫–∞ –ø—Ä–∞–≤ –¥–æ—Å—Ç—É–ø–∞ –≤ views.py:**
```python
# –ü—Ä–∞–≤–∏–ª—å–Ω—ã–π –∑–∞–ø—Ä–æ—Å (—É–∂–µ –∏—Å–ø—Ä–∞–≤–ª–µ–Ω):
user_can_read = Purchase.objects.filter(
    user=request.user,
    product__title__icontains=book.title  ‚úÖ
).exists()
```

## üéâ **–†–ï–ó–£–õ–¨–¢–ê–¢:**

### ‚úÖ **–ß–¢–û –¢–ï–ü–ï–†–¨ –†–ê–ë–û–¢–ê–ï–¢:**
1. **–°—Ç—Ä–∞–Ω–∏—Ü—ã –∫–Ω–∏–≥ –∑–∞–≥—Ä—É–∂–∞—é—Ç—Å—è** –±–µ–∑ –æ—à–∏–±–æ–∫
2. **–ö–Ω–æ–ø–∫–∞ "–ö—É–ø–∏—Ç—å"** –≤–µ–¥–µ—Ç –≤ –ø—Ä–∞–≤–∏–ª—å–Ω—ã–π –∫–∞—Ç–∞–ª–æ–≥
3. **–ò–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è –∫–Ω–∏–≥ —Å –º–∞–≥–∞–∑–∏–Ω–æ–º** —Ñ—É–Ω–∫—Ü–∏–æ–Ω–∏—Ä—É–µ—Ç
4. **URL routing** —Ä–∞–±–æ—Ç–∞–µ—Ç –∫–æ—Ä—Ä–µ–∫—Ç–Ω–æ

### üîó **–ü—Ä–∞–≤–∏–ª—å–Ω—ã–π URL –≥–µ–Ω–µ—Ä–∏—Ä—É–µ—Ç—Å—è:**
```
/shop/?book=2  ‚Üê –ö–∞—Ç–∞–ª–æ–≥ —Å —Ñ–∏–ª—å—Ç—Ä–æ–º –ø–æ –∫–Ω–∏–≥–µ ID=2
```

## üõ°Ô∏è **–ë–ï–ó–û–ü–ê–°–ù–û–°–¢–¨:**
–ò—Å–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –Ω–µ –≤–ª–∏—è–µ—Ç –Ω–∞ –±–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç—å - –ø—Ä–æ—Å—Ç–æ –∏—Å–ø—Ä–∞–≤–ª–µ–Ω –Ω–µ–≤–µ—Ä–Ω—ã–π URL –≤ —à–∞–±–ª–æ–Ω–µ.

---

**–§–∞–π–ª –∏–∑–º–µ–Ω–µ–Ω:** `templates/books/book_detail.html`  
**–î–∞—Ç–∞:** 31.07.2025  
**–°—Ç–∞—Ç—É—Å:** ‚úÖ –ì–û–¢–û–í–û  
**–ò—Å–ø—Ä–∞–≤–ª–µ–Ω–∏–µ:** NoReverseMatch —É—Å—Ç—Ä–∞–Ω–µ–Ω–∞ (products ‚Üí catalog)
