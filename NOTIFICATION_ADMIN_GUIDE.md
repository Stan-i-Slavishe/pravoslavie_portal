# –°–∏—Å—Ç–µ–º–∞ —É–ø—Ä–∞–≤–ª–µ–Ω–∏—è —É–≤–µ–¥–æ–º–ª–µ–Ω–∏—è–º–∏ —á–µ—Ä–µ–∑ –∞–¥–º–∏–Ω–∫—É

## –û–ø–∏—Å–∞–Ω–∏–µ
–¢–µ–ø–µ—Ä—å –≤—ã –º–æ–∂–µ—Ç–µ –∫–æ–Ω—Ç—Ä–æ–ª–∏—Ä–æ–≤–∞—Ç—å, –∫–∞–∫–∏–µ —Ç–∏–ø—ã —É–≤–µ–¥–æ–º–ª–µ–Ω–∏–π –¥–æ—Å—Ç—É–ø–Ω—ã –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è–º, –ø—Ä—è–º–æ –∏–∑ Django Admin –ø–∞–Ω–µ–ª–∏. –≠—Ç–æ –ø–æ–∑–≤–æ–ª—è–µ—Ç –æ—Ç–∫–ª—é—á–∞—Ç—å —Ñ—É–Ω–∫—Ü–∏–∏, –∫–æ—Ç–æ—Ä—ã–µ –µ—â–µ –Ω–µ –≥–æ—Ç–æ–≤—ã, –∏ –ø–æ—Å—Ç–µ–ø–µ–Ω–Ω–æ –∞–∫—Ç–∏–≤–∏—Ä–æ–≤–∞—Ç—å –∏—Ö –ø–æ –º–µ—Ä–µ –∑–∞–≤–µ—Ä—à–µ–Ω–∏—è —Ä–∞–∑—Ä–∞–±–æ—Ç–∫–∏.

## –ö–∞–∫ —ç—Ç–æ —Ä–∞–±–æ—Ç–∞–µ—Ç

### 1. –ù–∞—Å—Ç—Ä–æ–π–∫–∞ –∫–∞—Ç–µ–≥–æ—Ä–∏–π —á–µ—Ä–µ–∑ –∞–¥–º–∏–Ω–∫—É

1. –ü–µ—Ä–µ–π–¥–∏—Ç–µ –≤ Django Admin: `/admin/pwa/notificationcategory/`
2. –í—ã —É–≤–∏–¥–∏—Ç–µ —Å–ø–∏—Å–æ–∫ –≤—Å–µ—Ö –∫–∞—Ç–µ–≥–æ—Ä–∏–π —É–≤–µ–¥–æ–º–ª–µ–Ω–∏–π
3. –î–ª—è –∫–∞–∂–¥–æ–π –∫–∞—Ç–µ–≥–æ—Ä–∏–∏ –µ—Å—Ç—å —Ñ–ª–∞–∂–æ–∫ "–ê–∫—Ç–∏–≤–Ω–∞" (`is_active`)
4. **–ê–ö–¢–ò–í–ù–´–ï** –∫–∞—Ç–µ–≥–æ—Ä–∏–∏ –æ—Ç–æ–±—Ä–∞–∂–∞—é—Ç—Å—è –Ω–∞ —Å—Ç—Ä–∞–Ω–∏—Ü–µ –Ω–∞—Å—Ç—Ä–æ–µ–∫ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è
5. **–ù–ï–ê–ö–¢–ò–í–ù–´–ï** –∫–∞—Ç–µ–≥–æ—Ä–∏–∏ —Å–∫—Ä—ã—Ç—ã –æ—Ç –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π

### 2. –°–æ–∑–¥–∞–Ω–∏–µ –±–∞–∑–æ–≤—ã—Ö –∫–∞—Ç–µ–≥–æ—Ä–∏–π

–í—ã–ø–æ–ª–Ω–∏—Ç–µ –∫–æ–º–∞–Ω–¥—É –¥–ª—è —Å–æ–∑–¥–∞–Ω–∏—è —Å—Ç–∞–Ω–¥–∞—Ä—Ç–Ω—ã—Ö –∫–∞—Ç–µ–≥–æ—Ä–∏–π:

```bash
python manage.py setup_notification_categories
```

–≠—Ç–æ —Å–æ–∑–¥–∞—Å—Ç —Å–ª–µ–¥—É—é—â–∏–µ –∫–∞—Ç–µ–≥–æ—Ä–∏–∏:

- ‚õ™ **–ü—Ä–∞–≤–æ—Å–ª–∞–≤–Ω—ã–π –∫–∞–ª–µ–Ω–¥–∞—Ä—å** (–ê–ö–¢–ò–í–ù–ê)
- üé¨ **–ù–æ–≤—ã–π –∫–æ–Ω—Ç–µ–Ω—Ç** (–ê–ö–¢–ò–í–ù–ê) 
- üßö **–¢–µ—Ä–∞–ø–µ–≤—Ç–∏—á–µ—Å–∫–∏–µ —Å–∫–∞–∑–∫–∏** (–ê–ö–¢–ò–í–ù–ê)
- üìñ **–ù–æ–≤—ã–µ –∫–Ω–∏–≥–∏** (–ê–ö–¢–ò–í–ù–ê)
- üåô **–°–∫–∞–∑–∫–∏ –Ω–∞ –Ω–æ—á—å** (–û–¢–ö–õ–Æ–ß–ï–ù–ê)
- üéµ **–ê—É–¥–∏–æ-–∫–æ–Ω—Ç–µ–Ω—Ç** (–û–¢–ö–õ–Æ–ß–ï–ù–ê)
- üéâ **–û—Å–æ–±—ã–µ —Å–æ–±—ã—Ç–∏—è** (–û–¢–ö–õ–Æ–ß–ï–ù–ê)
- üí≠ **–ú—É–¥—Ä–æ—Å—Ç—å –¥–Ω—è** (–û–¢–ö–õ–Æ–ß–ï–ù–ê)

### 3. –£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –∞–∫—Ç–∏–≤–Ω–æ—Å—Ç—å—é

**–í –∞–¥–º–∏–Ω–∫–µ (`/admin/pwa/notificationcategory/`):**

- ‚úÖ **–ü–æ—Å—Ç–∞–≤—å—Ç–µ –≥–∞–ª–æ—á–∫—É "–ê–∫—Ç–∏–≤–Ω–∞"** - –∫–∞—Ç–µ–≥–æ—Ä–∏—è –ø–æ—è–≤–∏—Ç—Å—è –Ω–∞ —Å—Ç—Ä–∞–Ω–∏—Ü–µ –Ω–∞—Å—Ç—Ä–æ–µ–∫
- ‚ùå **–£–±–µ—Ä–∏—Ç–µ –≥–∞–ª–æ—á–∫—É "–ê–∫—Ç–∏–≤–Ω–∞"** - –∫–∞—Ç–µ–≥–æ—Ä–∏—è –∏—Å—á–µ–∑–Ω–µ—Ç —Å–æ —Å—Ç—Ä–∞–Ω–∏—Ü—ã –Ω–∞—Å—Ç—Ä–æ–µ–∫

**–î–ª—è –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π:**
- –ê–∫—Ç–∏–≤–Ω—ã–µ –∫–∞—Ç–µ–≥–æ—Ä–∏–∏ –æ—Ç–æ–±—Ä–∞–∂–∞—é—Ç—Å—è –Ω–æ—Ä–º–∞–ª—å–Ω–æ
- –ù–µ–∞–∫—Ç–∏–≤–Ω—ã–µ –∫–∞—Ç–µ–≥–æ—Ä–∏–∏ –ø–æ–ª–Ω–æ—Å—Ç—å—é —Å–∫—Ä—ã—Ç—ã
- –ü—Ä–∏ –ø–æ–ø—ã—Ç–∫–µ –≤–∫–ª—é—á–∏—Ç—å –Ω–µ–∞–∫—Ç–∏–≤–Ω—É—é –∫–∞—Ç–µ–≥–æ—Ä–∏—é –ø–æ–∫–∞–∑—ã–≤–∞–µ—Ç—Å—è –ø—Ä–µ–¥—É–ø—Ä–µ–∂–¥–µ–Ω–∏–µ

## –¢–µ—Ö–Ω–∏—á–µ—Å–∫–∏–µ –¥–µ—Ç–∞–ª–∏

### –§–∞–π–ª—ã —Å–∏—Å—Ç–µ–º—ã

1. **–ú–æ–¥–µ–ª–∏**: `pwa/models.py` - `NotificationCategory`
2. **–ê–¥–º–∏–Ω–∫–∞**: `pwa/admin.py` - `NotificationCategoryAdmin`
3. **API**: `pwa/views_notification_api.py` - `get_available_notification_categories`
4. **JavaScript**: `static/js/admin-controlled-notifications.js`
5. **–ö–æ–º–∞–Ω–¥–∞**: `pwa/management/commands/setup_notification_categories.py`

### API endpoints

- `GET /pwa/api/notification-categories/` - –ø–æ–ª—É—á–∏—Ç—å –∞–∫—Ç–∏–≤–Ω—ã–µ –∫–∞—Ç–µ–≥–æ—Ä–∏–∏
- `GET /pwa/api/get-notification-settings/` - –Ω–∞—Å—Ç—Ä–æ–π–∫–∏ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è
- `POST /pwa/api/save-notification-settings/` - —Å–æ—Ö—Ä–∞–Ω–∏—Ç—å –Ω–∞—Å—Ç—Ä–æ–π–∫–∏

### JavaScript –∏–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è

```javascript
// –ü—Ä–æ–≤–µ—Ä–∫–∞ –∞–∫—Ç–∏–≤–Ω–æ—Å—Ç–∏ –∫–∞—Ç–µ–≥–æ—Ä–∏–∏
if (window.adminNotifications.isCategoryActive('bedtime_stories')) {
    // –û—Ç–ø—Ä–∞–≤–∏—Ç—å —É–≤–µ–¥–æ–º–ª–µ–Ω–∏–µ
} else {
    console.warn('–ö–∞—Ç–µ–≥–æ—Ä–∏—è –æ—Ç–∫–ª—é—á–µ–Ω–∞ –∞–¥–º–∏–Ω–∏—Å—Ç—Ä–∞—Ç–æ—Ä–æ–º');
}

// –û–±–Ω–æ–≤–ª–µ–Ω–∏–µ —Å–ø–∏—Å–∫–∞ –∞–∫—Ç–∏–≤–Ω—ã—Ö –∫–∞—Ç–µ–≥–æ—Ä–∏–π
window.adminNotifications.refresh();
```

## –ü—Ä–∏–º–µ—Ä –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—è

### –°—Ü–µ–Ω–∞—Ä–∏–π 1: –ì–æ—Ç–æ–≤–∏–º –Ω–æ–≤—É—é —Ñ—É–Ω–∫—Ü–∏—é
1. –ê—É–¥–∏–æ-–∫–æ–Ω—Ç–µ–Ω—Ç –µ—â–µ –≤ —Ä–∞–∑—Ä–∞–±–æ—Ç–∫–µ
2. –í –∞–¥–º–∏–Ω–∫–µ –∫–∞—Ç–µ–≥–æ—Ä–∏—è "–ê—É–¥–∏–æ-–∫–æ–Ω—Ç–µ–Ω—Ç" **–û–¢–ö–õ–Æ–ß–ï–ù–ê**
3. –ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–∏ –Ω–µ –≤–∏–¥—è—Ç —ç—Ç—É –æ–ø—Ü–∏—é –≤ –Ω–∞—Å—Ç—Ä–æ–π–∫–∞—Ö
4. –ö–æ–≥–¥–∞ —Ñ—É–Ω–∫—Ü–∏—è –≥–æ—Ç–æ–≤–∞ - –≤–∫–ª—é—á–∞–µ–º –≤ –∞–¥–º–∏–Ω–∫–µ
5. –ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–∏ —Å—Ä–∞–∑—É –ø–æ–ª—É—á–∞—é—Ç –¥–æ—Å—Ç—É–ø –∫ –Ω–∞—Å—Ç—Ä–æ–π–∫–µ

### –°—Ü–µ–Ω–∞—Ä–∏–π 2: –í—Ä–µ–º–µ–Ω–Ω–æ–µ –æ—Ç–∫–ª—é—á–µ–Ω–∏–µ
1. –ü—Ä–æ–±–ª–µ–º—ã —Å –ø—Ä–∞–≤–æ—Å–ª–∞–≤–Ω—ã–º –∫–∞–ª–µ–Ω–¥–∞—Ä–µ–º
2. –û—Ç–∫–ª—é—á–∞–µ–º –∫–∞—Ç–µ–≥–æ—Ä–∏—é –≤ –∞–¥–º–∏–Ω–∫–µ
3. –ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–∏ –ø–µ—Ä–µ—Å—Ç–∞—é—Ç –ø–æ–ª—É—á–∞—Ç—å —ç—Ç–∏ —É–≤–µ–¥–æ–º–ª–µ–Ω–∏—è
4. –ò—Å–ø—Ä–∞–≤–ª—è–µ–º –ø—Ä–æ–±–ª–µ–º—É –∏ –≤–∫–ª—é—á–∞–µ–º –æ–±—Ä–∞—Ç–Ω–æ

## –ü—Ä–µ–∏–º—É—â–µ—Å—Ç–≤–∞

1. **–ì–∏–±–∫–æ—Å—Ç—å**: –£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –±–µ–∑ –∏–∑–º–µ–Ω–µ–Ω–∏—è –∫–æ–¥–∞
2. **–ë–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç—å**: –ù–∏–∫–∞–∫–∏—Ö –±–∏—Ç—ã—Ö —Ñ—É–Ω–∫—Ü–∏–π –¥–ª—è –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π  
3. **–ü–æ—Å—Ç–µ–ø–µ–Ω–Ω—ã–π rollout**: –í–∫–ª—é—á–∞–µ–º —Ñ—É–Ω–∫—Ü–∏–∏ –ø–æ –≥–æ—Ç–æ–≤–Ω–æ—Å—Ç–∏
4. **–ü—Ä–æ—Å—Ç–æ—Ç–∞**: –ê–¥–º–∏–Ω—ã –º–æ–≥—É—Ç —É–ø—Ä–∞–≤–ª—è—Ç—å –±–µ–∑ –ø—Ä–æ–≥—Ä–∞–º–º–∏—Å—Ç–æ–≤

## –ö–æ–º–∞–Ω–¥—ã –¥–ª—è —É–ø—Ä–∞–≤–ª–µ–Ω–∏—è

```bash
# –°–æ–∑–¥–∞—Ç—å –±–∞–∑–æ–≤—ã–µ –∫–∞—Ç–µ–≥–æ—Ä–∏–∏
python manage.py setup_notification_categories

# –ü—Ä–æ–≤–µ—Ä–∏—Ç—å —Å—Ç–∞—Ç—É—Å –≤ –±–∞–∑–µ –¥–∞–Ω–Ω—ã—Ö
python manage.py shell
>>> from pwa.models import NotificationCategory
>>> for cat in NotificationCategory.objects.all():
...     print(f"{cat.icon} {cat.title}: {'–ê–ö–¢–ò–í–ù–ê' if cat.is_active else '–û–¢–ö–õ–Æ–ß–ï–ù–ê'}")
```

## –ú–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥

JavaScript –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏:
- –û–±–Ω–æ–≤–ª—è–µ—Ç —Å–ø–∏—Å–æ–∫ –∞–∫—Ç–∏–≤–Ω—ã—Ö –∫–∞—Ç–µ–≥–æ—Ä–∏–π –∫–∞–∂–¥—ã–µ 5 –º–∏–Ω—É—Ç
- –û–±–Ω–æ–≤–ª—è–µ—Ç –ø—Ä–∏ –ø–æ–ª—É—á–µ–Ω–∏–∏ —Ñ–æ–∫—É—Å–∞ —Å—Ç—Ä–∞–Ω–∏—Ü—ã
- –ü–æ–∫–∞–∑—ã–≤–∞–µ—Ç –ø—Ä–µ–¥—É–ø—Ä–µ–∂–¥–µ–Ω–∏—è –ø—Ä–∏ –ø–æ–ø—ã—Ç–∫–µ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å –Ω–µ–∞–∫—Ç–∏–≤–Ω—ã–µ –∫–∞—Ç–µ–≥–æ—Ä–∏–∏

–¢–µ–ø–µ—Ä—å —É –≤–∞—Å –µ—Å—Ç—å –ø–æ–ª–Ω—ã–π –∫–æ–Ω—Ç—Ä–æ–ª—å –Ω–∞–¥ —Ñ—É–Ω–∫—Ü–∏–æ–Ω–∞–ª—å–Ω–æ—Å—Ç—å—é —É–≤–µ–¥–æ–º–ª–µ–Ω–∏–π!
