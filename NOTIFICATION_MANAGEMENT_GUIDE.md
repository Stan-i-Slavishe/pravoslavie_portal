# Управление приветственными уведомлениями

## Проблема решена!

Теперь навязчивые уведомления в правом нижнем углу экрана появляются с умной логикой вместо постоянного показа.

## Как теперь работает система:

### Частота показа (настраивается в base.html):

**Доступные режимы:**
- `session` - один раз за сессию браузера
- `daily` - раз в день  
- `weekly` - раз в неделю (по умолчанию)
- `monthly` - раз в месяц
- `first_visit` - только при первом посещении сайта
- `disabled` - полностью отключить

### Текущие настройки:
```html
data-notification-frequency="weekly"          <!-- Раз в неделю -->
data-notification-enabled="true"              <!-- Включено -->
data-notification-mobile-enabled="true"       <!-- Работает на мобильных -->
data-notification-auto-hide="8"               <!-- Автоскрытие через 8 секунд -->
data-notification-text="Добро пожаловать!"    <!-- Текст уведомления -->
```

## Логика работы:

### 1. Первое посещение
- Показывается приветственное уведомление
- Сохраняется факт посещения в localStorage

### 2. Повторные посещения
- **В той же сессии:** не показывается
- **В новой сессии:** показывается согласно частоте (weekly = раз в неделю)

### 3. Мобильные устройства
- Адаптированный дизайн с вертикальными кнопками
- Можно отключить через `data-notification-mobile-enabled="false"`

### 4. Действия пользователя
- **Кнопка "Настроить":** переход к настройкам уведомлений
- **Кнопка "Позже":** скрыть до конца текущей сессии
- **Крестик:** скрыть до конца текущей сессии
- **Автоскрытие:** через 8 секунд (настраивается)

## Управление настройками:

### Быстрая настройка в templates/base.html:

```html
<!-- Отключить полностью -->
data-notification-frequency="disabled"

<!-- Показывать только новым пользователям -->
data-notification-frequency="first_visit"

<!-- Показывать раз в день -->
data-notification-frequency="daily"

<!-- Отключить на мобильных -->
data-notification-mobile-enabled="false"

<!-- Изменить время автоскрытия (0 = не скрывать автоматически) -->
data-notification-auto-hide="0"
```

### Программное управление через JavaScript:

```javascript
// Принудительно показать (для тестирования)
smartNotifications.forceShow();

// Сбросить все настройки
smartNotifications.reset();

// Изменить настройки на лету
smartNotifications.updateSettings({
    frequency: 'daily',
    text: 'Новый текст уведомления'
});

// Получить статистику
console.log(smartNotifications.getStats());
```

## Преимущества новой системы:

1. **Не раздражает:** показывается разумно часто
2. **Адаптивность:** работает на всех устройствах
3. **Гибкость:** легко настраивается без кода
4. **Память:** запоминает предпочтения пользователя
5. **Аналитика:** можно отслеживать эффективность

## Рекомендуемые настройки:

### Для нового сайта:
```html
data-notification-frequency="first_visit"  <!-- Только новым пользователям -->
```

### Для активно обновляемого сайта:
```html
data-notification-frequency="weekly"       <!-- Раз в неделю о новом контенте -->
```

### Для редко обновляемого сайта:
```html
data-notification-frequency="monthly"      <!-- Раз в месяц -->
```

### Для A/B тестирования:
```html
data-notification-frequency="session"      <!-- Каждая новая сессия -->
```

Теперь пользователи не будут раздражаться постоянными уведомлениями, но при этом будут в курсе возможностей сайта!
