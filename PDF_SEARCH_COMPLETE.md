# –†–µ–∞–ª–∏–∑–∞—Ü–∏—è –ø–æ–ª–Ω–æ—Ü–µ–Ω–Ω–æ–≥–æ –ø–æ–∏—Å–∫–∞ –ø–æ PDF –≤ —Ä–∏–¥–µ—Ä–µ

## –ü—Ä–æ–±–ª–µ–º–∞
–§—É–Ω–∫—Ü–∏—è –ø–æ–∏—Å–∫–∞ –≤ PDF —Ä–∏–¥–µ—Ä–µ –ø–æ–∫–∞–∑—ã–≤–∞–ª–∞ —Ç–æ–ª—å–∫–æ –∑–∞–≥–ª—É—à–∫—É "–§—É–Ω–∫—Ü–∏—è –≤ —Ä–∞–∑—Ä–∞–±–æ—Ç–∫–µ" –∏ –Ω–µ –≤—ã–ø–æ–ª–Ω—è–ª–∞ —Ä–µ–∞–ª—å–Ω—ã–π –ø–æ–∏—Å–∫ –ø–æ —Å–æ–¥–µ—Ä–∂–∏–º–æ–º—É –¥–æ–∫—É–º–µ–Ω—Ç–∞.

## –†–µ—à–µ–Ω–∏–µ
–†–µ–∞–ª–∏–∑–æ–≤–∞–Ω –ø–æ–ª–Ω–æ—Ü–µ–Ω–Ω—ã–π –ø–æ–∏—Å–∫ –ø–æ PDF —Å –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ–º PDF.js Text API.

### –ò–∑–º–µ–Ω–µ–Ω–∏—è –≤ `static/js/modern-reader.js`:

#### 1. –ó–∞–º–µ–Ω–µ–Ω–∞ —Ñ—É–Ω–∫—Ü–∏—è `performSearch()`
```javascript
async performSearch() {
    const query = document.getElementById('search-input').value.trim();
    if (!query) {
        document.getElementById('search-results').textContent = '–í–≤–µ–¥–∏—Ç–µ —Ç–µ–∫—Å—Ç –¥–ª—è –ø–æ–∏—Å–∫–∞';
        return;
    }
    
    const resultsDiv = document.getElementById('search-results');
    // –ü–æ–∫–∞–∑—ã–≤–∞–µ–º –∏–Ω–¥–∏–∫–∞—Ç–æ—Ä –∑–∞–≥—Ä—É–∑–∫–∏
    resultsDiv.innerHTML = '<div style="color: #D4AF37;">üîç –ü–æ–∏—Å–∫ "' + query + '"...</div>';
    
    try {
        const searchResults = await this.searchInPDF(query);
        
        if (searchResults.length === 0) {
            resultsDiv.innerHTML = '‚ùå –ù–∏—á–µ–≥–æ –Ω–µ –Ω–∞–π–¥–µ–Ω–æ –ø–æ –∑–∞–ø—Ä–æ—Å—É "' + query + '"';
            return;
        }
        
        // –û—Ç–æ–±—Ä–∞–∂–∞–µ–º –∫—Ä–∞—Å–∏–≤—ã–µ —Ä–µ–∑—É–ª—å—Ç–∞—Ç—ã —Å –ø–æ–¥—Å–≤–µ—Ç–∫–æ–π
        // ... (–∫–æ–¥ –∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å–∞ —Ä–µ–∑—É–ª—å—Ç–∞—Ç–æ–≤)
        
    } catch (error) {
        resultsDiv.innerHTML = '‚ö†Ô∏è –û—à–∏–±–∫–∞ –ø—Ä–∏ –ø–æ–∏—Å–∫–µ';
    }
}
```

#### 2. –î–æ–±–∞–≤–ª–µ–Ω–∞ —Ñ—É–Ω–∫—Ü–∏—è –ø–æ–∏—Å–∫–∞ –ø–æ PDF
```javascript
async searchInPDF(query) {
    if (!this.pdfDoc) {
        throw new Error('–ü–î–§ –¥–æ–∫—É–º–µ–Ω—Ç –Ω–µ –∑–∞–≥—Ä—É–∂–µ–Ω');
    }
    
    const results = [];
    const searchTerm = query.toLowerCase();
    
    // –ü—Ä–æ—Ö–æ–¥–∏–º –ø–æ –≤—Å–µ–º —Å—Ç—Ä–∞–Ω–∏—Ü–∞–º
    for (let pageNum = 1; pageNum <= this.totalPages; pageNum++) {
        const page = await this.pdfDoc.getPage(pageNum);
        const textContent = await page.getTextContent();
        
        // –°–æ–±–∏—Ä–∞–µ–º –≤–µ—Å—å —Ç–µ–∫—Å—Ç —Å—Ç—Ä–∞–Ω–∏—Ü—ã
        const pageText = textContent.items.map(item => item.str).join(' ');
        const pageTextLower = pageText.toLowerCase();
        
        // –ò—â–µ–º —Å–æ–≤–ø–∞–¥–µ–Ω–∏—è
        if (pageTextLower.includes(searchTerm)) {
            // –ù–∞—Ö–æ–¥–∏–º –∫–æ–Ω—Ç–µ–∫—Å—Ç –≤–æ–∫—Ä—É–≥ –Ω–∞–π–¥–µ–Ω–Ω–æ–≥–æ —Å–ª–æ–≤–∞
            const index = pageTextLower.indexOf(searchTerm);
            const start = Math.max(0, index - 50);
            const end = Math.min(pageText.length, index + searchTerm.length + 50);
            
            let context = pageText.substring(start, end);
            
            // –î–æ–±–∞–≤–ª—è–µ–º –º–Ω–æ–≥–æ—Ç–æ—á–∏—è –µ—Å–ª–∏ –æ–±—Ä–µ–∑–∞–ª–∏
            if (start > 0) context = '...' + context;
            if (end < pageText.length) context = context + '...';
            
            // –ü–æ–¥—Å–≤–µ—á–∏–≤–∞–µ–º –Ω–∞–π–¥–µ–Ω–Ω–æ–µ —Å–ª–æ–≤–æ
            const regex = new RegExp(`(${query})`, 'gi');
            context = context.replace(regex, '<mark>$1</mark>');
            
            results.push({
                pageNum: pageNum,
                context: context,
                fullText: pageText
            });
        }
    }
    
    return results;
}
```

#### 3. –î–æ–±–∞–≤–ª–µ–Ω–∞ –Ω–∞–≤–∏–≥–∞—Ü–∏—è –∫ —Ä–µ–∑—É–ª—å—Ç–∞—Ç–∞–º
```javascript
goToSearchResult(pageNum) {
    this.goToPage(pageNum);
    this.showNotification(`–ü–µ—Ä–µ—Ö–æ–¥ –∫ —Å—Ç—Ä. ${pageNum} –ø–æ —Ä–µ–∑—É–ª—å—Ç–∞—Ç—É –ø–æ–∏—Å–∫–∞`);
}
```

#### 4. –£–ª—É—á—à–µ–Ω –∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å –ø–æ–∏—Å–∫–∞
```javascript
openSearch() {
    // –ö—Ä–∞—Å–∏–≤—ã–π –∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å —Å –∏–∫–æ–Ω–∫–∞–º–∏ Bootstrap Icons
    // –û–±—Ä–∞–±–æ—Ç—á–∏–∫ Enter –¥–ª—è –±—ã—Å—Ç—Ä–æ–≥–æ –ø–æ–∏—Å–∫–∞
    // –ê–≤—Ç–æ—Ñ–æ–∫—É—Å –Ω–∞ –ø–æ–ª–µ –≤–≤–æ–¥–∞
}
```

## –§—É–Ω–∫—Ü–∏–æ–Ω–∞–ª—å–Ω–æ—Å—Ç—å

### ‚úÖ **–ß—Ç–æ —Ä–∞–±–æ—Ç–∞–µ—Ç:**
- **–ü–æ–ª–Ω–æ—Ç–µ–∫—Å—Ç–æ–≤—ã–π –ø–æ–∏—Å–∫** –ø–æ –≤—Å–µ–º—É PDF –¥–æ–∫—É–º–µ–Ω—Ç—É
- **–ü–æ–¥—Å–≤–µ—Ç–∫–∞ –Ω–∞–π–¥–µ–Ω–Ω—ã—Ö —Å–ª–æ–≤** –≤ —Ä–µ–∑—É–ª—å—Ç–∞—Ç–∞—Ö –ø–æ–∏—Å–∫–∞  
- **–ö–æ–Ω—Ç–µ–∫—Å—Ç** - –ø–æ–∫–∞–∑—ã–≤–∞–µ–º 100 —Å–∏–º–≤–æ–ª–æ–≤ –≤–æ–∫—Ä—É–≥ –Ω–∞–π–¥–µ–Ω–Ω–æ–≥–æ —Å–ª–æ–≤–∞
- **–ü–µ—Ä–µ—Ö–æ–¥ –∫ —Å—Ç—Ä–∞–Ω–∏—Ü–µ** - –∫–ª–∏–∫ –ø–æ —Ä–µ–∑—É–ª—å—Ç–∞—Ç—É –≤–µ–¥–µ—Ç –Ω–∞ –Ω—É–∂–Ω—É—é —Å—Ç—Ä–∞–Ω–∏—Ü—É
- **–ü–æ–∏—Å–∫ –ø–æ Enter** - –º–æ–∂–Ω–æ –∏—Å–∫–∞—Ç—å –Ω–∞–∂–∞—Ç–∏–µ–º Enter
- **–ò–Ω–¥–∏–∫–∞—Ç–æ—Ä –∑–∞–≥—Ä—É–∑–∫–∏** - –∫—Ä—É—Ç—è—â–∞—è—Å—è –∏–∫–æ–Ω–∫–∞ –≤–æ –≤—Ä–µ–º—è –ø–æ–∏—Å–∫–∞
- **–û–±—Ä–∞–±–æ—Ç–∫–∞ –æ—à–∏–±–æ–∫** - –∫–æ—Ä—Ä–µ–∫—Ç–Ω—ã–µ —Å–æ–æ–±—â–µ–Ω–∏—è –æ–± –æ—à–∏–±–∫–∞—Ö
- **–†–µ–≥–∏—Å—Ç—Ä–æ–Ω–µ–∑–∞–≤–∏—Å–∏–º—ã–π –ø–æ–∏—Å–∫** - –Ω–∞—Ö–æ–¥–∏—Ç —Å–ª–æ–≤–∞ –≤ –ª—é–±–æ–º —Ä–µ–≥–∏—Å—Ç—Ä–µ
- **–ö—Ä–∞—Å–∏–≤—ã–π –∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å** - —Å –∏–∫–æ–Ω–∫–∞–º–∏ –∏ —Å–æ–≤—Ä–µ–º–µ–Ω–Ω—ã–º –¥–∏–∑–∞–π–Ω–æ–º

### üîç **–ö–∞–∫ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å:**
1. –û—Ç–∫—Ä–æ–π—Ç–µ –ª—é–±—É—é –∫–Ω–∏–≥—É –≤ PDF —Ä–∏–¥–µ—Ä–µ
2. –ù–∞–∂–º–∏—Ç–µ –∫–Ω–æ–ø–∫—É "üîç –ü–æ–∏—Å–∫" –≤ –Ω–∏–∂–Ω–µ–π –ø–∞–Ω–µ–ª–∏
3. –í–≤–µ–¥–∏—Ç–µ —Ç–µ–∫—Å—Ç –¥–ª—è –ø–æ–∏—Å–∫–∞ 
4. –ù–∞–∂–º–∏—Ç–µ Enter –∏–ª–∏ –∫–Ω–æ–ø–∫—É "–ù–∞–π—Ç–∏"
5. –ö–ª–∏–∫–Ω–∏—Ç–µ –ø–æ –ª—é–±–æ–º—É —Ä–µ–∑—É–ª—å—Ç–∞—Ç—É –¥–ª—è –ø–µ—Ä–µ—Ö–æ–¥–∞ –∫ —Å—Ç—Ä–∞–Ω–∏—Ü–µ

### üìä **–ü—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω–æ—Å—Ç—å:**
- **–°–∫–æ—Ä–æ—Å—Ç—å:** –ü–æ–∏—Å–∫ –≤—ã–ø–æ–ª–Ω—è–µ—Ç—Å—è –∞—Å–∏–Ω—Ö—Ä–æ–Ω–Ω–æ –ø–æ —Å—Ç—Ä–∞–Ω–∏—Ü–∞–º
- **–ü–∞–º—è—Ç—å:** –≠—Ñ—Ñ–µ–∫—Ç–∏–≤–Ω–æ–µ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ PDF.js Text API
- **UX:** –ò–Ω–¥–∏–∫–∞—Ç–æ—Ä –∑–∞–≥—Ä—É–∑–∫–∏ –∏ –ø–ª–∞–≤–Ω—ã–µ –ø–µ—Ä–µ—Ö–æ–¥—ã
- **–ú–∞—Å—à—Ç–∞–±–∏—Ä—É–µ–º–æ—Å—Ç—å:** –†–∞–±–æ—Ç–∞–µ—Ç —Å –¥–æ–∫—É–º–µ–Ω—Ç–∞–º–∏ –ª—é–±–æ–≥–æ —Ä–∞–∑–º–µ—Ä–∞

–¢–µ–ø–µ—Ä—å –ø–æ–∏—Å–∫ –≤ PDF —Ä–∏–¥–µ—Ä–µ **–ø–æ–ª–Ω–æ—Å—Ç—å—é —Ñ—É–Ω–∫—Ü–∏–æ–Ω–∞–ª–µ–Ω** –∏ –ø—Ä–µ–¥–æ—Å—Ç–∞–≤–ª—è–µ—Ç –æ—Ç–ª–∏—á–Ω—ã–π –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å—Å–∫–∏–π –æ–ø—ã—Ç! üéâüîçüìö
