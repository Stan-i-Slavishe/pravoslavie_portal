# üõí –ò–°–ü–†–ê–í–õ–ï–ù–ò–ï –ö–ù–û–ü–ö–ò "–î–û–ë–ê–í–ò–¢–¨ –í –ö–û–†–ó–ò–ù–£" –ù–ê –î–ï–¢–ê–õ–¨–ù–û–ô –°–¢–†–ê–ù–ò–¶–ï –¢–û–í–ê–†–ê

## üéØ –ü—Ä–æ–±–ª–µ–º–∞
–ù–∞ –¥–µ—Ç–∞–ª—å–Ω–æ–π —Å—Ç—Ä–∞–Ω–∏—Ü–µ —Ç–æ–≤–∞—Ä–∞ (`shop/product/<id>/`) –∫–Ω–æ–ø–∫–∞ "–ö—É–ø–∏—Ç—å –∑–∞ 499,00‚ÇΩ" –≤–µ–ª–∞ –Ω–µ –Ω–∞ –¥–æ–±–∞–≤–ª–µ–Ω–∏–µ –≤ –∫–æ—Ä–∑–∏–Ω—É, –∞ –Ω–∞ –∫–∞–∫—É—é-—Ç–æ —Å—Ç—Ä–∞–Ω–∏—Ü—É –æ—Ç—Å–ª–µ–∂–∏–≤–∞–Ω–∏—è –∏–Ω—Ç–µ—Ä–µ—Å–∞ —Å —Å–µ–º–µ–π–Ω–æ–π –ø–æ–¥–ø–∏—Å–∫–æ–π.

## ‚úÖ –†–µ—à–µ–Ω–∏–µ
–ò—Å–ø—Ä–∞–≤–ª–µ–Ω–∞ –ª–æ–≥–∏–∫–∞ –∫–Ω–æ–ø–∫–∏ "–î–æ–±–∞–≤–∏—Ç—å –≤ –∫–æ—Ä–∑–∏–Ω—É" –¥–ª—è –∫–æ—Ä—Ä–µ–∫—Ç–Ω–æ–≥–æ –≤–∑–∞–∏–º–æ–¥–µ–π—Å—Ç–≤–∏—è —Å API.

## üìù –í–Ω–µ—Å–µ–Ω–Ω—ã–µ –∏–∑–º–µ–Ω–µ–Ω–∏—è

### **shop/templates/shop/product_detail.html**

#### 1. –ò–∑–º–µ–Ω–µ–Ω–∞ HTML-–∫–Ω–æ–ø–∫–∞:
**–ë—ã–ª–æ (—Å—Å—ã–ª–∫–∞):**
```html
<a href="{% url 'shop:add_to_cart' product_id=product.id %}" 
   class="btn btn-primary btn-lg btn-add-to-cart">
    <i class="bi bi-cart-plus me-2"></i>
    –î–æ–±–∞–≤–∏—Ç—å –≤ –∫–æ—Ä–∑–∏–Ω—É
</a>
```

**–°—Ç–∞–ª–æ (–∫–Ω–æ–ø–∫–∞):**
```html
<button type="button" 
        class="btn btn-primary btn-lg btn-add-to-cart"
        data-product-id="{{ product.id }}">
    <i class="bi bi-cart-plus me-2"></i>
    –î–æ–±–∞–≤–∏—Ç—å –≤ –∫–æ—Ä–∑–∏–Ω—É
</button>
```

#### 2. –û–±–Ω–æ–≤–ª–µ–Ω JavaScript:
**–ë—ã–ª–æ (GET –∑–∞–ø—Ä–æ—Å):**
```javascript
fetch(url, {
    method: 'GET',
    headers: {
        'X-Requested-With': 'XMLHttpRequest',
    }
})
```

**–°—Ç–∞–ª–æ (POST –∑–∞–ø—Ä–æ—Å —Å JSON):**
```javascript
fetch('{% url "shop:add_to_cart" %}', {
    method: 'POST',
    headers: {
        'X-CSRFToken': '{{ csrf_token }}',
        'X-Requested-With': 'XMLHttpRequest',
        'Content-Type': 'application/json',
    },
    body: JSON.stringify({
        'product_id': productId,
        'quantity': 1
    })
})
```

#### 3. –£–ª—É—á—à–µ–Ω –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å—Å–∫–∏–π –æ–ø—ã—Ç:
- **–ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏–π —Ä–µ–¥–∏—Ä–µ–∫—Ç:** –ü–æ—Å–ª–µ —É—Å–ø–µ—à–Ω–æ–≥–æ –¥–æ–±–∞–≤–ª–µ–Ω–∏—è —Ç–æ–≤–∞—Ä–∞ –≤ –∫–æ—Ä–∑–∏–Ω—É –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ –ø–µ—Ä–µ–Ω–∞–ø—Ä–∞–≤–ª—è–µ—Ç—Å—è –≤ –∫–æ—Ä–∑–∏–Ω—É —á–µ—Ä–µ–∑ 1.5 —Å–µ–∫—É–Ω–¥—ã
- **–£–ª—É—á—à–µ–Ω–Ω–∞—è –æ–±—Ä–∞–±–æ—Ç–∫–∞ –æ—à–∏–±–æ–∫:** –õ—É—á—à–∏–µ —Å–æ–æ–±—â–µ–Ω–∏—è –æ–± –æ—à–∏–±–∫–∞—Ö —Å –≤–æ—Å—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω–∏–µ–º –∫–Ω–æ–ø–∫–∏ —á–µ—Ä–µ–∑ 3 —Å–µ–∫—É–Ω–¥—ã
- **–í–∏–∑—É–∞–ª—å–Ω–∞—è –æ–±—Ä–∞—Ç–Ω–∞—è —Å–≤—è–∑—å:** –ò–∑–º–µ–Ω–µ–Ω–∏–µ –∏–∫–æ–Ω–∫–∏ –∏ —Ü–≤–µ—Ç–∞ –∫–Ω–æ–ø–∫–∏ –ø—Ä–∏ —Ä–∞–∑–Ω—ã—Ö —Å–æ—Å—Ç–æ—è–Ω–∏—è—Ö

## üîÑ –ü—Ä–æ—Ü–µ—Å—Å —Ä–∞–±–æ—Ç—ã –∫–Ω–æ–ø–∫–∏

### 1. **–ö–ª–∏–∫ –ø–æ –∫–Ω–æ–ø–∫–µ:**
- –ö–Ω–æ–ø–∫–∞ –±–ª–æ–∫–∏—Ä—É–µ—Ç—Å—è
- –ü–æ–∫–∞–∑—ã–≤–∞–µ—Ç—Å—è "–î–æ–±–∞–≤–ª—è–µ–º..." —Å –∏–∫–æ–Ω–∫–æ–π –∑–∞–≥—Ä—É–∑–∫–∏

### 2. **–£—Å–ø–µ—à–Ω–æ–µ –¥–æ–±–∞–≤–ª–µ–Ω–∏–µ:**
- –ö–Ω–æ–ø–∫–∞ —Å—Ç–∞–Ω–æ–≤–∏—Ç—Å—è –∑–µ–ª–µ–Ω–æ–π
- –ü–æ–∫–∞–∑—ã–≤–∞–µ—Ç—Å—è "–î–æ–±–∞–≤–ª–µ–Ω–æ –≤ –∫–æ—Ä–∑–∏–Ω—É" —Å –≥–∞–ª–æ—á–∫–æ–π
- –ß–µ—Ä–µ–∑ 1.5 —Å–µ–∫—É–Ω–¥—ã –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏–π –ø–µ—Ä–µ—Ö–æ–¥ –≤ –∫–æ—Ä–∑–∏–Ω—É

### 3. **–û—à–∏–±–∫–∞:**
- –ö–Ω–æ–ø–∫–∞ —Å—Ç–∞–Ω–æ–≤–∏—Ç—Å—è –∫—Ä–∞—Å–Ω–æ–π
- –ü–æ–∫–∞–∑—ã–≤–∞–µ—Ç—Å—è "–û—à–∏–±–∫–∞" –∏–ª–∏ "–û—à–∏–±–∫–∞ —Å–µ—Ç–∏"
- –ß–µ—Ä–µ–∑ 3 —Å–µ–∫—É–Ω–¥—ã –∫–Ω–æ–ø–∫–∞ –≤–æ—Å—Å—Ç–∞–Ω–∞–≤–ª–∏–≤–∞–µ—Ç—Å—è

## üõ†Ô∏è –¢–µ—Ö–Ω–∏—á–µ—Å–∫–∞—è –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏—è

### API Endpoint:
- **URL:** `/shop/add-to-cart/`
- **–ú–µ—Ç–æ–¥:** POST
- **Content-Type:** application/json
- **CSRF:** –¢—Ä–µ–±—É–µ—Ç—Å—è —Ç–æ–∫–µ–Ω

### –§–æ—Ä–º–∞—Ç –∑–∞–ø—Ä–æ—Å–∞:
```json
{
    "product_id": 9,
    "quantity": 1
}
```

### –§–æ—Ä–º–∞—Ç –æ—Ç–≤–µ—Ç–∞ (—É—Å–ø–µ—Ö):
```json
{
    "status": "success",
    "message": "–°–µ–º–µ–π–Ω–∞—è –ø–æ–¥–ø–∏—Å–∫–∞ –¥–æ–±–∞–≤–ª–µ–Ω –≤ –∫–æ—Ä–∑–∏–Ω—É",
    "cart_total_items": 1,
    "cart_total_price": 499.0
}
```

## üé® UX –£–ª—É—á—à–µ–Ω–∏—è

### ‚úÖ –î–æ –∏—Å–ø—Ä–∞–≤–ª–µ–Ω–∏—è:
- ‚ùå –ö–Ω–æ–ø–∫–∞ –≤–µ–ª–∞ –Ω–∞ –Ω–µ–ø—Ä–∞–≤–∏–ª—å–Ω—É—é —Å—Ç—Ä–∞–Ω–∏—Ü—É
- ‚ùå –ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å –ø–æ–ø–∞–¥–∞–ª –Ω–∞ —Å—Ç—Ä–∞–Ω–∏—Ü—É "–æ—Ç—Å–ª–µ–∂–∏–≤–∞–Ω–∏—è –∏–Ω—Ç–µ—Ä–µ—Å–∞"
- ‚ùå –¢–æ–≤–∞—Ä –Ω–µ –¥–æ–±–∞–≤–ª—è–ª—Å—è –≤ –∫–æ—Ä–∑–∏–Ω—É

### ‚úÖ –ü–æ—Å–ª–µ –∏—Å–ø—Ä–∞–≤–ª–µ–Ω–∏—è:
- ‚úÖ –ö–Ω–æ–ø–∫–∞ –∫–æ—Ä—Ä–µ–∫—Ç–Ω–æ –¥–æ–±–∞–≤–ª—è–µ—Ç —Ç–æ–≤–∞—Ä –≤ –∫–æ—Ä–∑–∏–Ω—É
- ‚úÖ –í–∏–∑—É–∞–ª—å–Ω–∞—è –æ–±—Ä–∞—Ç–Ω–∞—è —Å–≤—è–∑—å (–∞–Ω–∏–º–∞—Ü–∏–∏, –∏–∑–º–µ–Ω–µ–Ω–∏–µ —Ü–≤–µ—Ç–æ–≤)
- ‚úÖ –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏–π –ø–µ—Ä–µ—Ö–æ–¥ –≤ –∫–æ—Ä–∑–∏–Ω—É –ø–æ—Å–ª–µ –¥–æ–±–∞–≤–ª–µ–Ω–∏—è
- ‚úÖ –£–ª—É—á—à–µ–Ω–Ω–∞—è –æ–±—Ä–∞–±–æ—Ç–∫–∞ –æ—à–∏–±–æ–∫
- ‚úÖ –ü—Ä–æ—Ñ–µ—Å—Å–∏–æ–Ω–∞–ª—å–Ω—ã–π –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å—Å–∫–∏–π –æ–ø—ã—Ç

## üöÄ –ò–Ω—Å—Ç—Ä—É–∫—Ü–∏–∏ –ø–æ —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏—é

### 1. –û—Ç–∫—Ä–æ–π—Ç–µ –¥–µ—Ç–∞–ª—å–Ω—É—é —Å—Ç—Ä–∞–Ω–∏—Ü—É —Ç–æ–≤–∞—Ä–∞:
```
http://127.0.0.1:8000/shop/product/9/
```

### 2. –ê–≤—Ç–æ—Ä–∏–∑—É–π—Ç–µ—Å—å –≤ —Å–∏—Å—Ç–µ–º–µ

### 3. –ù–∞–∂–º–∏—Ç–µ –∫–Ω–æ–ø–∫—É "–î–æ–±–∞–≤–∏—Ç—å –≤ –∫–æ—Ä–∑–∏–Ω—É"

### 4. –£–±–µ–¥–∏—Ç–µ—Å—å —á—Ç–æ:
- –ö–Ω–æ–ø–∫–∞ –±–ª–æ–∫–∏—Ä—É–µ—Ç—Å—è –∏ –ø–æ–∫–∞–∑—ã–≤–∞–µ—Ç "–î–æ–±–∞–≤–ª—è–µ–º..."
- –ö–Ω–æ–ø–∫–∞ —Å—Ç–∞–Ω–æ–≤–∏—Ç—Å—è –∑–µ–ª–µ–Ω–æ–π —Å —Ç–µ–∫—Å—Ç–æ–º "–î–æ–±–∞–≤–ª–µ–Ω–æ –≤ –∫–æ—Ä–∑–∏–Ω—É"
- –ü—Ä–æ–∏—Å—Ö–æ–¥–∏—Ç –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏–π –ø–µ—Ä–µ—Ö–æ–¥ –≤ –∫–æ—Ä–∑–∏–Ω—É
- –¢–æ–≤–∞—Ä –ø–æ—è–≤–∏–ª—Å—è –≤ –∫–æ—Ä–∑–∏–Ω–µ —Å –ø—Ä–∞–≤–∏–ª—å–Ω—ã–º –∫–æ–ª–∏—á–µ—Å—Ç–≤–æ–º

### 5. –ü—Ä–æ–≤–µ—Ä—å—Ç–µ —Å—á–µ—Ç—á–∏–∫ –∫–æ—Ä–∑–∏–Ω—ã –≤ –ø—Ä–∞–≤–æ–º –≤–µ—Ä—Ö–Ω–µ–º —É–≥–ª—É

## üîß –°–æ–≤–º–µ—Å—Ç–∏–º–æ—Å—Ç—å

### Backend:
- **Django view:** `shop.views.add_to_cart`
- **–ú–æ–¥–µ–ª–∏:** Product, Cart, CartItem
- **–¢—Ä–µ–±—É–µ—Ç –∞–≤—Ç–æ—Ä–∏–∑–∞—Ü–∏–∏:** –î–∞ (`@login_required`)

### Frontend:
- **JavaScript:** Vanilla JS (ES6+)
- **CSS Framework:** Bootstrap 5
- **–ò–∫–æ–Ω–∫–∏:** Bootstrap Icons
- **CSRF:** Django CSRF –∑–∞—â–∏—Ç–∞

## üêõ –í–æ–∑–º–æ–∂–Ω—ã–µ –ø—Ä–æ–±–ª–µ–º—ã –∏ —Ä–µ—à–µ–Ω–∏—è

### –ü—Ä–æ–±–ª–µ–º–∞: "CSRF token missing"
**–†–µ—à–µ–Ω–∏–µ:** –£–±–µ–¥–∏—Ç–µ—Å—å, —á—Ç–æ –≤ —à–∞–±–ª–æ–Ω–µ –µ—Å—Ç—å `{{ csrf_token }}`

### –ü—Ä–æ–±–ª–µ–º–∞: "Product not found"
**–†–µ—à–µ–Ω–∏–µ:** –ü—Ä–æ–≤–µ—Ä—å—Ç–µ —á—Ç–æ `data-product-id` –∫–æ—Ä—Ä–µ–∫—Ç–Ω–æ –ø–µ—Ä–µ–¥–∞–µ—Ç—Å—è

### –ü—Ä–æ–±–ª–µ–º–∞: "User not authenticated"
**–†–µ—à–µ–Ω–∏–µ:** –ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å –¥–æ–ª–∂–µ–Ω –≤–æ–π—Ç–∏ –≤ —Å–∏—Å—Ç–µ–º—É

### –ü—Ä–æ–±–ª–µ–º–∞: JavaScript –Ω–µ —Ä–∞–±–æ—Ç–∞–µ—Ç
**–†–µ—à–µ–Ω–∏–µ:** –ü—Ä–æ–≤–µ—Ä—å—Ç–µ –∫–æ–Ω—Å–æ–ª—å –±—Ä–∞—É–∑–µ—Ä–∞ –Ω–∞ –æ—à–∏–±–∫–∏

---

**‚ú® –ò—Å–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –∑–∞–≤–µ—Ä—à–µ–Ω–æ —É—Å–ø–µ—à–Ω–æ! –ö–Ω–æ–ø–∫–∞ "–î–æ–±–∞–≤–∏—Ç—å –≤ –∫–æ—Ä–∑–∏–Ω—É" —Ç–µ–ø–µ—Ä—å —Ä–∞–±–æ—Ç–∞–µ—Ç –ø—Ä–∞–≤–∏–ª—å–Ω–æ.**

## üìã –ß–µ–∫-–ª–∏—Å—Ç –≥–æ—Ç–æ–≤–Ω–æ—Å—Ç–∏

- [x] –ö–Ω–æ–ø–∫–∞ –∏–∑–º–µ–Ω–µ–Ω–∞ —Å —Å—Å—ã–ª–∫–∏ –Ω–∞ button
- [x] JavaScript –æ–±–Ω–æ–≤–ª–µ–Ω –¥–ª—è POST –∑–∞–ø—Ä–æ—Å–æ–≤
- [x] –î–æ–±–∞–≤–ª–µ–Ω–∞ CSRF –∑–∞—â–∏—Ç–∞
- [x] –£–ª—É—á—à–µ–Ω–∞ –æ–±—Ä–∞–±–æ—Ç–∫–∞ –æ—à–∏–±–æ–∫
- [x] –î–æ–±–∞–≤–ª–µ–Ω –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏–π —Ä–µ–¥–∏—Ä–µ–∫—Ç –≤ –∫–æ—Ä–∑–∏–Ω—É
- [x] –ü—Ä–æ—Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∞ —Ñ—É–Ω–∫—Ü–∏–æ–Ω–∞–ª—å–Ω–æ—Å—Ç—å
- [x] –î–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è —Å–æ–∑–¥–∞–Ω–∞

**üéâ –ì–æ—Ç–æ–≤–æ –∫ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—é!**