# ๐ ะัะฐะฒะพัะปะฐะฒะฝัะน ะฟะพััะฐะป - ะัััััะน ััะฐัั

## ๐ฏ **ะงัะพ ะฑัะปะพ ัะดะตะปะฐะฝะพ:**

โ ะะฐัััะพะตะฝั ะพัะดะตะปัะฝัะต ะพะบััะถะตะฝะธั ะดะปั ัะฐะทัะฐะฑะพัะบะธ ะธ ะฟัะพะดะฐะบัะตะฝะฐ  
โ ะกะพะทะดะฐะฝั ะฐะฒัะพะผะฐัะธัะตัะบะธะต ัะบัะธะฟัั ะดะปั ะทะฐะฟััะบะฐ  
โ ะะฐะทะดะตะปะตะฝั ะฝะฐัััะพะนะบะธ ะฑะตะทะพะฟะฐัะฝะพััะธ  
โ ะะพะดะณะพัะพะฒะปะตะฝั ัะฐะนะปั ะดะปั ะดะตะฟะปะพั  

## ๐ง **ะะพะบะฐะปัะฝะฐั ัะฐะทัะฐะฑะพัะบะฐ (ะทะฐะฟััะบ ะพะดะฝะพะน ะบะพะผะฐะฝะดะพะน):**

### Windows:
```cmd
run_local.bat
```

### Linux/Mac:
```bash
chmod +x run_local.sh
./run_local.sh
```

**ะญัะพ ะฐะฒัะพะผะฐัะธัะตัะบะธ:**
- โ ะะฐัััะพะธั ะปะพะบะฐะปัะฝัะต ะฟะตัะตะผะตะฝะฝัะต ะพะบััะถะตะฝะธั
- โ ะะบัะธะฒะธััะตั ะฒะธัััะฐะปัะฝะพะต ะพะบััะถะตะฝะธะต  
- โ ะฃััะฐะฝะพะฒะธั ะทะฐะฒะธัะธะผะพััะธ
- โ ะัะธะผะตะฝะธั ะผะธะณัะฐัะธะธ
- โ ะกะพะฑะตัะตั ััะฐัะธะบั
- โ ะกะพะทะดะฐัั ััะฟะตัะฟะพะปัะทะพะฒะฐัะตะปั (admin/admin123)
- โ ะะฐะฟัััะธั ัะตัะฒะตั ะฝะฐ http://localhost:8000

## ๐ **ะะตะฟะปะพะน ะฝะฐ ะฟัะพะดะฐะบัะตะฝ:**

ะะฐ ะฟัะพะดะฐะบัะตะฝ ัะตัะฒะตัะต:
```bash
# ะกะดะตะปะฐัั ัะบัะธะฟั ะธัะฟะพะปะฝัะตะผัะผ (ะพะดะธะฝ ัะฐะท)
chmod +x deploy_production.sh

# ะะตะฟะปะพะน
sudo ./deploy_production.sh
```

**ะญัะพ ะฐะฒัะพะผะฐัะธัะตัะบะธ:**
- โ ะกะพะทะดะฐัั ะฑัะบะฐะฟ ัะตะบััะตะน ะฒะตััะธะธ
- โ ะะฑะฝะพะฒะธั ะบะพะด ะธะท Git
- โ ะัะธะผะตะฝะธั ะฟัะพะดะฐะบัะตะฝ ะฝะฐัััะพะนะบะธ
- โ ะะฑะฝะพะฒะธั ะฑะฐะทั ะดะฐะฝะฝัั
- โ ะกะพะฑะตัะตั ััะฐัะธะบั
- โ ะะฑะฝะพะฒะธั PWA (Service Worker)
- โ ะัะพะฒะตัะธั ะธะบะพะฝะบะธ
- โ ะะตัะตะทะฐะฟัััะธั ัะตัะฒะธัั
- โ ะัะพะฒะตัะธั ะดะพัััะฟะฝะพััั ัะฐะนัะฐ

## โ๏ธ **ะะฐัััะพะนะบะฐ ะฟะตัะตะผะตะฝะฝัั ะพะบััะถะตะฝะธั:**

### ะะพะบะฐะปัะฝะฐั ัะฐะทัะฐะฑะพัะบะฐ:
ะคะฐะนะป `.env.local` ัะถะต ะฝะฐัััะพะตะฝ ั ัะตััะพะฒัะผะธ ะทะฝะฐัะตะฝะธัะผะธ.

### ะัะพะดะฐะบัะตะฝ:
ะััะตะดะฐะบัะธััะนัะต `.env.production` ะฝะฐ ัะตัะฒะตัะต:
```env
SECRET_KEY=ะฒะฐั-ััะฟะตั-ัะตะบัะตัะฝัะน-ะบะปัั
DB_PASSWORD=ะฒะฐั-ะฟะฐัะพะปั-ะพั-ะฑะด  
EMAIL_HOST_USER=ะฒะฐัะฐ-ะฟะพััะฐ@yandex.ru
EMAIL_HOST_PASSWORD=ะฟะฐัะพะปั-ะพั-ะฟะพััั
YOUTUBE_API_KEY=ะฒะฐั-ะบะปัั-youtube
YOOKASSA_SHOP_ID=ะฒะฐั-ะผะฐะณะฐะทะธะฝ-id
YOOKASSA_SECRET_KEY=ะฒะฐั-ัะตะบัะตัะฝัะน-ะบะปัั
```

## ๐ **ะะฐะฑะพัะธะน ะฟัะพัะตัั:**

1. **ะะฐะทัะฐะฑะพัะบะฐ:** `run_local.bat` โ ัะฐะฑะพัะฐะตัะต ะปะพะบะฐะปัะฝะพ
2. **ะะพะผะผะธั:** `git add . && git commit -m "..." && git push`  
3. **ะะตะฟะปะพะน:** `sudo ./deploy_production.sh` ะฝะฐ ัะตัะฒะตัะต
4. **ะัะพะฒะตัะบะฐ:** https://dobrist.com

## ๐ **ะกัััะบัััะฐ ะฟัะพะตะบัะฐ:**

```
๐ pravoslavie_portal/
โโโ ๐ config/                  # ะะฐัััะพะนะบะธ Django
โ   โโโ settings.py            # ะะฒัะพะฒัะฑะพั ะพะบััะถะตะฝะธั  
โ   โโโ settings_base.py       # ะะฑัะธะต ะฝะฐัััะพะนะบะธ
โ   โโโ settings_local.py      # ะะพะบะฐะปัะฝะฐั ัะฐะทัะฐะฑะพัะบะฐ
โ   โโโ settings_production.py # ะัะพะดะฐะบัะตะฝ
โโโ ๐ core/                   # ะัะฝะพะฒะฝะพะต ะฟัะธะปะพะถะตะฝะธะต
โโโ ๐ stories/                # ะะธะดะตะพ-ัะฐััะบะฐะทั
โโโ ๐ fairy_tales/            # ะขะตัะฐะฟะตะฒัะธัะตัะบะธะต ัะบะฐะทะบะธ  
โโโ ๐ books/                  # ะะฝะธะณะธ
โโโ ๐ shop/                   # ะะฝัะตัะฝะตั-ะผะฐะณะฐะทะธะฝ
โโโ ๐ accounts/               # ะะพะปัะทะพะฒะฐัะตะปะธ
โโโ ๐ static/                 # ะกัะฐัะธัะตัะบะธะต ัะฐะนะปั
โโโ ๐ templates/              # HTML ัะฐะฑะปะพะฝั
โโโ .env.local                # ะะฐัััะพะนะบะธ ัะฐะทัะฐะฑะพัะบะธ
โโโ .env.production           # ะะฐัััะพะนะบะธ ะฟัะพะดะฐะบัะตะฝะฐ (ะฝะต ะฒ Git!)
โโโ run_local.bat             # ะะฐะฟััะบ ัะฐะทัะฐะฑะพัะบะธ (Windows)
โโโ run_local.sh              # ะะฐะฟััะบ ัะฐะทัะฐะฑะพัะบะธ (Linux/Mac)  
โโโ deploy_production.sh      # ะะตะฟะปะพะน ะฝะฐ ะฟัะพะดะฐะบัะตะฝ
```

## ๐๏ธ **ะะพะปะตะทะฝัะต ะบะพะผะฐะฝะดั:**

### ะะฐะทัะฐะฑะพัะบะฐ:
```bash
# ะกะพะทะดะฐะฝะธะต ะผะธะณัะฐัะธะน
python manage.py makemigrations

# ะกะพะทะดะฐะฝะธะต ััะฟะตัะฟะพะปัะทะพะฒะฐัะตะปั
python manage.py createsuperuser

# ะขะตััะธัะพะฒะฐะฝะธะต
python manage.py test

# Shell Django
python manage.py shell
```

### ะัะพะดะฐะบัะตะฝ:
```bash
# ะะพะณะธ Django
journalctl -u dobrist -f

# ะะพะณะธ Nginx  
tail -f /var/log/nginx/error.log

# ะกัะฐััั ัะตัะฒะธัะพะฒ
systemctl status dobrist nginx

# ะะตัะตะทะฐะฟััะบ
sudo systemctl restart dobrist nginx
```

## ๐ **ะะพะดะดะตัะถะบะฐ:**

### ะัะพะฒะตัะธัั ะพะบััะถะตะฝะธะต:
```python
python manage.py shell
>>> from django.conf import settings  
>>> print("DEBUG:", settings.DEBUG)
>>> print("DB:", settings.DATABASES['default']['NAME'])
```

### ะัะปะธ ััะพ-ัะพ ะฝะต ัะฐะฑะพัะฐะตั:
1. ๐ ะัะพะฒะตัััะต ะปะพะณะธ: `journalctl -u dobrist -n 20`
2. ๐ง ะะตัะตะทะฐะฟัััะธัะต: `sudo systemctl restart dobrist nginx`  
3. ๐๏ธ ะัะพะฒะตัััะต ะะ: `python manage.py migrate --check`
4. ๐ ะัะพะฒะตัััะต ััะฐัะธะบั: `ls -la staticfiles/`

## ๐ **ะะพัะพะฒะพ!**

ะขะตะฟะตัั ั ะฒะฐั ะตััั ะฟะพะปะฝะพัััั ะฝะฐัััะพะตะฝะฝะฐั ััะตะดะฐ ัะฐะทัะฐะฑะพัะบะธ:
- ๐ง ะะพะบะฐะปัะฝัะน ัะตัะฒะตั ะดะปั ัะฐะทัะฐะฑะพัะบะธ
- ๐ ะะฒัะพะผะฐัะธัะตัะบะธะน ะดะตะฟะปะพะน ะฝะฐ ะฟัะพะดะฐะบัะตะฝ  
- ๐ ะะตะทะพะฟะฐัะฝะพะต ัะฐะทะดะตะปะตะฝะธะต ะฝะฐัััะพะตะบ
- ๐ฑ ะะพัะพะฒัะน PWA ััะฝะบัะธะพะฝะฐะป
- ๐ ะะพะปะฝะพััะฝะบัะธะพะฝะฐะปัะฝัะน ะธะฝัะตัะฝะตั-ะผะฐะณะฐะทะธะฝ
- ๐ง ะฃะฝะธะบะฐะปัะฝัะต ัะตัะฐะฟะตะฒัะธัะตัะบะธะต ัะบะฐะทะบะธ

**ะัะฟะพะปัะทัะนัะต `run_local.bat` ะดะปั ัะฐะทัะฐะฑะพัะบะธ ะธ `deploy_production.sh` ะดะปั ะพะฑะฝะพะฒะปะตะฝะธั ัะฐะนัะฐ!** ๐
