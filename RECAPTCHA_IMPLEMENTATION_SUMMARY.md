# ‚úÖ –ó–ê–í–ï–†–®–ï–ù–û: Google reCAPTCHA v3 –≤ —Ñ–æ—Ä–º—É —Ä–µ–≥–∏—Å—Ç—Ä–∞—Ü–∏–∏

## üéØ –ß—Ç–æ –±—ã–ª–æ —Å–¥–µ–ª–∞–Ω–æ:

### 1. üìù –°–æ–∑–¥–∞–Ω–∞ –∫–∞—Å—Ç–æ–º–Ω–∞—è —Ñ–æ—Ä–º–∞ —Å –∫–∞–ø—á–µ–π
**–§–∞–π–ª:** `accounts/forms.py`
- ‚úÖ –î–æ–±–∞–≤–ª–µ–Ω –∫–ª–∞—Å—Å `CustomSignupForm(AllauthSignupForm)`
- ‚úÖ –ò–Ω—Ç–µ–≥—Ä–∏—Ä–æ–≤–∞–Ω–æ –ø–æ–ª–µ `ReCaptchaField` —Å –≤–∏–¥–∂–µ—Ç–æ–º `ReCaptchaV3`
- ‚úÖ –ù–∞—Å—Ç—Ä–æ–µ–Ω—ã –∫—Ä–∞—Å–∏–≤—ã–µ —Å—Ç–∏–ª–∏ –¥–ª—è –ø–æ–ª–µ–π —Ñ–æ—Ä–º—ã
- ‚úÖ –î–æ–±–∞–≤–ª–µ–Ω–∞ –≤–∞–ª–∏–¥–∞—Ü–∏—è –∫–∞–ø—á–∏ –≤ –º–µ—Ç–æ–¥–µ `save()`

### 2. ‚öôÔ∏è –ù–∞—Å—Ç—Ä–æ–µ–Ω–∞ –∏–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è —Å django-allauth
**–§–∞–π–ª:** `config/settings_base.py`
- ‚úÖ –î–æ–±–∞–≤–ª–µ–Ω–æ: `ACCOUNT_FORMS = {'signup': 'accounts.forms.CustomSignupForm'}`
- ‚úÖ –ù–∞—Å—Ç—Ä–æ–µ–Ω–æ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ –∫–∞—Å—Ç–æ–º–Ω–æ–π —Ñ–æ—Ä–º—ã –≤–º–µ—Å—Ç–æ —Å—Ç–∞–Ω–¥–∞—Ä—Ç–Ω–æ–π

### 3. üé® –û–±–Ω–æ–≤–ª–µ–Ω —à–∞–±–ª–æ–Ω —Ä–µ–≥–∏—Å—Ç—Ä–∞—Ü–∏–∏
**–§–∞–π–ª:** `templates/account/signup.html`
- ‚úÖ –î–æ–±–∞–≤–ª–µ–Ω–æ –ø–æ–ª–µ –∫–∞–ø—á–∏: `{{ form.captcha }}`
- ‚úÖ –û–±—Ä–∞–±–æ—Ç–∫–∞ –æ—à–∏–±–æ–∫ –∫–∞–ø—á–∏ —Å –∫—Ä–∞—Å–∏–≤—ã–º–∏ —Å—Ç–∏–ª—è–º–∏
- ‚úÖ –ò–Ω—Ñ–æ—Ä–º–∞—Ü–∏–æ–Ω–Ω—ã–π –±–ª–æ–∫ "–§–æ—Ä–º–∞ –∑–∞—â–∏—â–µ–Ω–∞ Google reCAPTCHA"
- ‚úÖ –ò–∫–æ–Ω–∫–∞ —â–∏—Ç–∞ –¥–ª—è –≤–∏–∑—É–∞–ª—å–Ω–æ–≥–æ –ø–æ–¥—Ç–≤–µ—Ä–∂–¥–µ–Ω–∏—è –∑–∞—â–∏—Ç—ã

### 4. üîß –ù–∞—Å—Ç—Ä–æ–π–∫–∏ –¥–ª—è –æ–∫—Ä—É–∂–µ–Ω–∏–π

#### –ü—Ä–æ–¥–∞–∫—à–µ–Ω (`config/settings_production.py`):
- ‚úÖ –†–µ–∞–ª—å–Ω—ã–µ –∫–ª—é—á–∏ Google reCAPTCHA v3
- ‚úÖ –î–æ–º–µ–Ω—ã: `dobrist.com`, `www.dobrist.com`
- ‚úÖ –ü–æ—Ä–æ–≥ –±–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç–∏: `0.85` (–≤—ã—Å–æ–∫–∏–π)

#### –†–∞–∑—Ä–∞–±–æ—Ç–∫–∞ (`config/settings_local_postgresql.py`):
- ‚úÖ –¢–µ—Å—Ç–æ–≤—ã–µ –∫–ª—é—á–∏ Google (–≤—Å–µ–≥–¥–∞ –ø—Ä–æ—Ö–æ–¥—è—Ç –ø—Ä–æ–≤–µ—Ä–∫—É)
- ‚úÖ –¢–∞–∫–æ–π –∂–µ –ø–æ—Ä–æ–≥ –±–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç–∏ –¥–ª—è –∫–æ–Ω—Å–∏—Å—Ç–µ–Ω—Ç–Ω–æ—Å—Ç–∏

### 5. üß™ –¢–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ –∏ –¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è
- ‚úÖ `test_recaptcha_setup.py` - –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∞—è –ø—Ä–æ–≤–µ—Ä–∫–∞ –Ω–∞—Å—Ç—Ä–æ–µ–∫
- ‚úÖ `test_recaptcha_quick.sh` - bash —Å–∫—Ä–∏–ø—Ç –¥–ª—è –±—ã—Å—Ç—Ä–æ–≥–æ —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏—è
- ‚úÖ `TESTING_RECAPTCHA_GUIDE.md` - –ø–æ–ª–Ω–æ–µ —Ä—É–∫–æ–≤–æ–¥—Å—Ç–≤–æ –ø–æ —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏—é
- ‚úÖ `RECAPTCHA_REGISTRATION_COMPLETE.md` - —Ç–µ—Ö–Ω–∏—á–µ—Å–∫–∞—è –¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è

## üõ°Ô∏è –ö–∞–∫ —ç—Ç–æ —Ä–∞–±–æ—Ç–∞–µ—Ç:

### –ù–µ–≤–∏–¥–∏–º–∞—è –∑–∞—â–∏—Ç–∞:
1. **reCAPTCHA v3 —Ä–∞–±–æ—Ç–∞–µ—Ç –≤ —Ñ–æ–Ω–µ** - –∞–Ω–∞–ª–∏–∑–∏—Ä—É–µ—Ç –ø–æ–≤–µ–¥–µ–Ω–∏–µ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è
2. **–ù–µ—Ç –≤–∏–¥–∏–º—ã—Ö —ç–ª–µ–º–µ–Ω—Ç–æ–≤** - –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–∏ –Ω–µ –≤–∏–¥—è—Ç –≥–∞–ª–æ—á–µ–∫ –∏–ª–∏ –≥–æ–ª–æ–≤–æ–ª–æ–º–æ–∫
3. **–ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∞—è –æ—Ü–µ–Ω–∫–∞** - –æ—Ç 0.0 (–±–æ—Ç) –¥–æ 1.0 (—á–µ–ª–æ–≤–µ–∫)
4. **–í—ã—Å–æ–∫–∏–π –ø–æ—Ä–æ–≥ 0.85** - –ø—Ä–æ–ø—É—Å–∫–∞—é—Ç—Å—è —Ç–æ–ª—å–∫–æ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–∏ —Å –≤—ã—Å–æ–∫–∏–º –¥–æ–≤–µ—Ä–∏–µ–º

### –ò–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è —Å allauth:
- –ö–∞—Å—Ç–æ–º–Ω–∞—è —Ñ–æ—Ä–º–∞ —Ä–∞—Å—à–∏—Ä—è–µ—Ç —Å—Ç–∞–Ω–¥–∞—Ä—Ç–Ω—É—é —Ñ–æ—Ä–º—É allauth
- –°–æ—Ö—Ä–∞–Ω—è–µ—Ç—Å—è –≤—Å—è —Ñ—É–Ω–∫—Ü–∏–æ–Ω–∞–ª—å–Ω–æ—Å—Ç—å (–≤–∞–ª–∏–¥–∞—Ü–∏—è, —Ä–µ–¥–∏—Ä–µ–∫—Ç—ã –∏ —Ç.–¥.)
- –î–æ–±–∞–≤–ª—è–µ—Ç—Å—è —Ç–æ–ª—å–∫–æ –ø—Ä–æ–≤–µ—Ä–∫–∞ –∫–∞–ø—á–∏

## üìä –¢–µ–∫—É—â–∏–π —Å—Ç–∞—Ç—É—Å:

### ‚úÖ –ì–æ—Ç–æ–≤–æ –∫ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—é:
- [x] –§–æ—Ä–º–∞ —Ä–µ–≥–∏—Å—Ç—Ä–∞—Ü–∏–∏ –∑–∞—â–∏—â–µ–Ω–∞ –æ—Ç –±–æ—Ç–æ–≤
- [x] –ö—Ä–∞—Å–∏–≤—ã–π UI —Å –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏–µ–π –æ –∑–∞—â–∏—Ç–µ
- [x] –ù–∞—Å—Ç—Ä–æ–π–∫–∏ –¥–ª—è –ø—Ä–æ–¥–∞–∫—à–µ–Ω–∞ –∏ —Ä–∞–∑—Ä–∞–±–æ—Ç–∫–∏
- [x] –¢–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ –∏ –¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è
- [x] –°–æ–≤–º–µ—Å—Ç–∏–º–æ—Å—Ç—å —Å django-allauth

### üîÑ –°–ª–µ–¥—É—é—â–∏–µ —à–∞–≥–∏:
1. **–¢–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ:** `python test_recaptcha_setup.py`
2. **–õ–æ–∫–∞–ª—å–Ω—ã–π –∑–∞–ø—É—Å–∫:** `python manage.py runserver`
3. **–ü—Ä–æ–≤–µ—Ä–∫–∞ —Ñ–æ—Ä–º—ã:** `http://127.0.0.1:8000/accounts/signup/`
4. **–î–µ–ø–ª–æ–π:** `git add . && git commit && git push && ./deploy.sh`

## üéâ –†–µ–∑—É–ª—å—Ç–∞—Ç:

### –î–æ –≤–Ω–µ–¥—Ä–µ–Ω–∏—è:
- ‚ùå –§–æ—Ä–º–∞ —Ä–µ–≥–∏—Å—Ç—Ä–∞—Ü–∏–∏ –Ω–µ –∑–∞—â–∏—â–µ–Ω–∞
- ‚ùå –í–æ–∑–º–æ–∂–Ω–∞ –º–∞—Å—Å–æ–≤–∞—è —Ä–µ–≥–∏—Å—Ç—Ä–∞—Ü–∏—è –±–æ—Ç–æ–≤
- ‚ùå –ù–µ—Ç —Ñ–∏–ª—å—Ç—Ä–∞—Ü–∏–∏ –ø–æ–¥–æ–∑—Ä–∏—Ç–µ–ª—å–Ω–æ–π –∞–∫—Ç–∏–≤–Ω–æ—Å—Ç–∏

### –ü–æ—Å–ª–µ –≤–Ω–µ–¥—Ä–µ–Ω–∏—è:
- ‚úÖ –ù–µ–≤–∏–¥–∏–º–∞—è –∑–∞—â–∏—Ç–∞ –æ—Ç –±–æ—Ç–æ–≤ –∏ —Å–ø–∞–º–∞
- ‚úÖ –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏–π –∞–Ω–∞–ª–∏–∑ –ø–æ–≤–µ–¥–µ–Ω–∏—è –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π
- ‚úÖ –í—ã—Å–æ–∫–∏–π –ø–æ—Ä–æ–≥ –¥–æ–≤–µ—Ä–∏—è (85%)
- ‚úÖ –ö—Ä–∞—Å–∏–≤–∞—è –∏–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è –≤ —Å—É—â–µ—Å—Ç–≤—É—é—â–∏–π –¥–∏–∑–∞–π–Ω
- ‚úÖ –ò–Ω—Ñ–æ—Ä–º–∏—Ä–æ–≤–∞–Ω–∏–µ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π –æ –∑–∞—â–∏—Ç–µ

## üöÄ –ì–æ—Ç–æ–≤–æ –∫ –¥–µ–ø–ª–æ—é!

### –ö–æ–º–∞–Ω–¥—ã –¥–ª—è –¥–µ–ø–ª–æ—è:
```bash
git add .
git commit -m "‚úÖ –î–æ–±–∞–≤–ª–µ–Ω–∞ Google reCAPTCHA v3 –≤ —Ñ–æ—Ä–º—É —Ä–µ–≥–∏—Å—Ç—Ä–∞—Ü–∏–∏

üîê –ò–∑–º–µ–Ω–µ–Ω–∏—è:
- –ö–∞—Å—Ç–æ–º–Ω–∞—è —Ñ–æ—Ä–º–∞ CustomSignupForm —Å –Ω–µ–≤–∏–¥–∏–º–æ–π –∫–∞–ø—á–µ–π
- –ò–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è —Å django-allauth
- –û–±–Ω–æ–≤–ª–µ–Ω —à–∞–±–ª–æ–Ω signup.html
- –ù–∞—Å—Ç—Ä–æ–π–∫–∏ –¥–ª—è –ø—Ä–æ–¥–∞–∫—à–µ–Ω–∞ –∏ —Ä–∞–∑—Ä–∞–±–æ—Ç–∫–∏
- –ü–æ—Ä–æ–≥ –±–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç–∏: 0.85 (–≤—ã—Å–æ–∫–∏–π)
- –ü–æ–ª–Ω–∞—è –¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è –∏ —Ç–µ—Å—Ç—ã

üõ°Ô∏è –†–µ–∑—É–ª—å—Ç–∞—Ç: –ù–∞–¥–µ–∂–Ω–∞—è –∑–∞—â–∏—Ç–∞ –æ—Ç –±–æ—Ç–æ–≤ –ø—Ä–∏ —Ä–µ–≥–∏—Å—Ç—Ä–∞—Ü–∏–∏"

git push origin main
./deploy.sh
```

### –ú–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥ –ø–æ—Å–ª–µ –¥–µ–ø–ª–æ—è:
- üìä **Google reCAPTCHA Admin:** https://www.google.com/recaptcha/admin
- üìà **–°—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞:** –∫–æ–ª–∏—á–µ—Å—Ç–≤–æ –∑–∞–ø—Ä–æ—Å–æ–≤ –∏ –∑–∞–±–ª–æ–∫–∏—Ä–æ–≤–∞–Ω–Ω—ã—Ö –±–æ—Ç–æ–≤
- üîß **–ù–∞—Å—Ç—Ä–æ–π–∫–∞ –ø–æ—Ä–æ–≥–∞:** –ø—Ä–∏ –Ω–µ–æ–±—Ö–æ–¥–∏–º–æ—Å—Ç–∏ –∫–æ—Ä—Ä–µ–∫—Ç–∏—Ä–æ–≤–∫–∞ `RECAPTCHA_REQUIRED_SCORE`

---

## üîó –°–≤—è–∑–∞–Ω–Ω—ã–µ –∑–∞–¥–∞—á–∏ –≤ –ø—Ä–æ–µ–∫—Ç–µ:

### ‚úÖ –ó–∞–≤–µ—Ä—à–µ–Ω–Ω—ã–µ:
- [x] –ù–∞—Å—Ç—Ä–æ–π–∫–∞ DNS –¥–ª—è dobrist.com
- [x] SSL —Å–µ—Ä—Ç–∏—Ñ–∏–∫–∞—Ç –∏ HTTPS
- [x] –ü–æ—á—Ç–æ–≤—ã–π —Å–µ—Ä–≤–µ—Ä (Postfix + Dovecot)
- [x] reCAPTCHA –¥–ª—è —Ñ–æ—Ä–º—ã –æ–±—Ä–∞—Ç–Ω–æ–π —Å–≤—è–∑–∏
- [x] **reCAPTCHA –¥–ª—è —Ñ–æ—Ä–º—ã —Ä–µ–≥–∏—Å—Ç—Ä–∞—Ü–∏–∏** ‚Üê **–¢–û–õ–¨–ö–û –ß–¢–û –ó–ê–í–ï–†–®–ï–ù–û**

### üîÑ –í –ø–ª–∞–Ω–∞—Ö:
- [ ] –ò–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è —Ä–µ–∞–ª—å–Ω–æ–π –ø–ª–∞—Ç–µ–∂–Ω–æ–π —Å–∏—Å—Ç–µ–º—ã (YooKassa/Stripe)
- [ ] Email —É–≤–µ–¥–æ–º–ª–µ–Ω–∏—è –æ –∑–∞–∫–∞–∑–∞—Ö
- [ ] SEO –æ–ø—Ç–∏–º–∏–∑–∞—Ü–∏—è –∏ –º–µ—Ç–∞-—Ç–µ–≥–∏
- [ ] Rate limiting –¥–ª—è API
- [ ] –ú–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥ –±–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç–∏

---

**üéØ –ü—Ä–∞–≤–æ—Å–ª–∞–≤–Ω—ã–π –ø–æ—Ä—Ç–∞–ª —Ç–µ–ø–µ—Ä—å –∏–º–µ–µ—Ç –ø—Ä–æ—Ñ–µ—Å—Å–∏–æ–Ω–∞–ª—å–Ω—É—é –∑–∞—â–∏—Ç—É –æ—Ç –±–æ—Ç–æ–≤ –Ω–∞ —ç—Ç–∞–ø–µ —Ä–µ–≥–∏—Å—Ç—Ä–∞—Ü–∏–∏ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π!**

**üìà –ü—Ä–æ–≥—Ä–µ—Å—Å –ø—Ä–æ–µ–∫—Ç–∞:** ~98% –≥–æ—Ç–æ–≤–Ω–æ—Å—Ç–∏ –∫ –∫–æ–º–º–µ—Ä—á–µ—Å–∫–æ–º—É –∑–∞–ø—É—Å–∫—É! üöÄ
