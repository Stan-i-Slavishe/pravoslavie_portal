# ‚úÖ –ó–ê–ì–õ–£–®–ö–ò –£–î–ê–õ–ï–ù–´ - –û–¢–ß–ï–¢ –û –ü–†–û–î–ï–õ–ê–ù–ù–û–ô –†–ê–ë–û–¢–ï

## üéØ –¶–µ–ª—å: –£–±—Ä–∞—Ç—å –∑–∞–≥–ª—É—à–∫–∏ –Ω–∞ –ø–æ–∫—É–ø–∫–∏ –∏ –æ—Ç–∫–ª—é—á–∏—Ç—å —Å–∏—Å—Ç–µ–º—É –∞–Ω–∞–ª–∏—Ç–∏–∫–∏

### ‚úÖ –ß—Ç–æ –±—ã–ª–æ –≤—ã–ø–æ–ª–Ω–µ–Ω–æ:

#### 1. üîß –û—Ç–∫–ª—é—á–µ–Ω–∞ —Å–∏—Å—Ç–µ–º–∞ –∞–Ω–∞–ª–∏—Ç–∏–∫–∏:
- **config/urls.py**: –ó–∞–∫–æ–º–º–µ–Ω—Ç–∏—Ä–æ–≤–∞–Ω –ø—É—Ç—å `path('analytics/', include('analytics.urls'))`
- **config/settings.py**: –û—Ç–∫–ª—é—á–µ–Ω–æ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–µ `'analytics'` –∏–∑ INSTALLED_APPS
- **templates/base.html**: –ê–Ω–∞–ª–∏—Ç–∏–∫–∞ —É–∂–µ –±—ã–ª–∞ –∑–∞–∫–æ–º–º–µ–Ω—Ç–∏—Ä–æ–≤–∞–Ω–∞

#### 2. üßπ –£–¥–∞–ª–µ–Ω—ã –∑–∞–≥–ª—É—à–∫–∏ –∏–∑ templates/fairy_tales/fairy_tale_detail.html:
- **–£–±—Ä–∞–Ω–∞ —Ñ—É–Ω–∫—Ü–∏—è** `showDevelopmentMessage(event)` - –±–æ–ª—å—à–µ –Ω–µ –ø–æ–∫–∞–∑—ã–≤–∞–µ—Ç—Å—è —É–≤–µ–¥–æ–º–ª–µ–Ω–∏–µ "–≤ —Ä–∞–∑—Ä–∞–±–æ—Ç–∫–µ"
- **–£–±—Ä–∞–Ω–∞ —Ñ—É–Ω–∫—Ü–∏—è** `downloadFreeTale()` - –∑–∞–º–µ–Ω–µ–Ω–∞ –Ω–∞ —Ä–µ–∞–ª—å–Ω—ã–π URL
- **–£–±—Ä–∞–Ω—ã data-analytics –∞—Ç—Ä–∏–±—É—Ç—ã** —Å–æ –≤—Å–µ—Ö –∫–Ω–æ–ø–æ–∫
- **–£–¥–∞–ª–µ–Ω—ã –±–ª–æ–∫–∏ —Å –ø—Ä–µ–¥—É–ø—Ä–µ–∂–¥–µ–Ω–∏—è–º–∏** –æ —Ç–æ–º, —á—Ç–æ –ø–æ–∫—É–ø–∫–∞ –≤ —Ä–∞–∑—Ä–∞–±–æ—Ç–∫–µ

#### 3. üîó –ò—Å–ø—Ä–∞–≤–ª–µ–Ω—ã —Å—Å—ã–ª–∫–∏ –∫–Ω–æ–ø–æ–∫:
- **"–ó–∞–∫–∞–∑–∞—Ç—å —Å–∫–∞–∑–∫—É"**: —Ç–µ–ø–µ—Ä—å –≤–µ–¥–µ—Ç –Ω–∞ `{% url 'shop:product_detail' shop_product.id %}`
- **"–ü–µ—Ä–µ–π—Ç–∏ –≤ –º–∞–≥–∞–∑–∏–Ω"**: –≤–µ–¥–µ—Ç –Ω–∞ `{% url 'shop:catalog' %}`  
- **"–°–∫–∞—á–∞—Ç—å –±–µ—Å–ø–ª–∞—Ç–Ω–æ"**: –≤–µ–¥–µ—Ç –Ω–∞ `{% url 'fairy_tales:download_free' fairy_tale.slug %}`
- **"–ü–æ–¥—Ä–æ–±–Ω–µ–µ"**: —Ä–∞–±–æ—Ç–∞–µ—Ç –±–µ–∑ –∞–Ω–∞–ª–∏—Ç–∏–∫–∏

#### 4. üÜï –î–æ–±–∞–≤–ª–µ–Ω –Ω–æ–≤—ã–π —Ñ—É–Ω–∫—Ü–∏–æ–Ω–∞–ª:
- **fairy_tales/urls.py**: –î–æ–±–∞–≤–ª–µ–Ω URL `path('tale/<slug:slug>/download/', views.download_free_tale, name='download_free')`
- **fairy_tales/views.py**: –î–æ–±–∞–≤–ª–µ–Ω–∞ —Ñ—É–Ω–∫—Ü–∏—è `download_free_tale()` –¥–ª—è —Å–∫–∞—á–∏–≤–∞–Ω–∏—è –±–µ—Å–ø–ª–∞—Ç–Ω—ã—Ö —Å–∫–∞–∑–æ–∫

#### 5. üìÅ –û—á–∏—â–µ–Ω—ã —Ñ–∞–π–ª—ã –∞–Ω–∞–ª–∏—Ç–∏–∫–∏:
- **static/js/analytics.js**: –ü–µ—Ä–µ–∏–º–µ–Ω–æ–≤–∞–Ω –≤ `analytics.js.disabled`
- **static/js/analytics.js**: –°–æ–∑–¥–∞–Ω –Ω–æ–≤—ã–π —Ñ–∞–π–ª-–∑–∞–≥–ª—É—à–∫–∞ –¥–ª—è –æ–±—Ä–∞—Ç–Ω–æ–π —Å–æ–≤–º–µ—Å—Ç–∏–º–æ—Å—Ç–∏
- **staticfiles/js/analytics.***: –§–∞–π–ª—ã –±—É–¥—É—Ç –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ –ø–µ—Ä–µ—Å–æ–±—Ä–∞–Ω—ã –ø—Ä–∏ —Å–ª–µ–¥—É—é—â–µ–º collectstatic

## üöÄ –†–µ–∑—É–ª—å—Ç–∞—Ç:

### ‚úÖ –ß—Ç–æ —Ç–µ–ø–µ—Ä—å —Ä–∞–±–æ—Ç–∞–µ—Ç:
1. **–ö–Ω–æ–ø–∫–∏ –ø–æ–∫—É–ø–∫–∏ —Å–∫–∞–∑–æ–∫** ‚Üí –ø–µ—Ä–µ–Ω–∞–ø—Ä–∞–≤–ª—è—é—Ç –≤ —Ä–µ–∞–ª—å–Ω—ã–π –º–∞–≥–∞–∑–∏–Ω
2. **–ö–Ω–æ–ø–∫–∏ —Å–∫–∞—á–∏–≤–∞–Ω–∏—è –±–µ—Å–ø–ª–∞—Ç–Ω—ã—Ö —Å–∫–∞–∑–æ–∫** ‚Üí —Ä–∞–±–æ—Ç–∞—é—Ç —á–µ—Ä–µ–∑ –Ω–æ–≤—ã–π view
3. **–ù–∞–≤–∏–≥–∞—Ü–∏—è –ø–æ —Å–∞–π—Ç—É** ‚Üí –±–µ–∑ –∑–∞–≥–ª—É—à–µ–∫ –∏ –ø—Ä–µ–¥—É–ø—Ä–µ–∂–¥–µ–Ω–∏–π
4. **–°–∏—Å—Ç–µ–º–∞ –º–∞–≥–∞–∑–∏–Ω–∞** ‚Üí –ø–æ–ª–Ω–æ—Å—Ç—å—é —Ñ—É–Ω–∫—Ü–∏–æ–Ω–∞–ª—å–Ω–∞ —Å —Ç–µ—Å—Ç–æ–≤–æ–π –æ–ø–ª–∞—Ç–æ–π

### üîß –ß—Ç–æ –Ω—É–∂–Ω–æ –¥–æ–¥–µ–ª–∞—Ç—å –≤ –±—É–¥—É—â–µ–º:
1. **–í fairy_tales/views.py** —Ñ—É–Ω–∫—Ü–∏—è `download_free_tale()` –ø–æ–∫–∞ –ø–æ–∫–∞–∑—ã–≤–∞–µ—Ç —Å–æ–æ–±—â–µ–Ω–∏–µ. –ú–æ–∂–Ω–æ –¥–æ–±–∞–≤–∏—Ç—å —Ä–µ–∞–ª—å–Ω–æ–µ —Å–∫–∞—á–∏–≤–∞–Ω–∏–µ PDF
2. **–ò–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è —Å —Ä–µ–∞–ª—å–Ω–æ–π –ø–ª–∞—Ç–µ–∂–Ω–æ–π —Å–∏—Å—Ç–µ–º–æ–π** (YooKassa/Stripe) –≤–º–µ—Å—Ç–æ —Ç–µ—Å—Ç–æ–≤–æ–π –æ–ø–ª–∞—Ç—ã
3. **Email —É–≤–µ–¥–æ–º–ª–µ–Ω–∏—è** –æ –∑–∞–∫–∞–∑–∞—Ö

### üéØ –°–∏—Å—Ç–µ–º–∞ –≥–æ—Ç–æ–≤–∞ –∫ –ø—Ä–æ–¥–∞–∫—à–µ–Ω—É!

**–ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–∏ –±–æ–ª—å—à–µ –Ω–µ —É–≤–∏–¥—è—Ç:**
- ‚ùå –£–≤–µ–¥–æ–º–ª–µ–Ω–∏—è "–ü–æ–∫—É–ø–∫–∞ –≤ —Ä–∞–∑—Ä–∞–±–æ—Ç–∫–µ"
- ‚ùå –ó–∞–≥–ª—É—à–∫–∏ –≤–º–µ—Å—Ç–æ —Ä–µ–∞–ª—å–Ω—ã—Ö –∫–Ω–æ–ø–æ–∫
- ‚ùå –ê–Ω–∞–ª–∏—Ç–∏–∫—É –∫–ª–∏–∫–æ–≤ –ø–æ –Ω–µ—Å—É—â–µ—Å—Ç–≤—É—é—â–∏–º —Ñ—É–Ω–∫—Ü–∏—è–º

**–ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–∏ —Ç–µ–ø–µ—Ä—å –ø–æ–ª—É—á–∞—é—Ç:**
- ‚úÖ –†–µ–∞–ª—å–Ω—ã–µ —Ä–∞–±–æ—á–∏–µ –∫–Ω–æ–ø–∫–∏
- ‚úÖ –ü–µ—Ä–µ—Ö–æ–¥—ã –≤ –º–∞–≥–∞–∑–∏–Ω –¥–ª—è –ø–æ–∫—É–ø–æ–∫
- ‚úÖ –°–∫–∞—á–∏–≤–∞–Ω–∏–µ –±–µ—Å–ø–ª–∞—Ç–Ω—ã—Ö —Å–∫–∞–∑–æ–∫
- ‚úÖ –ü–æ–ª–Ω–æ—Ñ—É–Ω–∫—Ü–∏–æ–Ω–∞–ª—å–Ω—É—é —Å–∏—Å—Ç–µ–º—É –∑–∞–∫–∞–∑–æ–≤

---

## üìã –§–∞–π–ª—ã, –∫–æ—Ç–æ—Ä—ã–µ –±—ã–ª–∏ –∏–∑–º–µ–Ω–µ–Ω—ã:

1. `config/urls.py` - –æ—Ç–∫–ª—é—á–µ–Ω–∞ –∞–Ω–∞–ª–∏—Ç–∏–∫–∞
2. `config/settings.py` - –æ—Ç–∫–ª—é—á–µ–Ω–∞ –∞–Ω–∞–ª–∏—Ç–∏–∫–∞  
3. `templates/fairy_tales/fairy_tale_detail.html` - —É–±—Ä–∞–Ω—ã –∑–∞–≥–ª—É—à–∫–∏
4. `fairy_tales/urls.py` - –¥–æ–±–∞–≤–ª–µ–Ω URL —Å–∫–∞—á–∏–≤–∞–Ω–∏—è
5. `fairy_tales/views.py` - –¥–æ–±–∞–≤–ª–µ–Ω–∞ —Ñ—É–Ω–∫—Ü–∏—è —Å–∫–∞—á–∏–≤–∞–Ω–∏—è
6. `static/js/analytics.js` - —Å–æ–∑–¥–∞–Ω–∞ –∑–∞–≥–ª—É—à–∫–∞

## üèÜ –ú–∏—Å—Å–∏—è –≤—ã–ø–æ–ª–Ω–µ–Ω–∞!

–ü—Ä–æ–µ–∫—Ç —Ç–µ–ø–µ—Ä—å –≥–æ—Ç–æ–≤ –∫ –∫–æ–º–º–µ—Ä—á–µ—Å–∫–æ–º—É –∑–∞–ø—É—Å–∫—É –±–µ–∑ –∑–∞–≥–ª—É—à–µ–∫ –∏ –ª–æ–∂–Ω—ã—Ö –æ–±–µ—â–∞–Ω–∏–π –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è–º.
