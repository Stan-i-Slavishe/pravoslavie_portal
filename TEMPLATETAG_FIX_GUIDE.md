# üõ†Ô∏è –ò–°–ü–†–ê–í–õ–ï–ù–ò–ï –û–®–ò–ë–ö–ò TEMPLATETAG

## ‚ùå –ü—Ä–æ–±–ª–µ–º–∞:
Django –ø–æ–∫–∞–∑—ã–≤–∞–µ—Ç –æ—à–∏–±–∫—É: `'russian_pluralize' is not a registered tag library`

## ‚úÖ –ß—Ç–æ —è —Å–¥–µ–ª–∞–ª –¥–ª—è –∏—Å–ø—Ä–∞–≤–ª–µ–Ω–∏—è:

### 1. –°–æ–∑–¥–∞–ª templatetag –≤ –ø—Ä–∞–≤–∏–ª—å–Ω–æ–º –º–µ—Å—Ç–µ:
- ‚úÖ `core/templatetags/__init__.py` (–ø—É—Å—Ç–æ–π —Ñ–∞–π–ª)
- ‚úÖ `core/templatetags/russian_pluralize.py` (—Å —Ñ—É–Ω–∫—Ü–∏—è–º–∏ —Å–∫–ª–æ–Ω–µ–Ω–∏—è)

### 2. –û–±–Ω–æ–≤–∏–ª —à–∞–±–ª–æ–Ω:
- ‚úÖ –î–æ–±–∞–≤–∏–ª `{% load russian_pluralize %}` 
- ‚úÖ –ó–∞–º–µ–Ω–∏–ª –ø–µ—Ä–≤—ã–π –±–µ–π–¥–∂ –Ω–∞ `{{ playlist.calculated_stories_count|count_stories }}`

## üìù –ß—Ç–æ –Ω—É–∂–Ω–æ —Å–¥–µ–ª–∞—Ç—å –í–†–£–ß–ù–£–Æ:

### 1. –í —Ñ–∞–π–ª–µ `templates/stories/playlists_list.html` –Ω–∞–π—Ç–∏ –µ—â–µ 2 –º–µ—Å—Ç–∞:

**–ù–ê–ô–¢–ò:**
```django
{{ playlist.calculated_stories_count }} —Ä–∞—Å—Å–∫–∞–∑–æ–≤
```

**–ó–ê–ú–ï–ù–ò–¢–¨ –ù–ê:**
```django
{{ playlist.calculated_stories_count|count_stories }}
```

### 2. –ú–µ—Å—Ç–æ–ø–æ–ª–æ–∂–µ–Ω–∏–µ —ç—Ç–∏—Ö –º–µ—Å—Ç:
- üéØ –°–µ–∫—Ü–∏—è "–ö–∞—Å—Ç–æ–º–Ω–∞—è –æ–±–ª–æ–∂–∫–∞" (–æ–∫–æ–ª–æ —Å—Ç—Ä–æ–∫–∏ 399)
- üéØ –°–µ–∫—Ü–∏—è "–ì—Ä–∞–¥–∏–µ–Ω—Ç–Ω—ã–π —Ñ–æ–Ω –ø–æ —É–º–æ–ª—á–∞–Ω–∏—é" (–æ–∫–æ–ª–æ —Å—Ç—Ä–æ–∫–∏ 409)

### 3. –í–ê–ñ–ù–û! –ü–æ—Å–ª–µ –∏—Å–ø—Ä–∞–≤–ª–µ–Ω–∏—è:
1. **–ü–ï–†–ï–ó–ê–ü–£–°–¢–ò–¢–ï Django —Å–µ—Ä–≤–µ—Ä** (`python manage.py runserver`)
2. –û–±–Ω–æ–≤–∏—Ç–µ —Å—Ç—Ä–∞–Ω–∏—Ü—É –≤ –±—Ä–∞—É–∑–µ—Ä–µ
3. –û—à–∏–±–∫–∞ –¥–æ–ª–∂–Ω–∞ –∏—Å—á–µ–∑–Ω—É—Ç—å

## üì± –û–∂–∏–¥–∞–µ–º—ã–π —Ä–µ–∑—É–ª—å—Ç–∞—Ç:
- `1 —Ä–∞—Å—Å–∫–∞–∑` ‚úÖ
- `2 —Ä–∞—Å—Å–∫–∞–∑–∞` ‚úÖ 
- `5 —Ä–∞—Å—Å–∫–∞–∑–æ–≤` ‚úÖ
- `21 —Ä–∞—Å—Å–∫–∞–∑` ‚úÖ
- `22 —Ä–∞—Å—Å–∫–∞–∑–∞` ‚úÖ
- `25 —Ä–∞—Å—Å–∫–∞–∑–æ–≤` ‚úÖ

## üß™ –ö–∞–∫ —Ä–∞–±–æ—Ç–∞–µ—Ç —Å–∫–ª–æ–Ω–µ–Ω–∏–µ:
```python
def count_stories(count):
    if count % 10 == 1 and count % 100 != 11:
        return f"{count} —Ä–∞—Å—Å–∫–∞–∑"      # 1, 21, 31, 101, 121...
    elif count % 10 in [2,3,4] and count % 100 not in [12,13,14]:
        return f"{count} —Ä–∞—Å—Å–∫–∞–∑–∞"     # 2, 3, 4, 22, 23, 24...
    else:
        return f"{count} —Ä–∞—Å—Å–∫–∞–∑–æ–≤"    # 5, 6, 7, 11, 12, 13, 14, 15, 20, 25...
```

**–ü–æ—Å–ª–µ –∏—Å–ø—Ä–∞–≤–ª–µ–Ω–∏—è –∏ –ø–µ—Ä–µ–∑–∞–ø—É—Å–∫–∞ —Å–µ—Ä–≤–µ—Ä–∞ –ø–æ–∫–∞–∂–∏—Ç–µ —Ä–µ–∑—É–ª—å—Ç–∞—Ç!** üéØ
