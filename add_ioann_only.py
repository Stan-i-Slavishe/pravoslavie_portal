import os
import sys
import django

# –ù–∞—Å—Ç—Ä–æ–π–∫–∞ Django
os.environ.setdefault('DJANGO_SETTINGS_MODULE', 'config.settings')
django.setup()

from pwa.models import OrthodoxEvent, DailyOrthodoxInfo

print("üéÇ –î–æ–±–∞–≤–ª–µ–Ω–∏–µ –†–æ–∂–¥–µ—Å—Ç–≤–∞ –ò–æ–∞–Ω–Ω–∞ –ü—Ä–µ–¥—Ç–µ—á–∏ (7 –∏—é–ª—è)")
print("=" * 55)

# –ü—Ä–æ–≤–µ—Ä—è–µ–º, –µ—Å—Ç—å –ª–∏ —É–∂–µ —Å–æ–±—ã—Ç–∏–µ –Ω–∞ 7 –∏—é–ª—è
existing_events = OrthodoxEvent.objects.filter(month=7, day=7, title__icontains="–ò–æ–∞–Ω–Ω")

if existing_events.exists():
    print("‚úÖ –†–æ–∂–¥–µ—Å—Ç–≤–æ –ò–æ–∞–Ω–Ω–∞ –ü—Ä–µ–¥—Ç–µ—á–∏ —É–∂–µ –µ—Å—Ç—å –≤ –∫–∞–ª–µ–Ω–¥–∞—Ä–µ:")
    for event in existing_events:
        print(f"   üìÖ {event.title}")
        print(f"   ‚ú® –¢–∏–ø: {event.get_event_type_display()}")
else:
    print("üìÖ –î–æ–±–∞–≤–ª—è–µ–º –†–æ–∂–¥–µ—Å—Ç–≤–æ –ò–æ–∞–Ω–Ω–∞ –ü—Ä–µ–¥—Ç–µ—á–∏...")
    
    # –î–æ–±–∞–≤–ª—è–µ–º —Å–æ–±—ã—Ç–∏–µ
    event = OrthodoxEvent.objects.create(
        title="–†–æ–∂–¥–µ—Å—Ç–≤–æ —á–µ—Å—Ç–Ω–æ–≥–æ —Å–ª–∞–≤–Ω–æ–≥–æ –ü—Ä–æ—Ä–æ–∫–∞, –ü—Ä–µ–¥—Ç–µ—á–∏ –∏ –ö—Ä–µ—Å—Ç–∏—Ç–µ–ª—è –ì–æ—Å–ø–æ–¥–Ω—è –ò–æ–∞–Ω–Ω–∞",
        description="–í–µ–ª–∏–∫–∏–π –ø—Ä–∞–∑–¥–Ω–∏–∫ –≤ —á–µ—Å—Ç—å —Ä–æ–∂–¥–µ–Ω–∏—è —Å–≤. –ò–æ–∞–Ω–Ω–∞ –ü—Ä–µ–¥—Ç–µ—á–∏, –∫–æ—Ç–æ—Ä—ã–π –±—ã–ª –ø—Ä–µ–¥—É–≥–æ—Ç–æ–≤–∞–Ω –ë–æ–≥–æ–º –±—ã—Ç—å –ü—Ä–µ–¥—Ç–µ—á–µ–π –ú–µ—Å—Å–∏–∏ –∏ –∫—Ä–µ—Å—Ç–∏—Ç—å –•—Ä–∏—Å—Ç–∞ –≤ –≤–æ–¥–∞—Ö –ò–æ—Ä–¥–∞–Ω–∞.",
        event_type="great_feast",
        month=7,
        day=7,
        is_old_style=False,
        is_movable=False
    )
    
    print(f"‚úÖ –î–æ–±–∞–≤–ª–µ–Ω–æ: {event.title}")
    print(f"‚ú® –¢–∏–ø: {event.get_event_type_display()}")

# –ü—Ä–æ–≤–µ—Ä—è–µ–º –µ–∂–µ–¥–Ω–µ–≤–Ω—É—é –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏—é –¥–ª—è 7 –∏—é–ª—è
try:
    daily_info = DailyOrthodoxInfo.objects.get(month=7, day=7)
    print(f"\nüìñ –ï–∂–µ–¥–Ω–µ–≤–Ω–∞—è –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏—è –¥–ª—è 7 –∏—é–ª—è —É–∂–µ –µ—Å—Ç—å:")
    print(f"   üçΩÔ∏è –ü–æ—Å—Ç: {daily_info.get_fasting_type_display()}")
    print(f"   üìù –û–ø–∏—Å–∞–Ω–∏–µ: {daily_info.fasting_description}")
except DailyOrthodoxInfo.DoesNotExist:
    print(f"\nüìñ –î–æ–±–∞–≤–ª—è–µ–º –µ–∂–µ–¥–Ω–µ–≤–Ω—É—é –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏—é –¥–ª—è 7 –∏—é–ª—è...")
    
    daily_info = DailyOrthodoxInfo.objects.create(
        month=7,
        day=7,
        fasting_type='no_fast',
        fasting_description='–†–æ–∂–¥–µ—Å—Ç–≤–æ –ò–æ–∞–Ω–Ω–∞ –ü—Ä–µ–¥—Ç–µ—á–∏ (–≤–µ–ª–∏–∫–∏–π –ø—Ä–∞–∑–¥–Ω–∏–∫)',
        allowed_food='–õ—é–±–∞—è –ø–∏—â–∞ (–ø—Ä–∞–∑–¥–Ω–∏—á–Ω—ã–π –¥–µ–Ω—å)',
        spiritual_note='üéâ –†–æ–∂–¥–µ—Å—Ç–≤–æ —á–µ—Å—Ç–Ω–æ–≥–æ —Å–ª–∞–≤–Ω–æ–≥–æ –ü—Ä–æ—Ä–æ–∫–∞, –ü—Ä–µ–¥—Ç–µ—á–∏ –∏ –ö—Ä–µ—Å—Ç–∏—Ç–µ–ª—è –ì–æ—Å–ø–æ–¥–Ω—è –ò–æ–∞–Ω–Ω–∞! –í–µ–ª–∏–∫–∏–π –ø—Ä–∞–∑–¥–Ω–∏–∫ –≤ —á–µ—Å—Ç—å —Ä–æ–∂–¥–µ–Ω–∏—è —Å–≤—è—Ç–æ–≥–æ, –∫–æ—Ç–æ—Ä—ã–π –ø—Ä–∏–≥–æ—Ç–æ–≤–∏–ª –ø—É—Ç—å –ì–æ—Å–ø–æ–¥—É.',
        gospel_reading='–õ–∫. 1:1-25, 57-68, 76, 80',
        epistle_reading='–†–∏–º. 13:11 - 14:4'
    )
    
    print(f"‚úÖ –î–æ–±–∞–≤–ª–µ–Ω–∞ –µ–∂–µ–¥–Ω–µ–≤–Ω–∞—è –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏—è –¥–ª—è 7 –∏—é–ª—è")

print("\nüéâ –ì–æ—Ç–æ–≤–æ! 7 –∏—é–ª—è —Ç–µ–ø–µ—Ä—å –¥–æ–ª–∂–Ω–æ –æ—Ç–æ–±—Ä–∞–∂–∞—Ç—å—Å—è –≤ –∫–∞–ª–µ–Ω–¥–∞—Ä–µ")
print("üîÑ –ü–µ—Ä–µ–∑–∞–≥—Ä—É–∑–∏—Ç–µ —Å—Ç—Ä–∞–Ω–∏—Ü—É –∫–∞–ª–µ–Ω–¥–∞—Ä—è, —á—Ç–æ–±—ã —É–≤–∏–¥–µ—Ç—å –†–æ–∂–¥–µ—Å—Ç–≤–æ –ò–æ–∞–Ω–Ω–∞ –ü—Ä–µ–¥—Ç–µ—á–∏")
