// –ê–í–¢–û–ú–ê–¢–ò–ß–ï–°–ö–û–ï –î–û–ë–ê–í–õ–ï–ù–ò–ï –ö–ù–û–ü–ö–ò –°–í–û–†–ê–ß–ò–í–ê–ù–ò–Ø –ö –ú–û–ë–ò–õ–¨–ù–û–ú–£ –í–ò–î–ñ–ï–¢–£ –ü–õ–ï–ô–õ–ò–°–¢–û–í
(function() {
    'use strict';
    
    console.log('üì± –ò–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏—è –∫–Ω–æ–ø–∫–∏ —Å–≤–æ—Ä–∞—á–∏–≤–∞–Ω–∏—è –¥–ª—è –º–æ–±–∏–ª—å–Ω—ã—Ö –ø–ª–µ–π–ª–∏—Å—Ç–æ–≤...');
    
    // –§—É–Ω–∫—Ü–∏—è –¥–ª—è –ø–æ–∏—Å–∫–∞ –º–æ–±–∏–ª—å–Ω–æ–≥–æ –≤–∏–¥–∂–µ—Ç–∞ –ø–ª–µ–π–ª–∏—Å—Ç–æ–≤ (–£–õ–£–ß–®–ï–ù–ù–ê–Ø –í–ï–†–°–ò–Ø)
    function findMobilePlaylistWidget() {
        console.log('üîç –ü–æ–∏—Å–∫ –º–æ–±–∏–ª—å–Ω–æ–≥–æ –≤–∏–¥–∂–µ—Ç–∞ –ø–ª–µ–π–ª–∏—Å—Ç–æ–≤...');
        
        // –í–∞—Ä–∏–∞–Ω—Ç 1: –ü–æ–∏—Å–∫ –ø–æ —Ç–µ–∫—Å—Ç—É "üéµ –ü–ª–µ–π–ª–∏—Å—Ç—ã" –∏–ª–∏ –ø—Ä–æ—Å—Ç–æ "–ü–ª–µ–π–ª–∏—Å—Ç—ã"
        const textVariants = ['üéµ –ü–ª–µ–π–ª–∏—Å—Ç—ã', '–ü–ª–µ–π–ª–∏—Å—Ç—ã', 'üì± –ú–æ–∏ –ø–ª–µ–π–ª–∏—Å—Ç—ã'];
        for (const text of textVariants) {
            const elements = document.querySelectorAll('*');
            for (const element of elements) {
                if (element.textContent && element.textContent.includes(text)) {
                    const widget = element.closest('.card, .mobile-widget, div[style*="background"], div[class*="mobile"], .widget, .playlist-widget');
                    if (widget) {
                        console.log(`‚úÖ –ù–∞–π–¥–µ–Ω –º–æ–±–∏–ª—å–Ω—ã–π –≤–∏–¥–∂–µ—Ç –ø–ª–µ–π–ª–∏—Å—Ç–æ–≤ –ø–æ —Ç–µ–∫—Å—Ç—É "${text}":`, widget);
                        return widget;
                    }
                }
            }
        }
        
        // –í–∞—Ä–∏–∞–Ω—Ç 2: –ü–æ–∏—Å–∫ –ø–æ –∫—Ä–∞—Å–Ω–æ–º—É —Ñ–æ–Ω—É (—Ä–∞–∑–Ω—ã–µ –≤–∞—Ä–∏–∞–Ω—Ç—ã —Ü–≤–µ—Ç–æ–≤)
        const redSelectors = [
            '[style*="background-color: rgb(231, 76, 60)"]',
            '[style*="background: #e74c3c"]',
            '[style*="background-color: #e74c3c"]',
            '.bg-danger',
            '.bg-primary',
            '[style*="background-color: red"]',
            '[style*="background: red"]'
        ];
        
        for (const selector of redSelectors) {
            const elements = document.querySelectorAll(selector);
            for (const element of elements) {
                if (element.textContent && (element.textContent.includes('–ü–ª–µ–π–ª–∏—Å—Ç—ã') || element.textContent.includes('–ø–ª–µ–π–ª–∏—Å—Ç'))) {
                    console.log(`‚úÖ –ù–∞–π–¥–µ–Ω –º–æ–±–∏–ª—å–Ω—ã–π –≤–∏–¥–∂–µ—Ç –ø–ª–µ–π–ª–∏—Å—Ç–æ–≤ –ø–æ —Å–µ–ª–µ–∫—Ç–æ—Ä—É "${selector}":`, element);
                    return element;
                }
            }
        }
        
        // –í–∞—Ä–∏–∞–Ω—Ç 3: –ü–æ–∏—Å–∫ –ø–æ –∏–∫–æ–Ω–∫–∞–º (—Ä–∞–∑–ª–∏—á–Ω—ã–µ –≤–∞—Ä–∏–∞–Ω—Ç—ã)
        const iconSelectors = [
            '.bi-bookmark', '.bi-bookmark-plus', '.bi-music-note-list',
            '.bi-list', '.bi-collection', '.bi-folder',
            'i[class*="bookmark"]', 'i[class*="music"]', 'i[class*="list"]'
        ];
        
        for (const selector of iconSelectors) {
            const icons = document.querySelectorAll(selector);
            for (const icon of icons) {
                const container = icon.closest('.card, div[style*="background"], .widget, .mobile-widget, .playlist-container');
                if (container && (container.textContent.includes('–ü–ª–µ–π–ª–∏—Å—Ç—ã') || container.textContent.includes('–ø–ª–µ–π–ª–∏—Å—Ç'))) {
                    console.log(`‚úÖ –ù–∞–π–¥–µ–Ω –º–æ–±–∏–ª—å–Ω—ã–π –≤–∏–¥–∂–µ—Ç –ø–ª–µ–π–ª–∏—Å—Ç–æ–≤ –ø–æ –∏–∫–æ–Ω–∫–µ "${selector}":`, container);
                    return container;
                }
            }
        }
        
        // –í–∞—Ä–∏–∞–Ω—Ç 4: –ü–æ–∏—Å–∫ –ø–æ –∫–ª–∞—Å—Å–∞–º, —Å–≤—è–∑–∞–Ω–Ω—ã–º —Å –ø–ª–µ–π–ª–∏—Å—Ç–∞–º–∏
        const playlistSelectors = [
            '.mobile-playlist-widget', '.playlist-widget', '.user-playlists',
            '.playlist-container', '.playlist-sidebar', '[class*="playlist"]',
            '[id*="playlist"]', '.mobile-widget'
        ];
        
        for (const selector of playlistSelectors) {
            const elements = document.querySelectorAll(selector);
            for (const element of elements) {
                if (element.textContent && (element.textContent.includes('–ü–ª–µ–π–ª–∏—Å—Ç—ã') || element.textContent.includes('–ø–ª–µ–π–ª–∏—Å—Ç'))) {
                    console.log(`‚úÖ –ù–∞–π–¥–µ–Ω –º–æ–±–∏–ª—å–Ω—ã–π –≤–∏–¥–∂–µ—Ç –ø–ª–µ–π–ª–∏—Å—Ç–æ–≤ –ø–æ –∫–ª–∞—Å—Å—É "${selector}":`, element);
                    return element;
                }
            }
        }
        
        // –í–∞—Ä–∏–∞–Ω—Ç 5: –ü–æ–∏—Å–∫ –ø–æ –º–æ–±–∏–ª—å–Ω—ã–º –∫–ª–∞—Å—Å–∞–º Bootstrap
        const mobileSelectors = [
            '.d-lg-none', '.d-md-none', '.d-sm-block',
            '[class*="mobile"]', '.visible-xs', '.hidden-lg'
        ];
        
        for (const selector of mobileSelectors) {
            const elements = document.querySelectorAll(selector);
            for (const element of elements) {
                if (element.textContent && (element.textContent.includes('–ü–ª–µ–π–ª–∏—Å—Ç—ã') || element.textContent.includes('–ø–ª–µ–π–ª–∏—Å—Ç'))) {
                    console.log(`‚úÖ –ù–∞–π–¥–µ–Ω –º–æ–±–∏–ª—å–Ω—ã–π –≤–∏–¥–∂–µ—Ç –ø–ª–µ–π–ª–∏—Å—Ç–æ–≤ –ø–æ –º–æ–±–∏–ª—å–Ω–æ–º—É –∫–ª–∞—Å—Å—É "${selector}":`, element);
                    return element;
                }
            }
        }
        
        console.log('‚ùå –ú–æ–±–∏–ª—å–Ω—ã–π –≤–∏–¥–∂–µ—Ç –ø–ª–µ–π–ª–∏—Å—Ç–æ–≤ –Ω–µ –Ω–∞–π–¥–µ–Ω');
        return null;
    }
    
    // –§—É–Ω–∫—Ü–∏—è –¥–ª—è —Å–æ–∑–¥–∞–Ω–∏—è –∫–Ω–æ–ø–∫–∏ —Å–≤–æ—Ä–∞—á–∏–≤–∞–Ω–∏—è
    function createCollapseButton() {
        const button = document.createElement('button');
        button.className = 'btn btn-sm btn-outline-light ms-2';
        button.style.cssText = `
            padding: 6px 10px;
            border-radius: 6px;
            border: 1px solid rgba(255,255,255,0.3);
            background: rgba(255,255,255,0.1);
            color: white;
            transition: all 0.2s ease;
            min-width: 36px;
            display: flex;
            align-items: center;
            justify-content: center;
        `;
        button.title = '–°–≤–µ—Ä–Ω—É—Ç—å/—Ä–∞–∑–≤–µ—Ä–Ω—É—Ç—å –ø–ª–µ–π–ª–∏—Å—Ç—ã';
        button.id = 'mobilePlaylistCollapseBtn';
        
        const icon = document.createElement('i');
        icon.className = 'bi bi-chevron-down';
        icon.id = 'mobilePlaylistCollapseIcon';
        icon.style.cssText = 'font-size: 0.9rem; transition: transform 0.3s ease;';
        
        button.appendChild(icon);
        return button;
    }
    
    // –§—É–Ω–∫—Ü–∏—è –¥–ª—è –¥–æ–±–∞–≤–ª–µ–Ω–∏—è –∫–Ω–æ–ø–∫–∏ –∫ —Å—É—â–µ—Å—Ç–≤—É—é—â–µ–º—É –≤–∏–¥–∂–µ—Ç—É
    function addCollapseButtonToWidget(widget) {
        // –ü—Ä–æ–≤–µ—Ä—è–µ–º, –Ω–µ –¥–æ–±–∞–≤–ª–µ–Ω–∞ –ª–∏ —É–∂–µ –∫–Ω–æ–ø–∫–∞
        if (document.getElementById('mobilePlaylistCollapseBtn')) {
            console.log('‚ö†Ô∏è –ö–Ω–æ–ø–∫–∞ —Å–≤–æ—Ä–∞—á–∏–≤–∞–Ω–∏—è —É–∂–µ —Å—É—â–µ—Å—Ç–≤—É–µ—Ç');
            return;
        }
        
        // –ò—â–µ–º –∫–Ω–æ–ø–∫—É —Å –∏–∫–æ–Ω–∫–æ–π bookmark (–∫–Ω–æ–ø–∫–∞ "–°–æ—Ö—Ä–∞–Ω–∏—Ç—å")
        const saveButton = widget.querySelector('.bi-bookmark, .bi-bookmark-plus, .bi-plus')?.closest('button');
        
        if (saveButton) {
            // –î–æ–±–∞–≤–ª—è–µ–º –∫–Ω–æ–ø–∫—É —Ä—è–¥–æ–º —Å –∫–Ω–æ–ø–∫–æ–π "–°–æ—Ö—Ä–∞–Ω–∏—Ç—å"
            const collapseButton = createCollapseButton();
            
            // –ù–∞—Ö–æ–¥–∏–º —Ä–æ–¥–∏—Ç–µ–ª—å—Å–∫–∏–π –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä –∫–Ω–æ–ø–æ–∫
            const buttonContainer = saveButton.parentElement;
            
            // –£–±–µ–∂–¥–∞–µ–º—Å—è —á—Ç–æ –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä –∏–º–µ–µ—Ç –ø—Ä–∞–≤–∏–ª—å–Ω—ã–µ –∫–ª–∞—Å—Å—ã
            if (!buttonContainer.classList.contains('d-flex')) {
                buttonContainer.classList.add('d-flex', 'align-items-center');
            }
            
            // –í—Å—Ç–∞–≤–ª—è–µ–º –∫–Ω–æ–ø–∫—É –ø–æ—Å–ª–µ –∫–Ω–æ–ø–∫–∏ —Å–æ—Ö—Ä–∞–Ω–µ–Ω–∏—è
            saveButton.insertAdjacentElement('afterend', collapseButton);
            
            // –î–æ–±–∞–≤–ª—è–µ–º –æ–±—Ä–∞–±–æ—Ç—á–∏–∫ —Å–æ–±—ã—Ç–∏—è
            collapseButton.addEventListener('click', toggleMobilePlaylistContent);
            
            console.log('‚úÖ –ö–Ω–æ–ø–∫–∞ —Å–≤–æ—Ä–∞—á–∏–≤–∞–Ω–∏—è –¥–æ–±–∞–≤–ª–µ–Ω–∞ –∫ –º–æ–±–∏–ª—å–Ω–æ–º—É –≤–∏–¥–∂–µ—Ç—É —Ä—è–¥–æ–º —Å –∫–Ω–æ–ø–∫–æ–π —Å–æ—Ö—Ä–∞–Ω–µ–Ω–∏—è');
            return true;
        } else {
            // –ï—Å–ª–∏ –∫–Ω–æ–ø–∫–∞ "–°–æ—Ö—Ä–∞–Ω–∏—Ç—å" –Ω–µ –Ω–∞–π–¥–µ–Ω–∞, –¥–æ–±–∞–≤–ª—è–µ–º –≤ –∑–∞–≥–æ–ª–æ–≤–æ–∫
            const header = widget.querySelector('h3, h4, h5, h6, .fw-bold, [style*="font-weight"]');
            if (header) {
                const headerContainer = header.parentElement;
                
                // –î–µ–ª–∞–µ–º –∑–∞–≥–æ–ª–æ–≤–æ–∫ flex –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä–æ–º
                headerContainer.style.display = 'flex';
                headerContainer.style.justifyContent = 'space-between';
                headerContainer.style.alignItems = 'center';
                
                // –°–æ–∑–¥–∞–µ–º –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä –¥–ª—è –∫–Ω–æ–ø–æ–∫
                const buttonGroup = document.createElement('div');
                buttonGroup.className = 'd-flex align-items-center';
                
                const collapseButton = createCollapseButton();
                buttonGroup.appendChild(collapseButton);
                
                headerContainer.appendChild(buttonGroup);
                
                // –î–æ–±–∞–≤–ª—è–µ–º –æ–±—Ä–∞–±–æ—Ç—á–∏–∫ —Å–æ–±—ã—Ç–∏—è
                collapseButton.addEventListener('click', toggleMobilePlaylistContent);
                
                console.log('‚úÖ –ö–Ω–æ–ø–∫–∞ —Å–≤–æ—Ä–∞—á–∏–≤–∞–Ω–∏—è –¥–æ–±–∞–≤–ª–µ–Ω–∞ –≤ –∑–∞–≥–æ–ª–æ–≤–æ–∫ –≤–∏–¥–∂–µ—Ç–∞');
                return true;
            }
        }
        
        console.log('‚ùå –ù–µ —É–¥–∞–ª–æ—Å—å –Ω–∞–π—Ç–∏ –º–µ—Å—Ç–æ –¥–ª—è –¥–æ–±–∞–≤–ª–µ–Ω–∏—è –∫–Ω–æ–ø–∫–∏');
        return false;
    }
    
    // –§—É–Ω–∫—Ü–∏—è —Å–≤–æ—Ä–∞—á–∏–≤–∞–Ω–∏—è/—Ä–∞–∑–≤–æ—Ä–∞—á–∏–≤–∞–Ω–∏—è –∫–æ–Ω—Ç–µ–Ω—Ç–∞
    function toggleMobilePlaylistContent() {
        const button = document.getElementById('mobilePlaylistCollapseBtn');
        const icon = document.getElementById('mobilePlaylistCollapseIcon');
        const widget = button.closest('.card, div[style*="background"]');
        
        if (!widget) {
            console.log('‚ùå –í–∏–¥–∂–µ—Ç –Ω–µ –Ω–∞–π–¥–µ–Ω');
            return;
        }
        
        // –ò—â–µ–º –∫–æ–Ω—Ç–µ–Ω—Ç –ø–ª–µ–π–ª–∏—Å—Ç–æ–≤ (–≤—Å–µ —á—Ç–æ –Ω–µ –∑–∞–≥–æ–ª–æ–≤–æ–∫)
        const allElements = Array.from(widget.children);
        const header = allElements.find(el => 
            el.querySelector('h1, h2, h3, h4, h5, h6') || 
            el.textContent.includes('–ü–ª–µ–π–ª–∏—Å—Ç—ã')
        );
        
        const contentElements = allElements.filter(el => el !== header);
        
        if (contentElements.length === 0) {
            console.log('‚ùå –ö–æ–Ω—Ç–µ–Ω—Ç –ø–ª–µ–π–ª–∏—Å—Ç–æ–≤ –Ω–µ –Ω–∞–π–¥–µ–Ω');
            return;
        }
        
        // –ü—Ä–æ–≤–µ—Ä—è–µ–º —Ç–µ–∫—É—â–µ–µ —Å–æ—Å—Ç–æ—è–Ω–∏–µ
        const isCollapsed = contentElements[0].style.display === 'none';
        
        if (isCollapsed) {
            // –†–∞–∑–≤–æ—Ä–∞—á–∏–≤–∞–µ–º
            contentElements.forEach(el => {
                el.style.display = '';
                el.style.opacity = '0';
                el.style.transform = 'translateY(-10px)';
                el.style.transition = 'all 0.3s ease';
                
                setTimeout(() => {
                    el.style.opacity = '1';
                    el.style.transform = 'translateY(0)';
                }, 10);
            });
            
            icon.classList.remove('bi-chevron-up');
            icon.classList.add('bi-chevron-down');
            button.title = '–°–≤–µ—Ä–Ω—É—Ç—å –ø–ª–µ–π–ª–∏—Å—Ç—ã';
            
            // –í–∏–±—Ä–∞—Ü–∏—è –µ—Å–ª–∏ –ø–æ–¥–¥–µ—Ä–∂–∏–≤–∞–µ—Ç—Å—è
            if (navigator.vibrate) {
                navigator.vibrate(50);
            }
            
            console.log('üìÇ –ú–æ–±–∏–ª—å–Ω—ã–µ –ø–ª–µ–π–ª–∏—Å—Ç—ã —Ä–∞–∑–≤–µ—Ä–Ω—É—Ç—ã');
            
        } else {
            // –°–≤–æ—Ä–∞—á–∏–≤–∞–µ–º
            contentElements.forEach(el => {
                el.style.transition = 'all 0.3s ease';
                el.style.opacity = '0';
                el.style.transform = 'translateY(-10px)';
                
                setTimeout(() => {
                    el.style.display = 'none';
                }, 300);
            });
            
            icon.classList.remove('bi-chevron-down');
            icon.classList.add('bi-chevron-up');
            button.title = '–†–∞–∑–≤–µ—Ä–Ω—É—Ç—å –ø–ª–µ–π–ª–∏—Å—Ç—ã';
            
            // –í–∏–±—Ä–∞—Ü–∏—è –µ—Å–ª–∏ –ø–æ–¥–¥–µ—Ä–∂–∏–≤–∞–µ—Ç—Å—è
            if (navigator.vibrate) {
                navigator.vibrate(30);
            }
            
            console.log('üìÅ –ú–æ–±–∏–ª—å–Ω—ã–µ –ø–ª–µ–π–ª–∏—Å—Ç—ã —Å–≤–µ—Ä–Ω—É—Ç—ã');
        }
        
        // –ê–Ω–∏–º–∞—Ü–∏—è –∫–Ω–æ–ø–∫–∏
        button.style.transform = 'scale(0.95)';
        setTimeout(() => {
            button.style.transform = 'scale(1)';
        }, 150);
    }
    
    // –î–æ–±–∞–≤–ª—è–µ–º CSS —Å—Ç–∏–ª–∏
    function addStyles() {
        if (document.getElementById('mobilePlaylistCollapseStyles')) return;
        
        const style = document.createElement('style');
        style.id = 'mobilePlaylistCollapseStyles';
        style.textContent = `
            #mobilePlaylistCollapseBtn:hover {
                background: rgba(255,255,255,0.2) !important;
                border-color: rgba(255,255,255,0.5) !important;
                transform: translateY(-1px);
                box-shadow: 0 2px 6px rgba(0,0,0,0.2);
            }
            
            #mobilePlaylistCollapseBtn:active {
                transform: scale(0.95);
            }
            
            #mobilePlaylistCollapseIcon {
                transition: transform 0.3s ease;
            }
            
            /* –ê–Ω–∏–º–∞—Ü–∏—è –¥–ª—è –º–æ–±–∏–ª—å–Ω–æ–≥–æ –≤–∏–¥–∂–µ—Ç–∞ */
            .mobile-playlist-content {
                transition: all 0.3s ease;
            }
            
            /* –ê–¥–∞–ø—Ç–∏–≤–Ω–æ—Å—Ç—å - –ø–æ–∫–∞–∑—ã–≤–∞–µ–º —Ç–æ–ª—å–∫–æ –Ω–∞ –º–æ–±–∏–ª—å–Ω—ã—Ö */
            @media (min-width: 992px) {
                #mobilePlaylistCollapseBtn {
                    display: none !important;
                }
            }
        `;
        
        document.head.appendChild(style);
        console.log('üé® CSS —Å—Ç–∏–ª–∏ –¥–æ–±–∞–≤–ª–µ–Ω—ã');
    }
    
    // –û—Å–Ω–æ–≤–Ω–∞—è —Ñ—É–Ω–∫—Ü–∏—è –∏–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏–∏
    function init() {
        console.log('üîç –ü–æ–∏—Å–∫ –º–æ–±–∏–ª—å–Ω–æ–≥–æ –≤–∏–¥–∂–µ—Ç–∞ –ø–ª–µ–π–ª–∏—Å—Ç–æ–≤...');
        
        const widget = findMobilePlaylistWidget();
        
        if (widget) {
            console.log('‚úÖ –ú–æ–±–∏–ª—å–Ω—ã–π –≤–∏–¥–∂–µ—Ç –ø–ª–µ–π–ª–∏—Å—Ç–æ–≤ –Ω–∞–π–¥–µ–Ω!');
            addStyles();
            
            if (addCollapseButtonToWidget(widget)) {
                console.log('üéâ –ö–Ω–æ–ø–∫–∞ —Å–≤–æ—Ä–∞—á–∏–≤–∞–Ω–∏—è —É—Å–ø–µ—à–Ω–æ –¥–æ–±–∞–≤–ª–µ–Ω–∞!');
            }
        } else {
            console.log('‚ùå –ú–æ–±–∏–ª—å–Ω—ã–π –≤–∏–¥–∂–µ—Ç –ø–ª–µ–π–ª–∏—Å—Ç–æ–≤ –Ω–µ –Ω–∞–π–¥–µ–Ω –Ω–∞ —Å—Ç—Ä–∞–Ω–∏—Ü–µ');
            
            // –ü–æ–ø—Ä–æ–±—É–µ–º –µ—â–µ —Ä–∞–∑ —á–µ—Ä–µ–∑ 2 —Å–µ–∫—É–Ω–¥—ã (–≤–∏–¥–∂–µ—Ç –º–æ–∂–µ—Ç –∑–∞–≥—Ä—É–∂–∞—Ç—å—Å—è –¥–∏–Ω–∞–º–∏—á–µ—Å–∫–∏)
            setTimeout(() => {
                console.log('üîÑ –ü–æ–≤—Ç–æ—Ä–Ω–∞—è –ø–æ–ø—ã—Ç–∫–∞ –ø–æ–∏—Å–∫–∞ –º–æ–±–∏–ª—å–Ω–æ–≥–æ –≤–∏–¥–∂–µ—Ç–∞...');
                const retryWidget = findMobilePlaylistWidget();
                if (retryWidget) {
                    addStyles();
                    if (addCollapseButtonToWidget(retryWidget)) {
                        console.log('üéâ –ö–Ω–æ–ø–∫–∞ —Å–≤–æ—Ä–∞—á–∏–≤–∞–Ω–∏—è –¥–æ–±–∞–≤–ª–µ–Ω–∞ (–ø–æ–≤—Ç–æ—Ä–Ω–∞—è –ø–æ–ø—ã—Ç–∫–∞)!');
                    }
                } else {
                    console.log('‚ùå –ú–æ–±–∏–ª—å–Ω—ã–π –≤–∏–¥–∂–µ—Ç –ø–ª–µ–π–ª–∏—Å—Ç–æ–≤ —Ç–∞–∫ –∏ –Ω–µ –Ω–∞–π–¥–µ–Ω');
                }
            }, 2000);
        }
    }
    
    // –ù–∞–±–ª—é–¥–∞—Ç–µ–ª—å –∑–∞ –∏–∑–º–µ–Ω–µ–Ω–∏—è–º–∏ DOM –¥–ª—è –¥–∏–Ω–∞–º–∏—á–µ—Å–∫–∏ —Å–æ–∑–¥–∞–≤–∞–µ–º—ã—Ö —ç–ª–µ–º–µ–Ω—Ç–æ–≤
    const observer = new MutationObserver(function(mutations) {
        mutations.forEach(function(mutation) {
            if (mutation.type === 'childList') {
                mutation.addedNodes.forEach(function(node) {
                    if (node.nodeType === 1) { // Element node
                        // –ü—Ä–æ–≤–µ—Ä—è–µ–º, –¥–æ–±–∞–≤–ª–µ–Ω –ª–∏ –≤–∏–¥–∂–µ—Ç –ø–ª–µ–π–ª–∏—Å—Ç–æ–≤
                        if (node.textContent && node.textContent.includes('üéµ –ü–ª–µ–π–ª–∏—Å—Ç—ã') ||
                            node.querySelector && node.querySelector('.bi-bookmark, [style*="background-color: rgb(231, 76, 60)"]')) {
                            console.log('üì± –û–±–Ω–∞—Ä—É–∂–µ–Ω –Ω–æ–≤—ã–π –º–æ–±–∏–ª—å–Ω—ã–π –≤–∏–¥–∂–µ—Ç –ø–ª–µ–π–ª–∏—Å—Ç–æ–≤');
                            setTimeout(init, 100); // –ù–µ–±–æ–ª—å—à–∞—è –∑–∞–¥–µ—Ä–∂–∫–∞ –¥–ª—è –ø–æ–ª–Ω–æ–π –∑–∞–≥—Ä—É–∑–∫–∏
                        }
                    }
                });
            }
        });
    });
    
    // –ó–∞–ø—É—Å–∫–∞–µ–º –Ω–∞–±–ª—é–¥–∞—Ç–µ–ª—å
    observer.observe(document.body, {
        childList: true,
        subtree: true
    });
    
    // –ó–∞–ø—É—Å–∫–∞–µ–º –∏–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏—é –∫–æ–≥–¥–∞ —Å—Ç—Ä–∞–Ω–∏—Ü–∞ –≥–æ—Ç–æ–≤–∞
    if (document.readyState === 'loading') {
        document.addEventListener('DOMContentLoaded', init);
    } else {
        init();
    }
    
    // –≠–∫—Å–ø–æ—Ä—Ç–∏—Ä—É–µ–º —Ñ—É–Ω–∫—Ü–∏–∏ –¥–ª—è –æ—Ç–ª–∞–¥–∫–∏
    window.mobilePlaylistCollapse = {
        init,
        findWidget: findMobilePlaylistWidget,
        toggle: toggleMobilePlaylistContent,
        test: function() {
            console.log('üß™ –¢–ï–°–¢ –ú–û–ë–ò–õ–¨–ù–û–ì–û –°–í–û–†–ê–ß–ò–í–ê–ù–ò–Ø:');
            const widget = findMobilePlaylistWidget();
            console.log('–í–∏–¥–∂–µ—Ç –Ω–∞–π–¥–µ–Ω:', !!widget);
            if (widget) {
                console.log('–≠–ª–µ–º–µ–Ω—Ç –≤–∏–¥–∂–µ—Ç–∞:', widget);
                console.log('–¢–µ–∫—Å—Ç –≤–∏–¥–∂–µ—Ç–∞:', widget.textContent.substring(0, 100) + '...');
            }
            const button = document.getElementById('mobilePlaylistCollapseBtn');
            console.log('–ö–Ω–æ–ø–∫–∞ —Å–≤–æ—Ä–∞—á–∏–≤–∞–Ω–∏—è –Ω–∞–π–¥–µ–Ω–∞:', !!button);
        }
    };
    
    console.log('‚úÖ –°–∏—Å—Ç–µ–º–∞ –º–æ–±–∏–ª—å–Ω–æ–≥–æ —Å–≤–æ—Ä–∞—á–∏–≤–∞–Ω–∏—è –ø–ª–µ–π–ª–∏—Å—Ç–æ–≤ –≥–æ—Ç–æ–≤–∞!');
    
})();

// –î–æ–±–∞–≤–ª—è–µ–º —Ç–µ—Å—Ç–æ–≤—É—é –∫–Ω–æ–ø–∫—É –¥–ª—è –æ—Ç–ª–∞–¥–∫–∏ (—Ç–æ–ª—å–∫–æ –≤ dev —Ä–µ–∂–∏–º–µ)
if (window.location.hostname === 'localhost' || window.location.hostname === '127.0.0.1') {
    setTimeout(() => {
        const testBtn = document.createElement('button');
        testBtn.textContent = 'üì± –¢–ï–°–¢ –ú–û–ë–ò–õ–¨–ù–û–ì–û –°–í–û–†–ê–ß–ò–í–ê–ù–ò–Ø';
        testBtn.style.cssText = `
            position: fixed;
            bottom: 10px;
            left: 10px;
            z-index: 99999;
            padding: 8px 12px;
            background: #007bff;
            color: white;
            border: none;
            border-radius: 5px;
            cursor: pointer;
            font-size: 12px;
            box-shadow: 0 2px 8px rgba(0,0,0,0.3);
        `;
        
        testBtn.onclick = () => {
            if (window.mobilePlaylistCollapse) {
                window.mobilePlaylistCollapse.test();
            }
        };
        
        document.body.appendChild(testBtn);
    }, 3000);
}
