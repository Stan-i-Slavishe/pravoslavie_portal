<!-- Список ответов на комментарий -->
{% if replies %}
    {% for reply in replies %}
        <div class="reply-item" data-comment-id="{{ reply.id }}">
            <!-- Аватар пользователя -->
            <div class="comment-avatar-wrapper">
                <div class="comment-avatar" title="{{ reply.user.get_full_name|default:reply.user.username }}">
                    {{ reply.user.first_name.0|default:reply.user.username.0|upper }}
                </div>
            </div>
            
            <!-- Контент ответа -->
            <div class="comment-content">
                <!-- Заголовок ответа -->
                <div class="comment-header">
                    <a href="#" class="comment-author">{{ reply.user.get_full_name|default:reply.user.username }}</a>
                    <span class="comment-date">{{ reply.created_at|timesince }} назад</span>
                    {% if reply.is_edited %}
                        <span class="comment-edited">(изменено)</span>
                    {% endif %}
                </div>
                
                <!-- Текст ответа -->
                <div class="comment-text">{{ reply.text|linebreaksbr }}</div>
                
                <!-- Действия с ответом -->
                <div class="comment-actions-bar">
                    {% if user.is_authenticated %}
                        <!-- Лайк -->
                        <button 
                            class="comment-action-btn {% if reply.id in user_reactions and user_reactions.reply.id == 'like' %}liked{% endif %}"
                            data-comment-id="{{ reply.id }}"
                            data-reaction="like"
                            onclick="toggleCommentReaction({{ reply.id }}, 'like')"
                            title="Нравится"
                        >
                            <i class="bi bi-hand-thumbs-up"></i>
                        </button>
                        
                        <!-- Счетчик лайков -->
                        <span class="comment-like-count" data-comment-id="{{ reply.id }}">
                            {% if reply.likes_count %}{{ reply.likes_count }}{% endif %}
                        </span>
                        
                        <!-- Дизлайк -->
                        <button 
                            class="comment-action-btn {% if reply.id in user_reactions and user_reactions.reply.id == 'dislike' %}liked{% endif %}"
                            data-comment-id="{{ reply.id }}"
                            data-reaction="dislike"
                            onclick="toggleCommentReaction({{ reply.id }}, 'dislike')"
                            title="Не нравится"
                        >
                            <i class="bi bi-hand-thumbs-down"></i>
                        </button>
                        
                        <!-- Ответить -->
                        <button 
                            class="comment-reply-btn"
                            onclick="replyToComment({{ parent_comment.id }}, '{{ reply.user.get_full_name|default:reply.user.username }}')"
                        >
                            Ответить
                        </button>
                    {% endif %}
                </div>
            </div>
        </div>
    {% endfor %}
{% else %}
    <div class="no-replies">
        <p style="color: #606060; font-size: 14px; margin: 16px 0;">Нет ответов</p>
    </div>
{% endif %}
