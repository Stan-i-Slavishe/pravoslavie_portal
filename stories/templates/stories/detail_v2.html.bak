{% extends 'base.html' %}
{% load static %}

{% block title %}{{ story.title }} - –ü—Ä–∞–≤–æ—Å–ª–∞–≤–Ω—ã–π –ø–æ—Ä—Ç–∞–ª{% endblock %}

{% block extra_css %}
<style>
    /* –í–°–¢–†–û–ï–ù–ù–´–ï –°–¢–ò–õ–ò */
    .story-video-container {
        position: relative;
        background: #000 !important;
        border-radius: 15px !important;
        overflow: hidden;
        box-shadow: 0 8px 32px rgba(0,0,0,0.3) !important;
        margin-bottom: 30px;
        min-height: 500px;
    }
    
    .youtube-iframe {
        width: 100%;
        height: 500px;
        border: none;
        display: block;
        border-radius: 15px !important;
    }
    
    .video-fallback {
        position: absolute;
        top: 0;
        left: 0;
        right: 0;
        bottom: 0;
        display: none;
        align-items: center;
        justify-content: center;
        color: white;
        text-align: center;
        padding: 60px 40px;
        z-index: 10;
    }
    
    .video-fallback.active {
        display: flex;
    }
    
    .video-placeholder {
        text-align: center;
    }
    
    .video-placeholder .youtube-icon {
        font-size: 5rem;
        margin-bottom: 20px;
        opacity: 0.9;
    }
    
    .video-placeholder h3 {
        font-size: 1.8rem;
        margin-bottom: 15px;
        font-weight: 300;
    }
    
    .video-placeholder p {
        font-size: 1.1rem;
        margin-bottom: 30px;
        opacity: 0.9;
    }
    
    .youtube-btn {
        background: #FF0000;
        color: white;
        border: none;
        padding: 15px 30px;
        border-radius: 50px;
        font-size: 1.1rem;
        font-weight: 600;
        text-decoration: none;
        display: inline-flex;
        align-items: center;
        transition: all 0.3s ease;
        box-shadow: 0 4px 15px rgba(255,0,0,0.3);
        margin: 5px;
    }
    
    .youtube-btn:hover {
        background: #cc0000;
        transform: translateY(-2px);
        box-shadow: 0 6px 20px rgba(255,0,0,0.4);
        color: white;
        text-decoration: none;
    }
    
    .youtube-btn i {
        margin-right: 10px;
        font-size: 1.2rem;
    }
    
    .video-info {
        position: absolute;
        bottom: 15px;
        left: 15px;
        background: rgba(0,0,0,0.8) !important;
        color: white !important;
        padding: 10px 15px !important;
        border-radius: 8px !important;
        font-size: 0.85rem !important;
        z-index: 5;
        backdrop-filter: blur(10px) !important;
        border: 1px solid rgba(255,255,255,0.1) !important;
    }
    
    .video-controls {
        position: absolute;
        top: 10px;
        right: 10px;
        z-index: 15;
    }
    
    .control-btn {
        background: rgba(0,0,0,0.8) !important;
        color: white !important;
        border: none !important;
        padding: 10px 12px !important;
        border-radius: 8px !important;
        margin-left: 8px !important;
        cursor: pointer;
        transition: all 0.3s ease !important;
        backdrop-filter: blur(10px) !important;
        border: 1px solid rgba(255,255,255,0.1) !important;
    }
    
    .control-btn:hover {
        background: rgba(0,0,0,0.9) !important;
        color: white !important;
        transform: translateY(-1px) !important;
        box-shadow: 0 4px 12px rgba(0,0,0,0.3) !important;
    }
    
    .story-header {
        background: linear-gradient(135deg, #f8f9fa, #e9ecef);
        border-radius: 12px;
        padding: 30px;
        margin-bottom: 30px;
    }
    
    .story-stats {
        background: white;
        border-radius: 12px;
        padding: 20px;
        box-shadow: 0 2px 12px rgba(0,0,0,0.08);
        margin-bottom: 30px;
    }
    
    .stat-item {
        text-align: center;
        padding: 15px;
        border-radius: 8px;
        background: #f8f9fa;
        margin-bottom: 15px;
    }
    
    .stat-number {
        font-size: 1.5rem;
        font-weight: bold;
        color: #2B5AA0;
        display: block;
    }
    
    .stat-label {
        font-size: 0.9rem;
        color: #6c757d;
    }
    
    .related-stories {
        background: white;
        border-radius: 12px;
        padding: 25px;
        box-shadow: 0 2px 12px rgba(0,0,0,0.08);
    }
    
    .related-story-card {
        border: 1px solid #e9ecef;
        border-radius: 8px;
        padding: 15px;
        margin-bottom: 15px;
        transition: all 0.3s ease;
    }
    
    .related-story-card:hover {
        border-color: #2B5AA0;
        transform: translateY(-2px);
    }
    
    .related-story-card:last-child {
        margin-bottom: 0;
    }
    
    .navigation-buttons {
        background: #f8f9fa;
        border-radius: 12px;
        padding: 20px;
        margin-top: 30px;
    }
    
    .tag-list .badge {
        margin-right: 8px;
        margin-bottom: 8px;
        font-size: 0.85rem;
        padding: 6px 12px;
    }
    
    .like-button.liked {
        color: #dc3545 !important;
        border-color: #dc3545 !important;
        background-color: rgba(220, 53, 69, 0.1) !important;
    }
    
    @media (max-width: 768px) {
        .youtube-iframe {
            height: 300px;
        }
        
        .story-video-container {
            min-height: 300px;
        }
        
        .video-placeholder {
            padding: 30px 20px;
        }
        
        .video-placeholder h3 {
            font-size: 1.4rem;
        }
        
        .youtube-btn {
            padding: 12px 25px;
            font-size: 1rem;
        }
    }
    
    /* üí¨ –°–¢–ò–õ–ò –î–õ–Ø –ö–û–ú–ú–ï–ù–¢–ê–†–ò–ï–í –í –°–¢–ò–õ–ï YOUTUBE */
    .comments-section {
        background: #fff;
        border: none;
        border-radius: 0;
        padding: 24px 0;
    }
    
    .comments-header {
        display: flex;
        align-items: center;
        margin-bottom: 32px;
        padding-bottom: 0;
    }
    
    .comments-count {
        font-size: 20px;
        font-weight: 400;
        color: #0f0f0f;
        margin-right: 32px;
    }
    
    .sort-comments {
        display: flex;
        align-items: center;
        color: #606060;
        font-size: 14px;
        font-weight: 500;
        cursor: pointer;
        padding: 8px 0;
    }
    
    .sort-comments:hover {
        color: #0f0f0f;
    }
    
    .sort-comments i {
        margin-left: 4px;
        font-size: 16px;
    }
    
    /* –§–æ—Ä–º–∞ –¥–æ–±–∞–≤–ª–µ–Ω–∏—è –∫–æ–º–º–µ–Ω—Ç–∞—Ä–∏—è */
    .add-comment-form {
        display: flex;
        margin-bottom: 24px;
        align-items: flex-start;
    }
    
    .comment-avatar-wrapper {
        margin-right: 16px;
        flex-shrink: 0;
    }
    
    .comment-avatar {
        width: 40px;
        height: 40px;
        border-radius: 50%;
        background: linear-gradient(135deg, #2B5AA0, #D4AF37);
        display: flex;
        align-items: center;
        justify-content: center;
        color: white;
        font-weight: 500;
        font-size: 16px;
        cursor: pointer;
    }
    
    .comment-input-container {
        flex: 1;
        position: relative;
    }
    
    .comment-input {
        width: 100%;
        border: none;
        border-bottom: 1px solid #ccc;
        padding: 8px 0;
        font-size: 14px;
        background: transparent;
        resize: none;
        outline: none;
        transition: border-color 0.2s;
        font-family: 'Roboto', Arial, sans-serif;
    }
    
    .comment-input:focus {
        border-bottom: 2px solid #065fd4;
    }
    
    .comment-input::placeholder {
        color: #606060;
    }
    
    .comment-actions {
        display: flex;
        justify-content: flex-end;
        gap: 8px;
        margin-top: 8px;
        opacity: 0;
        transition: opacity 0.2s;
    }
    
    .comment-input:focus + .comment-actions,
    .comment-actions.show {
        opacity: 1;
    }
    
    .comment-btn {
        padding: 10px 16px;
        border: none;
        border-radius: 18px;
        font-size: 14px;
        font-weight: 500;
        cursor: pointer;
        transition: all 0.2s;
    }
    
    .comment-btn-cancel {
        background: transparent;
        color: #606060;
    }
    
    .comment-btn-cancel:hover {
        background: #f2f2f2;
        color: #0f0f0f;
    }
    
    .comment-btn-submit {
        background: #065fd4;
        color: white;
    }
    
    .comment-btn-submit:hover {
        background: #0553c2;
    }
    
    .comment-btn-submit:disabled {
        background: #f2f2f2;
        color: #909090;
        cursor: not-allowed;
    }
    
    /* –°–ø–∏—Å–æ–∫ –∫–æ–º–º–µ–Ω—Ç–∞—Ä–∏–µ–≤ */
    .comments-list {
        margin-top: 0;
    }
    
    .comment-item {
        display: flex;
        margin-bottom: 16px;
        align-items: flex-start;
    }
    
    .comment-item:last-child {
        margin-bottom: 0;
    }
    
    .comment-content {
        flex: 1;
        margin-left: 16px;
    }
    
    .comment-header {
        display: flex;
        align-items: center;
        margin-bottom: 2px;
    }
    
    .comment-author {
        font-size: 13px;
        font-weight: 500;
        color: #0f0f0f;
        margin-right: 8px;
        text-decoration: none;
    }
    
    .comment-author:hover {
        color: #0f0f0f;
    }
    
    .comment-date {
        font-size: 12px;
        color: #606060;
    }
    
    .comment-text {
        font-size: 14px;
        color: #0f0f0f;
        line-height: 20px;
        margin: 2px 0 8px 0;
        word-wrap: break-word;
    }
    
    .comment-actions-bar {
        display: flex;
        align-items: center;
        gap: 8px;
    }
    
    .comment-action-btn {
        display: flex;
        align-items: center;
        padding: 8px;
        background: transparent;
        border: none;
        border-radius: 50%;
        color: #606060;
        cursor: pointer;
        transition: all 0.2s;
        font-size: 16px;
    }
    
    .comment-action-btn:hover {
        background: #f2f2f2;
        color: #0f0f0f;
    }
    
    .comment-action-btn.liked {
        color: #065fd4;
    }
    
    .comment-like-count {
        font-size: 12px;
        color: #606060;
        margin-left: 8px;
        min-width: 16px;
    }
    
    .comment-reply-btn {
        color: #606060;
        background: transparent;
        border: none;
        font-size: 12px;
        font-weight: 500;
        padding: 8px 16px;
        border-radius: 18px;
        cursor: pointer;
        transition: all 0.2s;
        text-transform: uppercase;
    }
    
    .comment-reply-btn:hover {
        background: #f2f2f2;
        color: #0f0f0f;
    }
    
    /* –û—Ç–≤–µ—Ç—ã –Ω–∞ –∫–æ–º–º–µ–Ω—Ç–∞—Ä–∏–∏ */
    .replies-container {
        margin-top: 8px;
        margin-left: 56px;
    }
    
    .replies-toggle {
        display: flex;
        align-items: center;
        color: #065fd4;
        font-size: 14px;
        font-weight: 500;
        cursor: pointer;
        padding: 8px 0;
        margin-bottom: 8px;
        background: transparent;
        border: none;
    }
    
    .replies-toggle:hover {
        color: #0553c2;
    }
    
    .replies-toggle i {
        margin-right: 8px;
        font-size: 12px;
        transition: transform 0.2s;
    }
    
    .replies-toggle.expanded i {
        transform: rotate(180deg);
    }
    
    .replies-list {
        margin-left: 0;
    }
    
    .reply-item {
        display: flex;
        margin-bottom: 16px;
        align-items: flex-start;
    }
    
    .reply-item .comment-avatar {
        width: 24px;
        height: 24px;
        font-size: 12px;
    }
    
    .reply-item .comment-content {
        margin-left: 12px;
    }
    
    /* –ü—É—Å—Ç–æ–µ —Å–æ—Å—Ç–æ—è–Ω–∏–µ */
    .no-comments {
        text-align: center;
        padding: 40px 0;
        color: #606060;
    }
    
    .no-comments i {
        font-size: 48px;
        margin-bottom: 16px;
        color: #e0e0e0;
    }
    
    .no-comments h3 {
        font-size: 16px;
        font-weight: 400;
        margin-bottom: 8px;
        color: #0f0f0f;
    }
    
    .no-comments p {
        font-size: 14px;
        color: #606060;
        margin: 0;
    }
    
    /* –ê–¥–∞–ø—Ç–∏–≤–Ω–æ—Å—Ç—å */
    @media (max-width: 768px) {
        .comments-section {
            padding: 16px 0;
        }
        
        .comments-header {
            margin-bottom: 24px;
        }
        
        .comment-avatar {
            width: 32px;
            height: 32px;
            font-size: 14px;
        }
        
        .comment-content {
            margin-left: 12px;
        }
        
        .replies-container {
            margin-left: 44px;
        }
    }
</style>
{% endblock %}

{% block content %}
<div class="row">
    <!-- –û—Å–Ω–æ–≤–Ω–æ–π –∫–æ–Ω—Ç–µ–Ω—Ç -->
    <div class="col-lg-8">
        <!-- –í–∏–¥–µ–æ -->
        <div class="story-video-container">
            <!-- –£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ -->
            <div class="video-controls">
                <button class="control-btn" onclick="showIframe()" title="–ü–æ–∫–∞–∑–∞—Ç—å –≤–∏–¥–µ–æ –∑–¥–µ—Å—å">
                    <i class="bi bi-play-circle"></i>
                </button>
                <button class="control-btn" onclick="showFallback()" title="–û—Ç–∫—Ä—ã—Ç—å –Ω–∞ YouTube">
                    <i class="bi bi-youtube"></i>
                </button>
            </div>
            
            <!-- YouTube iframe -->
            {% if story.youtube_embed_id %}
            <iframe 
                id="youtube-iframe"
                class="youtube-iframe"
                src="https://www.youtube.com/embed/{{ story.youtube_embed_id }}?autoplay=0&rel=0&modestbranding=1"
                allowfullscreen 
                loading="lazy"
                allow="accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture"
                title="{{ story.title }}"
                onload="handleIframeLoad()"
                onerror="handleIframeError()">
            </iframe>
            {% endif %}
            
            <!-- Fallback –ø—Ä–∏ –ø—Ä–æ–±–ª–µ–º–∞—Ö —Å iframe -->
            <div class="video-fallback" id="video-fallback">
                <div class="video-placeholder">
                    <i class="bi bi-youtube youtube-icon"></i>
                    <h3>{{ story.title }}</h3>
                    <p>–°–º–æ—Ç—Ä–∏—Ç–µ —ç—Ç–æ –≤–∏–¥–µ–æ –Ω–∞ YouTube</p>
                    <div>
                        <a href="{{ story.youtube_url }}" target="_blank" class="youtube-btn">
                            <i class="bi bi-play-circle-fill"></i>
                            –û—Ç–∫—Ä—ã—Ç—å –Ω–∞ YouTube
                        </a>
                        <a href="https://www.youtube.com/embed/{{ story.youtube_embed_id }}" target="_blank" class="youtube-btn">
                            <i class="bi bi-arrows-fullscreen"></i>
                            –ü–æ–ª–Ω—ã–π —ç–∫—Ä–∞–Ω
                        </a>
                    </div>
                </div>
            </div>
            
            <!-- –ò–Ω—Ñ–æ—Ä–º–∞—Ü–∏—è –æ –≤–∏–¥–µ–æ -->
            {% if story.youtube_embed_id %}
            <div class="video-info">
                üé• YouTube ID: {{ story.youtube_embed_id }}
            </div>
            {% endif %}
        </div>
        
        <!-- –ó–∞–≥–æ–ª–æ–≤–æ–∫ –∏ –æ–ø–∏—Å–∞–Ω–∏–µ -->
        <div class="story-header">
            <h1 class="mb-3">{{ story.title }}</h1>
            
            <!-- –¢–µ–≥–∏ -->
            {% if story.tags.all %}
            <div class="tag-list mb-3">
                {% for tag in story.tags.all %}
                <span class="badge" style="background-color: {{ tag.color|default:'#6c757d' }};">
                    <i class="bi bi-tag me-1"></i>{{ tag.name }}
                </span>
                {% endfor %}
            </div>
            {% endif %}
            
            <!-- –û–ø–∏—Å–∞–Ω–∏–µ -->
            <div class="story-description">
                <p class="lead">{{ story.description }}</p>
            </div>
            
            <!-- –ú–µ—Ç–∞–∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏—è -->
            <div class="row mt-4">
                <div class="col-md-6">
                    {% if story.category %}
                    <p class="mb-1">
                        <i class="bi bi-folder text-primary me-2"></i>
                        <strong>–ö–∞—Ç–µ–≥–æ—Ä–∏—è:</strong> 
                        <a href="{% url 'stories:category' story.category.slug %}" class="text-decoration-none">
                            {{ story.category.name }}
                        </a>
                    </p>
                    {% endif %}
                    <p class="mb-1">
                        <i class="bi bi-calendar text-primary me-2"></i>
                        <strong>–î–∞—Ç–∞ –ø—É–±–ª–∏–∫–∞—Ü–∏–∏:</strong> {{ story.created_at|date:"d.m.Y" }}
                    </p>
                </div>
                <div class="col-md-6">
                    <p class="mb-1">
                        <i class="bi bi-eye text-primary me-2"></i>
                        <strong>–ü—Ä–æ—Å–º–æ—Ç—Ä—ã:</strong> {{ story.views_count }}
                    </p>
                    <p class="mb-1">
                        <i class="bi bi-heart text-primary me-2"></i>
                        <strong>–õ–∞–π–∫–∏:</strong> 
                        <span id="total-likes">{{ likes_count }}</span>
                    </p>
                </div>
            </div>
        </div>
        
        <!-- –ö–Ω–æ–ø–∫–∏ –¥–µ–π—Å—Ç–≤–∏–π -->
        <div class="d-flex flex-wrap align-items-center mb-4">
            <!-- –õ–∞–π–∫ -->
            <button class="btn btn-outline-danger me-3 like-button {% if user_liked %}liked{% endif %}" 
                    onclick="likeStory({{ story.id }})" id="main-like-btn">
                <i class="bi bi-heart{% if user_liked %}-fill{% endif %} me-2"></i>
                {% if user_liked %}–£–±—Ä–∞—Ç—å –ª–∞–π–∫{% else %}–ù—Ä–∞–≤–∏—Ç—Å—è{% endif %}
                (<span id="main-likes-count">{{ likes_count }}</span>)
            </button>
            
            <!-- –ò–∑–±—Ä–∞–Ω–Ω–æ–µ -->
            <button class="btn btn-outline-warning me-3" onclick="favoriteStory({{ story.id }})">
                <i class="bi bi-bookmark me-2"></i>–í –∏–∑–±—Ä–∞–Ω–Ω–æ–µ
            </button>
            
            <!-- –ü–æ–¥–µ–ª–∏—Ç—å—Å—è -->
            <div class="dropdown">
                <button class="btn btn-outline-primary dropdown-toggle" type="button" 
                        data-bs-toggle="dropdown">
                    <i class="bi bi-share me-2"></i>–ü–æ–¥–µ–ª–∏—Ç—å—Å—è
                </button>
                <ul class="dropdown-menu">
                    <li>
                        <a class="dropdown-item" href="https://t.me/share/url?url={{ request.build_absolute_uri }}&text={{ story.title }}" target="_blank">
                            <i class="bi bi-telegram text-primary me-2"></i>Telegram
                        </a>
                    </li>
                    <li>
                        <a class="dropdown-item" href="https://vk.com/share.php?url={{ request.build_absolute_uri }}&title={{ story.title }}" target="_blank">
                            <svg class="me-2" width="16" height="16" viewBox="0 0 24 24" fill="#0077FF">
                                <path d="M12.785 16.241s.288-.032.436-.193c.136-.148.131-.425.131-.425s-.019-1.3.57-1.493c.582-.19 1.329.963 2.121 1.389.6.324 1.056.253 1.056.253l2.123-.03s1.111-.07.584-.967c-.043-.073-.307-.665-1.588-1.879-1.34-1.271-1.161-1.065.454-3.265.984-1.341 1.378-2.158 1.254-2.511-.118-.337-.848-.248-.848-.248l-2.388.015s-.177-.024-.308.056c-.128.078-.21.26-.21.26s-.378 1.032-.881 1.911c-1.059 1.853-1.483 1.952-1.656 1.836-.403-.269-.302-.985-.302-1.519 0-1.65.244-2.337-.475-2.515-.239-.059-.414-.098-1.023-.104-.781-.008-1.441.003-1.815.191-.248.125-.44.403-.324.419.144.02.47.09.642.332.223.313.215.996.215.996s.128 1.973-.299 2.217c-.293.167-.695-.174-1.557-1.834-.442-.854-.775-1.799-.775-1.799s-.064-.175-.179-.268c-.139-.113-.333-.149-.333-.149l-2.267.015s-.341.01-.466.162c-.111.135-.009.413-.009.413s1.778 4.269 3.787 6.418c1.845 1.969 3.935 1.839 3.935 1.839z"/>
                            </svg>–í–ö–æ–Ω—Ç–∞–∫—Ç–µ
                        </a>
                    </li>
                    <li>
                        <a class="dropdown-item" href="https://wa.me/?text={{ story.title }} {{ request.build_absolute_uri }}" target="_blank">
                            <i class="bi bi-whatsapp text-success me-2"></i>WhatsApp
                        </a>
                    </li>
                    <li><hr class="dropdown-divider"></li>
                    <li>
                        <a class="dropdown-item" href="#" onclick="copyToClipboard('{{ request.build_absolute_uri }}')">
                            <i class="bi bi-copy text-muted me-2"></i>–°–∫–æ–ø–∏—Ä–æ–≤–∞—Ç—å —Å—Å—ã–ª–∫—É
                        </a>
                    </li>
                </ul>
            </div>
        </div>
        
        <!-- üí¨ –°–ò–°–¢–ï–ú–ê –ö–û–ú–ú–ï–ù–¢–ê–†–ò–ï–í YOUTUBE –°–¢–ò–õ–¨ -->
        <div class="comments-section">
            <!-- –ó–∞–≥–æ–ª–æ–≤–æ–∫ –∫–æ–º–º–µ–Ω—Ç–∞—Ä–∏–µ–≤ -->
            <div class="comments-header">
                <div class="comments-count">{{ comments_count|default:"0" }} –∫–æ–º–º–µ–Ω—Ç–∞—Ä–∏–µ–≤</div>
                <div class="sort-comments">
                    <span>–£–ø–æ—Ä—è–¥–æ—á–∏—Ç—å</span>
                    <i class="bi bi-chevron-down"></i>
                </div>
            </div>
            
            <!-- –§–æ—Ä–º–∞ –¥–æ–±–∞–≤–ª–µ–Ω–∏—è –∫–æ–º–º–µ–Ω—Ç–∞—Ä–∏—è -->
            {% if user.is_authenticated %}
            <div class="add-comment-form">
                <div class="comment-avatar-wrapper">
                    <div class="comment-avatar">
                        {% if user.first_name %}
                            {{ user.first_name|first|upper }}{{ user.last_name|first|upper|default:"" }}
                        {% else %}
                            {{ user.username|first|upper }}
                        {% endif %}
                    </div>
                </div>
                <div class="comment-input-container">
                    <form method="post" id="youtube-comment-form">
                        {% csrf_token %}
                        <textarea class="comment-input" 
                                  name="text" 
                                  id="youtube-comment-input"
                                  placeholder="–í–≤–µ–¥–∏—Ç–µ –∫–æ–º–º–µ–Ω—Ç–∞—Ä–∏–π..."
                                  rows="1"
                                  maxlength="1000"
                                  required></textarea>
                        <input type="hidden" name="parent" id="youtube-parent-id" value="">
                        <div class="comment-actions" id="youtube-comment-actions">
                            <button type="button" class="comment-btn comment-btn-cancel" onclick="cancelYouTubeComment()">–û—Ç–º–µ–Ω–∞</button>
                            <button type="submit" class="comment-btn comment-btn-submit" id="youtube-submit-btn" disabled>–ö–æ–º–º–µ–Ω—Ç–∏—Ä–æ–≤–∞—Ç—å</button>
                        </div>
                    </form>
                </div>
            </div>
            {% else %}
            <div class="add-comment-form">
                <div class="comment-avatar-wrapper">
                    <div class="comment-avatar" style="background: #ccc;">
                        <i class="bi bi-person"></i>
                    </div>
                </div>
                <div class="comment-input-container">
                    <div class="comment-input" style="color: #606060; cursor: pointer;" 
                         onclick="window.location.href='{% url 'account_login' %}?next={{ request.get_full_path }}'">
                        –í–æ–π–¥–∏—Ç–µ –≤ —Å–∏—Å—Ç–µ–º—É, —á—Ç–æ–±—ã –æ—Å—Ç–∞–≤–∏—Ç—å –∫–æ–º–º–µ–Ω—Ç–∞—Ä–∏–π...
                    </div>
                </div>
            </div>
            {% endif %}
            
            <!-- –°–ø–∏—Å–æ–∫ –∫–æ–º–º–µ–Ω—Ç–∞—Ä–∏–µ–≤ -->
            {% if comments %}
            <div class="comments-list">
                {% for comment in comments %}
                <div class="comment-item" data-comment-id="{{ comment.id }}">
                    <div class="comment-avatar-wrapper">
                        <div class="comment-avatar">
                            {% if comment.user.first_name %}
                                {{ comment.user.first_name|first|upper }}{{ comment.user.last_name|first|upper|default:"" }}
                            {% else %}
                                {{ comment.user.username|first|upper }}
                            {% endif %}
                        </div>
                    </div>
                    <div class="comment-content">
                        <div class="comment-header">
                            <a href="#" class="comment-author">
                                {% if comment.user.first_name %}
                                    {{ comment.user.first_name }} {{ comment.user.last_name }}
                                {% else %}
                                    {{ comment.user.username }}
                                {% endif %}
                            </a>
                            <span class="comment-date">{{ comment.created_at|timesince }} –Ω–∞–∑–∞–¥</span>
                        </div>
                        <div class="comment-text">
                            {{ comment.text|linebreaks }}
                        </div>
                        <div class="comment-actions-bar">
                            <button class="comment-action-btn" title="–ù—Ä–∞–≤–∏—Ç—Å—è">
                                <i class="bi bi-hand-thumbs-up"></i>
                            </button>
                            <span class="comment-like-count">{{ comment.likes_count|default:"" }}</span>
                            <button class="comment-action-btn" title="–ù–µ –Ω—Ä–∞–≤–∏—Ç—Å—è">
                                <i class="bi bi-hand-thumbs-down"></i>
                            </button>
                            {% if user.is_authenticated %}
                            <button class="comment-reply-btn" 
                                    onclick="replyToYouTubeComment('{{ comment.id }}', '{% if comment.user.first_name %}{{ comment.user.first_name }}{% else %}{{ comment.user.username }}{% endif %}')">
                                –û—Ç–≤–µ—Ç–∏—Ç—å
                            </button>
                            {% endif %}
                        </div>
                        
                        <!-- –û—Ç–≤–µ—Ç—ã –Ω–∞ –∫–æ–º–º–µ–Ω—Ç–∞—Ä–∏–π -->
                        {% if comment.replies.all %}
                        <div class="replies-container">
                            <button class="replies-toggle" onclick="toggleReplies(this)">
                                <i class="bi bi-chevron-down"></i>
                                <span>{{ comment.replies.count }} –æ—Ç–≤–µ—Ç–æ–≤</span>
                            </button>
                            <div class="replies-list" style="display: none;">
                                {% for reply in comment.replies.all %}
                                <div class="reply-item">
                                    <div class="comment-avatar-wrapper">
                                        <div class="comment-avatar">
                                            {% if reply.user.first_name %}
                                                {{ reply.user.first_name|first|upper }}{{ reply.user.last_name|first|upper|default:"" }}
                                            {% else %}
                                                {{ reply.user.username|first|upper }}
                                            {% endif %}
                                        </div>
                                    </div>
                                    <div class="comment-content">
                                        <div class="comment-header">
                                            <a href="#" class="comment-author">
                                                {% if reply.user.first_name %}
                                                    {{ reply.user.first_name }} {{ reply.user.last_name }}
                                                {% else %}
                                                    {{ reply.user.username }}
                                                {% endif %}
                                            </a>
                                            <span class="comment-date">{{ reply.created_at|timesince }} –Ω–∞–∑–∞–¥</span>
                                        </div>
                                        <div class="comment-text">
                                            {{ reply.text|linebreaks }}
                                        </div>
                                        <div class="comment-actions-bar">
                                            <button class="comment-action-btn" title="–ù—Ä–∞–≤–∏—Ç—Å—è">
                                                <i class="bi bi-hand-thumbs-up"></i>
                                            </button>
                                            <span class="comment-like-count"></span>
                                            <button class="comment-action-btn" title="–ù–µ –Ω—Ä–∞–≤–∏—Ç—Å—è">
                                                <i class="bi bi-hand-thumbs-down"></i>
                                            </button>
                                        </div>
                                    </div>
                                </div>
                                {% endfor %}
                            </div>
                        </div>
                        {% endif %}
                    </div>
                </div>
                {% endfor %}
            </div>
            {% else %}
            <div class="no-comments">
                <i class="bi bi-chat-dots"></i>
                <h3>–ü–æ–∫–∞ –Ω–µ—Ç –∫–æ–º–º–µ–Ω—Ç–∞—Ä–∏–µ–≤</h3>
                <p>–°—Ç–∞–Ω—å—Ç–µ –ø–µ—Ä–≤—ã–º, –∫—Ç–æ –ø–æ–¥–µ–ª–∏—Ç—Å—è –º–Ω–µ–Ω–∏–µ–º –æ–± —ç—Ç–æ–º —Ä–∞—Å—Å–∫–∞–∑–µ!</p>
            </div>
            {% endif %}
        </div>
    </div>
    
    <!-- –°–∞–π–¥–±–∞—Ä -->
    <div class="col-lg-4">
        <!-- –°—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞ -->
        <div class="story-stats">
            <h5 class="mb-3">
                <i class="bi bi-graph-up text-primary me-2"></i>–°—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞
            </h5>
            <div class="row">
                <div class="col-6">
                    <div class="stat-item">
                        <span class="stat-number">{{ story.views_count }}</span>
                        <span class="stat-label">–ø—Ä–æ—Å–º–æ—Ç—Ä–æ–≤</span>
                    </div>
                </div>
                <div class="col-6">
                    <div class="stat-item">
                        <span class="stat-number">{{ likes_count }}</span>
                        <span class="stat-label">–ª–∞–π–∫–æ–≤</span>
                    </div>
                </div>
            </div>
            <div class="text-center mt-3">
                <small class="text-muted">
                    –û–ø—É–±–ª–∏–∫–æ–≤–∞–Ω–æ {{ story.created_at|date:"d.m.Y" }}
                </small>
            </div>
        </div>
        
        <!-- –ü–æ—Ö–æ–∂–∏–µ —Ä–∞—Å—Å–∫–∞–∑—ã -->
        {% if related_stories %}
        <div class="related-stories">
            <h5 class="mb-3">
                <i class="bi bi-collection text-primary me-2"></i>–ü–æ—Ö–æ–∂–∏–µ —Ä–∞—Å—Å–∫–∞–∑—ã
            </h5>
            {% for related in related_stories %}
            <div class="related-story-card">
                <h6 class="mb-2">
                    <a href="{% url 'stories:detail' related.slug %}" class="text-decoration-none">
                        {{ related.title }}
                    </a>
                </h6>
                <p class="small text-muted mb-2">{{ related.description|truncatewords:15 }}</p>
                <div class="d-flex justify-content-between align-items-center">
                    <small class="text-muted">
                        <i class="bi bi-eye me-1"></i>{{ related.views_count }}
                    </small>
                    <small class="text-muted">{{ related.created_at|date:"d.m.Y" }}</small>
                </div>
            </div>
            {% endfor %}
            
            <div class="text-center mt-3">
                <a href="{% url 'stories:list' %}" class="btn btn-outline-primary btn-sm">
                    <i class="bi bi-arrow-left me-2"></i>–í—Å–µ —Ä–∞—Å—Å–∫–∞–∑—ã
                </a>
            </div>
        </div>
        {% endif %}
    </div>
</div>
{% endblock %}

{% block extra_js %}
<script>
let iframeWorking = true;
let fallbackTimer;

console.log('Stories hybrid video player loaded');
console.log('YouTube URL: {{ story.youtube_url }}');
console.log('YouTube ID: {{ story.youtube_embed_id }}');

// –ü—Ä–æ–≤–µ—Ä—è–µ–º iframe –ø—Ä–∏ –∑–∞–≥—Ä—É–∑–∫–µ
document.addEventListener('DOMContentLoaded', function() {
    // –£—Å—Ç–∞–Ω–∞–≤–ª–∏–≤–∞–µ–º —Ç–∞–π–º–µ—Ä fallback
    fallbackTimer = setTimeout(function() {
        // –ï—Å–ª–∏ iframe –Ω–µ —Å—Ä–∞–±–æ—Ç–∞–ª –∑–∞ 5 —Å–µ–∫—É–Ω–¥, –ø–æ–∫–∞–∑—ã–≤–∞–µ–º fallback
        if (iframeWorking) {
            console.log('YouTube iframe timeout - showing fallback');
            showFallback();
        }
    }, 5000);
});

function handleIframeLoad() {
    console.log('YouTube iframe loaded successfully');
    iframeWorking = true;
    clearTimeout(fallbackTimer);
}

function handleIframeError() {
    console.log('YouTube iframe failed to load');
    iframeWorking = false;
    showFallback();
}

function showIframe() {
    document.getElementById('youtube-iframe').style.display = 'block';
    document.getElementById('video-fallback').classList.remove('active');
    iframeWorking = true;
    console.log('Showing iframe');
}

function showFallback() {
    document.getElementById('youtube-iframe').style.display = 'none';
    document.getElementById('video-fallback').classList.add('active');
    iframeWorking = false;
    console.log('Showing fallback');
}

// –§—É–Ω–∫—Ü–∏—è –ª–∞–π–∫–∞
function likeStory(storyId) {
    {% if user.is_authenticated %}
    fetch(`/stories/ajax/${storyId}/like/`, {
        method: 'POST',
        headers: {
            'X-CSRFToken': '{{ csrf_token }}',
            'Content-Type': 'application/json',
        },
    })
    .then(response => response.json())
    .then(data => {
        if (data.status === 'success') {
            const btn = document.getElementById('main-like-btn');
            const icon = btn.querySelector('i');
            const count = document.getElementById('main-likes-count');
            const totalLikes = document.getElementById('total-likes');
            
            if (data.liked) {
                icon.className = 'bi bi-heart-fill me-2';
                btn.classList.add('liked');
                btn.innerHTML = `<i class="bi bi-heart-fill me-2"></i>–£–±—Ä–∞—Ç—å –ª–∞–π–∫ (<span id="main-likes-count">${data.likes_count}</span>)`;
            } else {
                icon.className = 'bi bi-heart me-2';
                btn.classList.remove('liked');
                btn.innerHTML = `<i class="bi bi-heart me-2"></i>–ù—Ä–∞–≤–∏—Ç—Å—è (<span id="main-likes-count">${data.likes_count}</span>)`;
            }
            
            totalLikes.textContent = data.likes_count;
        }
    })
    .catch(error => {
        console.error('Error:', error);
        showNotification('–ü—Ä–æ–∏–∑–æ—à–ª–∞ –æ—à–∏–±–∫–∞. –ü–æ–ø—Ä–æ–±—É–π—Ç–µ –ø–æ–∑–∂–µ.', 'danger');
    });
    {% else %}
    window.location.href = '/accounts/login/?next={{ request.get_full_path }}';
    {% endif %}
}

function favoriteStory(storyId) {
    {% if user.is_authenticated %}
    fetch(`/stories/ajax/${storyId}/favorite/`, {
        method: 'POST',
        headers: {
            'X-CSRFToken': '{{ csrf_token }}',
            'Content-Type': 'application/json',
        },
    })
    .then(response => response.json())
    .then(data => {
        if (data.status === 'success') {
            showNotification(data.message, 'success');
        }
    })
    .catch(error => {
        console.error('Error:', error);
        showNotification('–ü—Ä–æ–∏–∑–æ—à–ª–∞ –æ—à–∏–±–∫–∞. –ü–æ–ø—Ä–æ–±—É–π—Ç–µ –ø–æ–∑–∂–µ.', 'danger');
    });
    {% else %}
    window.location.href = '/accounts/login/?next={{ request.get_full_path }}';
    {% endif %}
}

function copyToClipboard(text) {
    navigator.clipboard.writeText(text).then(function() {
        showNotification('–°—Å—ã–ª–∫–∞ —Å–∫–æ–ø–∏—Ä–æ–≤–∞–Ω–∞ –≤ –±—É—Ñ–µ—Ä –æ–±–º–µ–Ω–∞!', 'success');
    }, function(err) {
        console.error('–û—à–∏–±–∫–∞ –∫–æ–ø–∏—Ä–æ–≤–∞–Ω–∏—è: ', err);
        showNotification('–ù–µ —É–¥–∞–ª–æ—Å—å —Å–∫–æ–ø–∏—Ä–æ–≤–∞—Ç—å —Å—Å—ã–ª–∫—É', 'danger');
    });
}

function showNotification(message, type) {
    const alert = document.createElement('div');
    alert.className = `alert alert-${type} alert-dismissible fade show position-fixed`;
    alert.style.top = '20px';
    alert.style.right = '20px';
    alert.style.zIndex = '9999';
    alert.style.minWidth = '300px';
    alert.innerHTML = `
        ${message}
        <button type="button" class="btn-close" data-bs-dismiss="alert"></button>
    `;
    document.body.appendChild(alert);
    
    setTimeout(() => {
        if (alert.parentNode) {
            alert.remove();
        }
    }, 4000);
}

// ===============================================
// –ü–†–û–°–¢–´–ï –§–£–ù–ö–¶–ò–ò –ö–û–ú–ú–ï–ù–¢–ê–†–ò–ï–í –ë–ï–ó AJAX –û–®–ò–ë–û–ö
// ===============================================

// –ü—Ä–æ—Å—Ç–∞—è —Ñ—É–Ω–∫—Ü–∏—è –ø–µ—Ä–µ–∫–ª—é—á–µ–Ω–∏—è —Ñ–æ—Ä–º—ã –æ—Ç–≤–µ—Ç–∞
function toggleReplyForm(commentId) {
    const form = document.getElementById('reply-form-' + commentId);
    if (form) {
        if (form.style.display === 'none' || form.style.display === '') {
            // –°–∫—Ä—ã–≤–∞–µ–º –≤—Å–µ –æ—Å—Ç–∞–ª—å–Ω—ã–µ —Ñ–æ—Ä–º—ã
            document.querySelectorAll('[id^="reply-form-"]').forEach(f => {
                if (f.id !== 'reply-form-' + commentId) {
                    f.style.display = 'none';
                }
            });
            // –ü–æ–∫–∞–∑—ã–≤–∞–µ–º –Ω—É–∂–Ω—É—é
            form.style.display = 'block';
            form.querySelector('textarea').focus();
        } else {
            form.style.display = 'none';
        }
    }
}

console.log('‚úÖ –ü—Ä–æ—Å—Ç–∞—è —Å–∏—Å—Ç–µ–º–∞ –∫–æ–º–º–µ–Ω—Ç–∞—Ä–∏–µ–≤ –∑–∞–≥—Ä—É–∂–µ–Ω–∞ –ë–ï–ó –û–®–ò–ë–û–ö');
console.log('üìä –ö–æ–º–º–µ–Ω—Ç–∞—Ä–∏–µ–≤ –ø–æ–∫–∞–∑–∞–Ω–æ:', document.querySelectorAll('.comment-item').length);
</script>
{% endblock %} '{{ csrf_token }}',
            'Content-Type': 'application/json',
        },
    })
    .then(response => response.json())
    .then(data => {
        if (data.status === 'success') {
            showNotification(data.message, 'success');
        }
    })
    .catch(error => {
        console.error('Error:', error);
        showNotification('–ü—Ä–æ–∏–∑–æ—à–ª–∞ –æ—à–∏–±–∫–∞. –ü–æ–ø—Ä–æ–±—É–π—Ç–µ –ø–æ–∑–∂–µ.', 'danger');
    });
    {% else %}
    window.location.href = '/accounts/login/?next={{ request.get_full_path }}';
    {% endif %}
}

function copyToClipboard(text) {
    navigator.clipboard.writeText(text).then(function() {
        showNotification('–°—Å—ã–ª–∫–∞ —Å–∫–æ–ø–∏—Ä–æ–≤–∞–Ω–∞ –≤ –±—É—Ñ–µ—Ä –æ–±–º–µ–Ω–∞!', 'success');
    }, function(err) {
        console.error('–û—à–∏–±–∫–∞ –∫–æ–ø–∏—Ä–æ–≤–∞–Ω–∏—è: ', err);
        showNotification('–ù–µ —É–¥–∞–ª–æ—Å—å —Å–∫–æ–ø–∏—Ä–æ–≤–∞—Ç—å —Å—Å—ã–ª–∫—É', 'danger');
    });
}

function showNotification(message, type) {
    const alert = document.createElement('div');
    alert.className = `alert alert-${type} alert-dismissible fade show position-fixed`;
    alert.style.top = '20px';
    alert.style.right = '20px';
    alert.style.zIndex = '9999';
    alert.style.minWidth = '300px';
    alert.innerHTML = `
        ${message}
        <button type="button" class="btn-close" data-bs-dismiss="alert"></button>
    `;
    document.body.appendChild(alert);
    
    setTimeout(() => {
        if (alert.parentNode) {
            alert.remove();
        }
    }, 4000);
}

// =================
// –§–£–ù–ö–¶–ò–ò –ö–û–ú–ú–ï–ù–¢–ê–†–ò–ï–í
// =================

// –°—á–µ—Ç—á–∏–∫ —Å–∏–º–≤–æ–ª–æ–≤ –¥–ª—è –∫–æ–º–º–µ–Ω—Ç–∞—Ä–∏–µ–≤
document.addEventListener('DOMContentLoaded', function() {
    const commentText = document.getElementById('comment-text');
    const charCount = document.getElementById('char-count');
    
    if (commentText && charCount) {
        commentText.addEventListener('input', function() {
            const remaining = 1000 - this.value.length;
            charCount.textContent = remaining;
            
            // –£–±–∏—Ä–∞–µ–º –≤—Å–µ –∫–ª–∞—Å—Å—ã
            charCount.classList.remove('warning', 'danger');
            
            // –ú–µ–Ω—è–µ–º —Ü–≤–µ—Ç –ø—Ä–∏ –ø—Ä–∏–±–ª–∏–∂–µ–Ω–∏–∏ –∫ –ª–∏–º–∏—Ç—É
            if (remaining < 100) {
                charCount.classList.add('danger');
            } else if (remaining < 200) {
                charCount.classList.add('warning');
            }
        });
    }
    
    // –ê–≤—Ç–æ—Ñ–æ–∫—É—Å –ø—Ä–∏ –æ—Ç–∫—Ä—ã—Ç–∏–∏ —Ñ–æ—Ä–º—ã –∫–æ–º–º–µ–Ω—Ç–∞—Ä–∏—è
    const commentForm = document.getElementById('commentForm');
    if (commentForm) {
        commentForm.addEventListener('shown.bs.collapse', function() {
            const textarea = this.querySelector('#comment-text');
            if (textarea) {
                textarea.focus();
                // –ü–ª–∞–≤–Ω–∞—è –∞–Ω–∏–º–∞—Ü–∏—è –ø–æ—è–≤–ª–µ–Ω–∏—è
                textarea.style.transform = 'scale(0.95)';
                textarea.style.transition = 'transform 0.2s ease';
                setTimeout(() => {
                    textarea.style.transform = 'scale(1)';
                }, 100);
            }
        });
    }
    
    // –û–±—Ä–∞–±–æ—Ç–∫–∞ –æ—Ç–ø—Ä–∞–≤–∫–∏ —Ñ–æ—Ä–º—ã –∫–æ–º–º–µ–Ω—Ç–∞—Ä–∏—è
    const commentFormElement = document.getElementById('comment-form');
    if (commentFormElement) {
        commentFormElement.addEventListener('submit', function(e) {
            const textarea = this.querySelector('#comment-text');
            const submitBtn = this.querySelector('button[type="submit"]');
            
            if (textarea && textarea.value.trim().length < 5) {
                e.preventDefault();
                showNotification('–ö–æ–º–º–µ–Ω—Ç–∞—Ä–∏–π –¥–æ–ª–∂–µ–Ω —Å–æ–¥–µ—Ä–∂–∞—Ç—å –º–∏–Ω–∏–º—É–º 5 —Å–∏–º–≤–æ–ª–æ–≤', 'warning');
                textarea.focus();
                textarea.style.borderColor = '#dc3545';
                textarea.classList.add('is-invalid');
                setTimeout(() => {
                    textarea.style.borderColor = '';
                    textarea.classList.remove('is-invalid');
                }, 3000);
                return false;
            }
            
            // –ü–æ–∫–∞–∑—ã–≤–∞–µ–º –∏–Ω–¥–∏–∫–∞—Ç–æ—Ä –∑–∞–≥—Ä—É–∑–∫–∏
            if (submitBtn) {
                submitBtn.disabled = true;
                const originalText = submitBtn.innerHTML;
                submitBtn.innerHTML = '<span class="spinner-border spinner-border-sm me-2"></span>–û—Ç–ø—Ä–∞–≤–ª—è–µ—Ç—Å—è...';
                
                // –í–æ—Å—Å—Ç–∞–Ω–∞–≤–ª–∏–≤–∞–µ–º –∫–Ω–æ–ø–∫—É —á–µ—Ä–µ–∑ 10 —Å–µ–∫—É–Ω–¥ (–Ω–∞ —Å–ª—É—á–∞–π –æ—à–∏–±–∫–∏)
                setTimeout(() => {
                    submitBtn.disabled = false;
                    submitBtn.innerHTML = originalText;
                }, 10000);
            }
        });
    }
});

// –§—É–Ω–∫—Ü–∏—è –æ—Ç–≤–µ—Ç–∞ –Ω–∞ –∫–æ–º–º–µ–Ω—Ç–∞—Ä–∏–π
function replyToComment(commentId, authorName) {
    const parentIdField = document.getElementById('parent-id');
    const replyInfo = document.getElementById('reply-info');
    const replyAuthor = document.getElementById('reply-author');
    const commentForm = document.getElementById('commentForm');
    const textarea = document.getElementById('comment-text');
    
    if (parentIdField && replyInfo && replyAuthor) {
        // –£—Å—Ç–∞–Ω–∞–≤–ª–∏–≤–∞–µ–º ID —Ä–æ–¥–∏—Ç–µ–ª—å—Å–∫–æ–≥–æ –∫–æ–º–º–µ–Ω—Ç–∞—Ä–∏—è
        parentIdField.value = commentId;
        
        // –ü–æ–∫–∞–∑—ã–≤–∞–µ–º –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏—é –æ–± –æ—Ç–≤–µ—Ç–µ
        replyAuthor.textContent = authorName;
        replyInfo.style.display = 'block';
        
        // –û—Ç–∫—Ä—ã–≤–∞–µ–º —Ñ–æ—Ä–º—É –µ—Å–ª–∏ –æ–Ω–∞ —Å–≤–µ—Ä–Ω—É—Ç–∞
        if (commentForm && !commentForm.classList.contains('show')) {
            const collapseInstance = new bootstrap.Collapse(commentForm, {
                toggle: true
            });
        }
        
        // –§–æ–∫—É—Å–∏—Ä—É–µ–º—Å—è –Ω–∞ —Ç–µ–∫—Å—Ç–æ–≤–æ–º –ø–æ–ª–µ
        if (textarea) {
            setTimeout(() => {
                textarea.focus();
                textarea.placeholder = `–û—Ç–≤–µ—Ç –¥–ª—è ${authorName}...`;
            }, 300);
        }
        
        // –ü—Ä–æ–∫—Ä—É—á–∏–≤–∞–µ–º –∫ —Ñ–æ—Ä–º–µ
        setTimeout(() => {
            commentForm.scrollIntoView({ 
                behavior: 'smooth', 
                block: 'center' 
            });
        }, 300);
    }
}

// –§—É–Ω–∫—Ü–∏—è –æ—Ç–º–µ–Ω—ã –æ—Ç–≤–µ—Ç–∞
function cancelReply() {
    const parentIdField = document.getElementById('parent-id');
    const replyInfo = document.getElementById('reply-info');
    const textarea = document.getElementById('comment-text');
    
    if (parentIdField) {
        parentIdField.value = '';
    }
    
    if (replyInfo) {
        replyInfo.style.display = 'none';
    }
    
    if (textarea) {
        textarea.placeholder = '–ü–æ–¥–µ–ª–∏—Ç–µ—Å—å —Å–≤–æ–∏–º–∏ –º—ã—Å–ª—è–º–∏ –æ —Ä–∞—Å—Å–∫–∞–∑–µ...';
    }
}
</script>
{% endblock %}
