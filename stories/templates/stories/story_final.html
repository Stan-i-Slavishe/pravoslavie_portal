{% extends 'base.html' %}
{% load static %}

{% block extra_css %}
<link rel="stylesheet" href="{% static 'stories/css/ajax_comments.css' %}">
{% endblock %}

{% block title %}{{ story.title }} - –í–∏–¥–µ–æ-—Ä–∞—Å—Å–∫–∞–∑—ã{% endblock %}

{% block content %}
<div class="container mt-4">
    <!-- –•–ª–µ–±–Ω—ã–µ –∫—Ä–æ—à–∫–∏ -->
    <nav aria-label="breadcrumb">
        <ol class="breadcrumb">
            <li class="breadcrumb-item"><a href="{% url 'core:home' %}">–ì–ª–∞–≤–Ω–∞—è</a></li>
            <li class="breadcrumb-item"><a href="{% url 'stories:list' %}">–†–∞—Å—Å–∫–∞–∑—ã</a></li>
            <li class="breadcrumb-item active">{{ story.title }}</li>
        </ol>
    </nav>
    
    <!-- –û—Å–Ω–æ–≤–Ω–æ–µ —Å–æ–¥–µ—Ä–∂–∏–º–æ–µ -->
    <div class="row">
        <div class="col-lg-8">
            <!-- –í–∏–¥–µ–æ -->
            <div class="video-container mb-4">
                ";

function copyToClipboard(text) {
    navigator.clipboard.writeText(text).then(function() {
        // –ü—Ä–æ—Å—Ç–æ–µ —É–≤–µ–¥–æ–º–ª–µ–Ω–∏–µ
        if (window.ajaxComments) {
            window.ajaxComments.showNotification('–°—Å—ã–ª–∫–∞ —Å–∫–æ–ø–∏—Ä–æ–≤–∞–Ω–∞ –≤ –±—É—Ñ–µ—Ä –æ–±–º–µ–Ω–∞!', 'success');
        } else {
            alert('–°—Å—ã–ª–∫–∞ —Å–∫–æ–ø–∏—Ä–æ–≤–∞–Ω–∞ –≤ –±—É—Ñ–µ—Ä –æ–±–º–µ–Ω–∞!');
        }
    }, function(err) {
        console.error('–û—à–∏–±–∫–∞ –∫–æ–ø–∏—Ä–æ–≤–∞–Ω–∏—è: ', err);
        if (window.ajaxComments) {
            window.ajaxComments.showNotification('–ù–µ —É–¥–∞–ª–æ—Å—å —Å–∫–æ–ø–∏—Ä–æ–≤–∞—Ç—å —Å—Å—ã–ª–∫—É', 'error');
        } else {
            alert('–ù–µ —É–¥–∞–ª–æ—Å—å —Å–∫–æ–ø–∏—Ä–æ–≤–∞—Ç—å —Å—Å—ã–ª–∫—É');
        }
    });
}

// –ü—Ä–æ—Å—Ç–∞—è –æ–±—Ä–∞–±–æ—Ç–∫–∞ —Ñ–æ—Ä–º –∫–æ–º–º–µ–Ω—Ç–∞—Ä–∏–µ–≤
document.addEventListener('DOMContentLoaded', function() {
    console.log('‚úÖ –°—Ç—Ä–∞–Ω–∏—Ü–∞ —Ä–∞—Å—Å–∫–∞–∑–∞ –∑–∞–≥—Ä—É–∂–µ–Ω–∞');
    
    // –ü—Ä–æ–≤–µ—Ä—è–µ–º, –µ—Å—Ç—å –ª–∏ –∫–æ–º–º–µ–Ω—Ç–∞—Ä–∏–∏ –≤ URL (—è–∫–æ—Ä—å)
    if (window.location.hash) {
        const target = document.querySelector(window.location.hash);
        if (target) {
            target.scrollIntoView({ behavior: 'smooth' });
        }
    }
    
    // –£–≤–µ–¥–æ–º–ª–µ–Ω–∏–µ –æ —Ç–æ–º, —á—Ç–æ AJAX –∞–∫—Ç–∏–≤–∏—Ä–æ–≤–∞–Ω
    if (window.ajaxComments) {
        console.log('üöÄ AJAX –∫–æ–º–º–µ–Ω—Ç–∞—Ä–∏–∏ –∞–∫—Ç–∏–≤–∏—Ä–æ–≤–∞–Ω—ã - –∫–æ–º–º–µ–Ω—Ç–∞—Ä–∏–∏ –±—É–¥—É—Ç –¥–æ–±–∞–≤–ª—è—Ç—å—Å—è –±–µ–∑ –ø–µ—Ä–µ–∑–∞–≥—Ä—É–∑–∫–∏!');
    }
});
</script>
{% endblock %}
