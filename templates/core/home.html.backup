{% extends 'base.html' %}
{% load static %}

{% block title %}Главная - Православный портал{% endblock %}

{% block content %}
<!-- Главная секция в стиле Azbyka -->
<div class="hero-section">
    <div class="row align-items-center">
        <div class="col-lg-8">
            <h1>
                <span class="orthodox-cross"></span>
                Добро пожаловать в {{ site_settings.site_name }}
            </h1>
            <p class="lead">{{ site_settings.site_description }}</p>
            <div class="mt-4">
                <a href="{% url 'stories:list' %}" class="btn btn-primary">
                    Видео-рассказы
                </a>
                <a href="{% url 'books:list' %}" class="btn btn-outline-light">
                    Библиотека
                </a>
            </div>
        </div>
        <div class="col-lg-4 text-center">
            <i class="bi bi-heart-fill" style="font-size: 6rem; color: var(--border-color); opacity: 0.3;"></i>
        </div>
    </div>
</div>

<!-- Основные разделы -->
<div class="row mb-5">
    <div class="col-12">
        <h2 class="text-center mb-4">Наши разделы</h2>
    </div>
</div>

<div class="row g-4 mb-5">
    <!-- Видео-рассказы -->
    <div class="col-md-4">
        <div class="card h-100">
            <div class="card-body text-center">
                <div class="mb-3">
                    <i class="bi bi-play-circle-fill section-icon icon-stories"></i>
                </div>
                <h5 class="card-title">Видео-рассказы</h5>
                <p class="card-text">Духовные истории и свидетельства, которые вдохновляют и поучают</p>
                {% if story_categories %}
                    <div class="mb-3">
                        {% for category in story_categories %}
                            <span class="badge" style="background-color: {{ category.color }}; color: white; margin: 0.1rem;">{{ category.name }}</span>
                        {% endfor %}
                    </div>
                {% endif %}
                <a href="{% url 'stories:list' %}" class="btn btn-primary">
                    Перейти
                </a>
            </div>
        </div>
    </div>

    <!-- Библиотека -->
    <div class="col-md-4">
        <div class="card h-100">
            <div class="card-body text-center">
                <div class="mb-3">
                    <i class="bi bi-book-fill section-icon icon-books"></i>
                </div>
                <h5 class="card-title">Библиотека</h5>
                <p class="card-text">Православные книги, статьи и публикации для углубления веры</p>
                {% if book_categories %}
                    <div class="mb-3">
                        {% for category in book_categories %}
                            <span class="badge" style="background-color: {{ category.color }}; color: white; margin: 0.1rem;">{{ category.name }}</span>
                        {% endfor %}
                    </div>
                {% endif %}
                <a href="{% url 'books:list' %}" class="btn btn-primary">
                    Перейти
                </a>
            </div>
        </div>
    </div>

    <!-- Аудио -->
    <div class="col-md-4">
        <div class="card h-100">
            <div class="card-body text-center">
                <div class="mb-3">
                    <i class="bi bi-music-note-beamed section-icon icon-audio"></i>
                </div>
                <h5 class="card-title">Аудио-контент</h5>
                <p class="card-text">Проповеди, акафисты, духовная музыка и аудиокниги</p>
                {% if audio_categories %}
                    <div class="mb-3">
                        {% for category in audio_categories %}
                            <span class="badge" style="background-color: {{ category.color }}; color: white; margin: 0.1rem;">{{ category.name }}</span>
                        {% endfor %}
                    </div>
                {% endif %}
                <a href="{% url 'audio:list' %}" class="btn btn-primary">
                    Перейти
                </a>
            </div>
        </div>
    </div>
</div>

<!-- Популярные теги -->
{% if popular_tags %}
<div class="row mb-5">
    <div class="col-12">
        <h3 class="mb-3">Популярные темы</h3>
        <div class="tag-cloud">
            {% for tag in popular_tags %}
                {% if tag.slug %}
                    <a href="{% url 'core:tag' slug=tag.slug %}" 
                       class="badge rounded-pill me-2 mb-2 tag-link"
                       style="background-color: {{ tag.color }}; text-decoration: none; padding: 8px 12px;">
                        {{ tag.name }}
                    </a>
                {% endif %}
            {% endfor %}
        </div>
        <div class="mt-3">
            <a href="{% url 'core:tags' %}" class="btn btn-outline-secondary btn-sm">
                <i class="bi bi-tags"></i> Все теги
            </a>
        </div>
    </div>
</div>
{% endif %}

<!-- Призыв к действию -->
<div class="row">
    <div class="col-12">
        <div class="cta-section">
            <h3>Присоединяйтесь к нашему сообществу</h3>
            <p>Получайте доступ к эксклюзивным материалам и участвуйте в обсуждениях</p>
            <div class="mt-3">
                {% if not user.is_authenticated %}
                    <a href="{% url 'account_signup' %}" class="btn btn-primary">
                        Регистрация
                    </a>
                    <a href="{% url 'account_login' %}" class="btn btn-outline-secondary">
                        Войти
                    </a>
                {% else %}
                    <a href="{% url 'subscriptions:plans' %}" class="btn btn-primary">
                        Оформить подписку
                    </a>
                {% endif %}
                <a href="{% url 'core:contact' %}" class="btn btn-outline-secondary">
                    Связаться с нами
                </a>
            </div>
        </div>
    </div>
</div>
{% endblock %}