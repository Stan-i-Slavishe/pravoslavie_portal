<!-- templates/seo/meta_tags.html -->
{% load seo_tags %}

<!-- Основные мета-теги -->
<title>{{ meta.title|default:"Добрые истории - Православный портал" }}</title>
<meta name="description" content="{{ meta.description|truncate_description:155 }}">
<meta name="keywords" content="{{ meta.keywords|default:'православие, духовность, рассказы, книги, аудио, детские сказки' }}">
<meta name="author" content="{{ meta.author|default:'Добрые истории' }}">

<!-- Canonical URL -->
<link rel="canonical" href="{{ meta.canonical_url|default:request.build_absolute_uri }}">

<!-- Open Graph мета-теги -->
<meta property="og:title" content="{{ meta.og_title|default:meta.title }}">
<meta property="og:description" content="{{ meta.og_description|default:meta.description|truncate_description:155 }}">
<meta property="og:type" content="{{ meta.og_type|default:'website' }}">
<meta property="og:url" content="{{ meta.og_url|default:request.build_absolute_uri }}">
<meta property="og:site_name" content="{{ meta.site_name|default:'Добрые истории' }}">
<meta property="og:locale" content="{{ meta.locale|default:'ru_RU' }}">

<!-- Изображение для социальных сетей -->
{% if meta.og_image %}
    <meta property="og:image" content="{{ meta.og_image }}">
{% else %}
    <meta property="og:image" content="{% social_image_url request %}">
{% endif %}
<meta property="og:image:alt" content="{{ meta.og_title|default:meta.title }} - Добрые истории">

<!-- Twitter Card -->
<meta name="twitter:card" content="{{ meta.twitter_card|default:'summary_large_image' }}">
<meta name="twitter:title" content="{{ meta.og_title|default:meta.title }}">
<meta name="twitter:description" content="{{ meta.og_description|default:meta.description|truncate_description:155 }}">
{% if meta.og_image %}
    <meta name="twitter:image" content="{{ meta.og_image }}">
{% else %}
    <meta name="twitter:image" content="{% social_image_url request %}">
{% endif %}

<!-- Дополнительные мета-теги для книг -->
{% if meta.book_author %}
    <meta name="book:author" content="{{ meta.book_author }}">
{% endif %}
{% if meta.book_isbn %}
    <meta name="book:isbn" content="{{ meta.book_isbn }}">
{% endif %}

<!-- Дополнительные мета-теги для видео -->
{% if meta.video_duration %}
    <meta property="video:duration" content="{{ meta.video_duration }}">
{% endif %}

<!-- Robots мета-теги -->
<meta name="robots" content="{{ meta.robots|default:'index, follow' }}">
<meta name="googlebot" content="{{ meta.googlebot|default:'index, follow' }}">

<!-- Дополнительные SEO теги -->
<meta name="theme-color" content="#2B5AA0">
<meta name="msapplication-TileColor" content="#2B5AA0">
