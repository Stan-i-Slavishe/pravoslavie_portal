{% extends 'shop/emails/base_email.html' %}

{% block title %}–°—Ç–∞—Ç—É—Å –∑–∞–∫–∞–∑–∞ #{{ order.short_id }} –∏–∑–º–µ–Ω–µ–Ω - {{ site_name }}{% endblock %}

{% block header_title %}–°—Ç–∞—Ç—É—Å –∑–∞–∫–∞–∑–∞ –∏–∑–º–µ–Ω–µ–Ω{% endblock %}

{% block content %}
<p>–ó–¥—Ä–∞–≤—Å—Ç–≤—É–π—Ç–µ, <strong>{{ order.full_name }}</strong>!</p>

<p>–°—Ç–∞—Ç—É—Å –≤–∞—à–µ–≥–æ –∑–∞–∫–∞–∑–∞ –∏–∑–º–µ–Ω–∏–ª—Å—è:</p>

<div class="order-info">
    <h3>–ò–Ω—Ñ–æ—Ä–º–∞—Ü–∏—è –æ –∑–∞–∫–∞–∑–µ</h3>
    <table style="width: 100%; border-collapse: collapse;">
        <tr>
            <td style="padding: 5px 0;"><strong>–ù–æ–º–µ—Ä –∑–∞–∫–∞–∑–∞:</strong></td>
            <td style="padding: 5px 0;">#{{ order.short_id }}</td>
        </tr>
        <tr>
            <td style="padding: 5px 0;"><strong>–ü—Ä–µ–¥—ã–¥—É—â–∏–π —Å—Ç–∞—Ç—É—Å:</strong></td>
            <td style="padding: 5px 0;">
                <span class="status-badge status-{{ old_status }}">
                    {% if old_status == 'pending' %}–û–∂–∏–¥–∞–µ—Ç –æ–ø–ª–∞—Ç—ã
                    {% elif old_status == 'processing' %}–û–±—Ä–∞–±–∞—Ç—ã–≤–∞–µ—Ç—Å—è
                    {% elif old_status == 'paid' %}–û–ø–ª–∞—á–µ–Ω
                    {% elif old_status == 'completed' %}–ó–∞–≤–µ—Ä—à–µ–Ω
                    {% elif old_status == 'cancelled' %}–û—Ç–º–µ–Ω–µ–Ω
                    {% else %}{{ old_status }}{% endif %}
                </span>
            </td>
        </tr>
        <tr>
            <td style="padding: 5px 0;"><strong>–ù–æ–≤—ã–π —Å—Ç–∞—Ç—É—Å:</strong></td>
            <td style="padding: 5px 0;">
                <span class="status-badge status-{{ order.status }}">{{ order.get_status_display }}</span>
            </td>
        </tr>
        <tr>
            <td style="padding: 5px 0;"><strong>–î–∞—Ç–∞ –∏–∑–º–µ–Ω–µ–Ω–∏—è:</strong></td>
            <td style="padding: 5px 0;">{{ order.updated_at|date:"d.m.Y H:i" }}</td>
        </tr>
    </table>
</div>

{% if order.status == 'processing' %}
<div style="background-color: #fff3e0; padding: 20px; border-radius: 8px; margin: 20px 0;">
    <h3 style="margin-top: 0; color: #e65100;">üîÑ –ó–∞–∫–∞–∑ –≤ –æ–±—Ä–∞–±–æ—Ç–∫–µ</h3>
    <p>–í–∞—à –∑–∞–∫–∞–∑ –ø–æ–ª—É—á–µ–Ω –∏ –ø–µ—Ä–µ–¥–∞–Ω –≤ –æ–±—Ä–∞–±–æ—Ç–∫—É. –ú—ã –ø–æ–¥–≥–æ—Ç–∞–≤–ª–∏–≤–∞–µ–º –≤–∞—à–∏ –º–∞—Ç–µ—Ä–∏–∞–ª—ã.</p>
    {% if order.items.fairy_tale %}
    <p><strong>üßö‚Äç‚ôÄÔ∏è –ü–µ—Ä—Å–æ–Ω–∞–ª–∏–∑–∏—Ä–æ–≤–∞–Ω–Ω—ã–µ —Å–∫–∞–∑–∫–∏:</strong> –ù–∞—à–∏ –∞–≤—Ç–æ—Ä—ã –Ω–∞—á–∞–ª–∏ —Ä–∞–±–æ—Ç—É –Ω–∞–¥ –≤–∞—à–∏–º–∏ –∏–Ω–¥–∏–≤–∏–¥—É–∞–ª—å–Ω—ã–º–∏ —Å–∫–∞–∑–∫–∞–º–∏.</p>
    {% endif %}
</div>

{% elif order.status == 'completed' %}
<div style="background-color: #e8f5e8; padding: 20px; border-radius: 8px; margin: 20px 0;">
    <h3 style="margin-top: 0; color: #2e7d32;">‚úÖ –ó–∞–∫–∞–∑ –∑–∞–≤–µ—Ä—à–µ–Ω</h3>
    <p>–ü–æ–∑–¥—Ä–∞–≤–ª—è–µ–º! –í–∞—à –∑–∞–∫–∞–∑ –ø–æ–ª–Ω–æ—Å—Ç—å—é –≤—ã–ø–æ–ª–Ω–µ–Ω.</p>
    <p>–í—Å–µ –º–∞—Ç–µ—Ä–∏–∞–ª—ã –¥–æ—Å—Ç—É–ø–Ω—ã –¥–ª—è —Å–∫–∞—á–∏–≤–∞–Ω–∏—è –≤ –≤–∞—à–µ–º <a href="{{ site_url }}/shop/my-purchases/">–ª–∏—á–Ω–æ–º –∫–∞–±–∏–Ω–µ—Ç–µ</a>.</p>
</div>

{% elif order.status == 'cancelled' %}
<div style="background-color: #ffebee; padding: 20px; border-radius: 8px; margin: 20px 0;">
    <h3 style="margin-top: 0; color: #c62828;">‚ùå –ó–∞–∫–∞–∑ –æ—Ç–º–µ–Ω–µ–Ω</h3>
    <p>–ö —Å–æ–∂–∞–ª–µ–Ω–∏—é, –≤–∞—à –∑–∞–∫–∞–∑ –±—ã–ª –æ—Ç–º–µ–Ω–µ–Ω. –ï—Å–ª–∏ —É –≤–∞—Å –µ—Å—Ç—å –≤–æ–ø—Ä–æ—Å—ã, –ø–æ–∂–∞–ª—É–π—Å—Ç–∞, —Å–≤—è–∂–∏—Ç–µ—Å—å —Å –Ω–∞—à–µ–π —Å–ª—É–∂–±–æ–π –ø–æ–¥–¥–µ—Ä–∂–∫–∏.</p>
    {% if order.paid_at %}
    <p><strong>–í–æ–∑–≤—Ä–∞—Ç —Å—Ä–µ–¥—Å—Ç–≤:</strong> –°—Ä–µ–¥—Å—Ç–≤–∞ –±—É–¥—É—Ç –≤–æ–∑–≤—Ä–∞—â–µ–Ω—ã –≤ —Ç–µ—á–µ–Ω–∏–µ 3-5 —Ä–∞–±–æ—á–∏—Ö –¥–Ω–µ–π.</p>
    {% endif %}
</div>
{% endif %}

<div class="order-items">
    <h3>–°–æ—Å—Ç–∞–≤ –∑–∞–∫–∞–∑–∞:</h3>
    {% for item in order.items.all %}
    <div class="order-item">
        <div class="item-title">{{ item.product_title }}</div>
        <div class="item-details">
            –ö–æ–ª–∏—á–µ—Å—Ç–≤–æ: {{ item.quantity }} —à—Ç. √ó {{ item.product_price }}‚ÇΩ = {{ item.total_price }}‚ÇΩ
            
            {% if item.is_fairy_tale and item.fairy_tale_status %}
            <div class="personalization-info">
                <strong>üßö‚Äç‚ôÄÔ∏è –°—Ç–∞—Ç—É—Å —Å–∫–∞–∑–∫–∏:</strong> {{ item.fairy_tale_status_display }}
            </div>
            {% endif %}
        </div>
    </div>
    {% endfor %}
</div>

<p style="text-align: center; margin: 30px 0;">
    <a href="{{ site_url }}/shop/order/{{ order.order_id }}/" 
       style="display: inline-block; background-color: #2B5AA0; color: white; padding: 12px 24px; text-decoration: none; border-radius: 6px; font-weight: 600;">
        üìã –ü–æ—Å–º–æ—Ç—Ä–µ—Ç—å –∑–∞–∫–∞–∑
    </a>
</p>

<p>–ï—Å–ª–∏ —É –≤–∞—Å –µ—Å—Ç—å –≤–æ–ø—Ä–æ—Å—ã, –Ω–µ —Å—Ç–µ—Å–Ω—è–π—Ç–µ—Å—å –æ–±—Ä–∞—â–∞—Ç—å—Å—è –∫ –Ω–∞–º!</p>

<p>–° —É–≤–∞–∂–µ–Ω–∏–µ–º,<br>
<strong>–ö–æ–º–∞–Ω–¥–∞ {{ site_name }}</strong></p>
{% endblock %}
